(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[140],{1087:function(e,t,i){"use strict";e.exports=function(e){e.each((function(e,t){var i=t.getAttribute("data-preload");if(!i){return}var o=t.cloneNode(true);o.src=i;o.removeAttribute("style");o.removeAttribute("data-preload");o.addEventListener("load",(function e(){t.parentNode.replaceChild(o,t);o.removeEventListener("load",e);o=null;t=null}))}))}},1388:function(e,t,i){"use strict";var o=i(556);var n=i(117);e.exports={onKeyup:function e(t){if(this.enableListThroughNavigation&&this.canNavigate()){if(t.keyCode===o.left){this.navigate("prev")}else if(t.keyCode===o.right){this.navigate("next")}}},navigate:function e(t){var i=this.getFile(t);if(!i||this.collection.pending){return}if(this.model.id===i.id){this.app.observer.broadcast("Track:UE:FileViewModal:Edge",{direction:t});this.edgeCallback(t)}else{this.app.observer.broadcast("Track:UE:FileViewModal:Navigate",{direction:t,file:i.serialize(),sourceFile:this.model});this.updateModal(i)}},getFile:function e(t){var i=this.relatedHistory&&this.relatedHistory.length?this.relatedHistory.first().get("id"):+this.app.queryParams.qview||this.model.get("id");var o=this.getFileIndex(i);return this.directions[t].call(this,o)},getFileIndex:function e(t){if(t===void 0){t=this.model.id}return this.collection.indexOf(this.collection.get(t))},edgeCallback:function e(t){return t==="prev"?this.leftEdgeCallback():this.rightEdgeCallback()},leftNavigation:function e(t){t.stopPropagation();this.navigate("prev")},rightNavigation:function e(t){t.stopPropagation();this.navigate("next")},directions:{prev:function e(t){return this.collection.at(Math.max(t-1,0))},next:function e(t){return this.collection.at(Math.min(t+1,this.collection.length-1))}},updateModal:function e(t){if(this.asyncFileViewModalLoad){if(!this.fetchXhr||this.fetchXhr&&this.fetchXhr.state()!=="pending"){this.fetchXhr=this.fetchFile(t.id,this.showModal)}}else{this.showModal(t)}},showModal:function e(t){if(!this.app.store.get("ModalsManager").get(this.name)){return}this.app.observer.fire("Responsive:ClearMatchMedia");this.app.store.get("ModalsManager").show(this.name,{model:t}).catch((function(){}))},fetchFile:function e(t,i){var o=this;var s=new n({id:t},{app:this.app,validate:true});return s.fetch({parser:"parseFromFile"}).then((function(){i.call(o,s)}))}}},1404:function(e,t,i){"use strict";function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);if(t)o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,o)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){o(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var r=i(823),a=r.FileViewModals;var l=i(1423);var h=i(835);var d=i(774);var c=i(78);var u=i(560);var f=i(1087);var p=i(1388);var g=i(571);var m=200;var v=100;var y=200;var b=200;e.exports=h.extend({name:"ZoomModal",template:l,model:null,draggable:false,destroyOnHide:true,overlayOpacity:.92,reserve:{mobile:{width:24,height:18},desktop:{width:50,height:90}},dimensions:{},placeholderSRC:null,showDownloadButton:false,enableListThroughNavigation:true,events:Object.assign({},h.prototype.events,{"click ._download":"onDownloadClick","click ._zoom-prev":"onZoomPrev","click ._zoom-next":"onZoomNext","click ._img":"handleImageClick","touchstart ._modal":"handleModalTouchStart","touchmove ._modal":"handleModalTouchMove","touchend ._modal":"handleModalTouchEnd"}),globals:Object.assign({},h.prototype.globals,{keyup:"onKeyup","orientationchange window":"handleWindowOrientationChange"}),initialize:function e(){Object.assign(this,p);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++){i[o]=arguments[o]}h.prototype.initialize.apply(this,i);this.shouldHideTitle=a(this.app).shouldHideTitle;this.listenTo(this.model,"change",this.render)},prepareRender:function e(){h.prototype.prepareRender.call(this);this.id=this.model.get("id");this.dimensions=c.getThumbSizes(this.model.serialize(),this.model.get("type")!=="video"?"max":"huge");this.navigation={left:this.enableListThroughNavigation&&!this.isFirstItem(this.id),right:this.enableListThroughNavigation&&!this.isLastItem(this.id)};if(this.model&&this.model.get("type")==="video"){this.setView("._wrap",new d({app:this.app,file:this.model,controls:false,blackBackground:true}))}else if(this.views["._wrap"]){this.views["._wrap"].remove()}},serialize:function e(){return{file:n({},g.injectFilesSEOMeta(this.app,this.model.serialize()),{src:this.makePlaceholderSRC(),preload:this.model.makeThumb(this.model.get("type")!=="video"?"max":"huge"),type:this.model.get("type")}),navigation:this.navigation,modalClasses:this.modalClasses,dimensions:this.dimensions,showDownloadButton:this.showDownloadButton,opacity:[],lockInnerScroll:this.lockInnerScroll,shouldHideTitle:this.shouldHideTitle}},makePlaceholderSRC:function e(){if(this.placeholderSRC){return this.placeholderSRC}return this.model.makeThumb(this.isHugeImageVectorThumb()?"max":"huge")},hide:function e(){this.zoomHideCallback(this.model);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++){i[o]=arguments[o]}h.prototype.hide.apply(this,i)},canNavigate:function e(){return document.activeElement.tagName.toLowerCase()==="body"},getModalRegisterId:function e(){return{id:this.name}},clientAfterRender:function e(){f(this.$("img.modal__zoom-image"));this.zoomShowCallback(this.model.get("id"));for(var t=arguments.length,i=new Array(t),o=0;o<t;o++){i[o]=arguments[o]}h.prototype.clientAfterRender.apply(this,i);this.setModalSize();if(!this.app.user.isLoggedIn()){this.app.observer.broadcast("Track:UE:ZoomModal:DownloadShow",{id:this.id})}this.app.observer.broadcast("Track:UE:Zoom:Show",{file:this.model});this.placeholderSRC=null;this.afterRenderCallback(this.model.id)},onShowCallback:function e(){this.app.history.write({route:"FileViewZoomModal"})},onHideCallback:function e(){this.app.history.write({route:this.app.router.routeName})},onWindowResize:function e(){if(this.app.device.isMobile&&!this.shouldResize){return}this.setModalSize();this.shouldResize=false},onDownloadClick:function e(t){t.stopPropagation();this.app.observer.broadcast("Track:UE:ZoomModal:DownloadClick",{id:this.id});this.app.observer.broadcast("Track:UE:Zoom:Click",{type:"Download"});this.onHide();this.onDownloadCallback(t,this.model)},onZoomPrev:function e(t){t.stopPropagation();this.app.observer.broadcast("Track:UE:Zoom:Click",{type:"Prev",file:this.model});this.leftNavigation(t)},onZoomNext:function e(t){t.stopPropagation();this.app.observer.broadcast("Track:UE:Zoom:Click",{type:"Next",file:this.model});this.rightNavigation(t)},handleImageClick:function e(){if(this.app.device.isMobile){return}this.onHide()},handleWindowOrientationChange:function e(){this.shouldResize=true},handleModalTouchStart:function e(t){this.$modal=this.$("._modal");this.$overlay=this.$("._overlay");this.touch={time:Date.now(),isZoom:window.innerWidth!==(document.documentElement.clientWidth||document.body.clientWidth),fingers:t.originalEvent.touches.length,startPositionY:t.originalEvent.touches[0].pageY,endPositionY:t.originalEvent.touches[0].pageY,opacity:this.$overlay[0].style.opacity};this.$modal.removeAttr("style")},handleModalTouchMove:function e(t){if(this.touch.fingers>1||this.touch.isZoom){return}t.preventDefault();var i=t.originalEvent.touches[0].pageY;var o=i-this.touch.startPositionY;this.$modal.css({transform:"translateY("+o+"px)"});this.$overlay.css({opacity:Math.max(1-Math.abs(o)/v,.8)});this.touch.endPositionY=i},handleModalTouchEnd:function e(){var t=this;if(this.touch.fingers===1&&!this.touch.isZoom){var i=this.touch.endPositionY-this.touch.startPositionY;var o=i>0?1:-1;var n=Date.now()-this.touch.time;this.$modal.css({transition:"transform 0.2s"});if(Math.abs(i)>=v||n<=b){this.$modal.css({transform:"translateY("+o*window.innerHeight+"px)"});setTimeout((function(){t.onHide()}),Math.abs(i)?y:0)}else{this.$modal.css({transform:"unset"});this.$overlay.css({opacity:this.touch.opacity})}}},getReserve:function e(t){if(u.mobileMode()){return this.reserve.mobile[t]}return this.reserve.desktop[t]},resetZoom:function e(){var t=document.querySelector("meta[name=viewport]");var i=t.getAttribute("content");t.setAttribute("content",i+", maximum-scale=1.0, minimum-scale=1.0");t.setAttribute("content",i)},setModalSize:function e(){if(this.app.device.isMobile){this.resetZoom()}var t=this.dimensions.w+this.getReserve("width");var i=this.dimensions.h+this.getReserve("height");var o=this.dimensions.w;var n=this.dimensions.h;if(t>window.innerWidth||i>window.innerHeight){var s=window.innerWidth-this.getReserve("width");var r=Math.floor(s*this.dimensions.h/this.dimensions.w);var a=window.innerHeight-this.getReserve("height");var l=Math.floor(a*this.dimensions.w/this.dimensions.h);if(s+this.getReserve("width")<=window.innerWidth&&r+this.getReserve("height")<=window.innerHeight){o=s;n=r}else{o=l;n=a}}if(o<=this.getReserve("width")||n<=this.getReserve("height")){return}if(this.isHugeImageVectorThumb()){var h=100;var d=Math.ceil(h/(this.dimensions.h/n));this.$("._body").width(o).height(n-d)}else{this.$("._body").width(o).height(n)}this.$("._wrap").width(o).height(n);this.$el.toggleClass("modal-zoom-compact",window.innerWidth-o<=m);this.$("._caption").width(o)},isHugeImageVectorThumb:function e(){return this.model.get("hasHugeImageThumb")||this.model.get("hasHugeVectorThumb")},onDownloadCallback:function e(){},zoomShowCallback:function e(){},zoomHideCallback:function e(){},zoomLeftCallback:function e(){},zoomRightCallback:function e(){}})},1423:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var o='<div class="modal-container modal-container_file-zoom';if(t.lockInnerScroll){o+=" modal-container_lock-scroll"}o+='"><i class="overlay__close _close"></i><div class="modal _modal '+i(t.modalClasses)+'"><div class="modal__dialog"><div class="modal__zoom _body" style="width: '+i(t.dimensions.w)+"px; height: "+i(t.dimensions.h)+'px;"><div class="_wrap" style="width: '+i(t.dimensions.w)+"px; height: "+i(t.dimensions.h)+'px;">';if(t.file.type!=="video"){o+='<img class="modal__zoom-image _img" src="'+t.file.src+'" data-preload="'+i(t.file.preload)+'" alt="'+i(t.file.seoAlt)+'" title="'+i(t.file.seoTitle)+'">'}o+="</div></div>";if(!t.shouldHideTitle){o+='<div class="modal__zoom-caption';if(t.showDownloadButton){o+=" modal__zoom-caption_with-button"}o+=' _caption" style="width: '+i(t.dimensions.w)+'px;"><span class="modal__zoom-caption-text">'+i(t.file.seoTitle)+"</span>";if(t.showDownloadButton){o+='<span class="modal__zoom-caption-button"><button class="button button-xl button-watery button-blue _download">'+this.tr("Download")+"</button></span>"}o+="</div>"}o+="</div>";if(t.opacity.length){o+='<div class="bg-selector _opacity-range"><div class="bg-selector__content">';var n=t.opacity;if(n){var s,r=-1,a=n.length-1;while(r<a){s=n[r+=1];o+='<div class="bg-selector__handler _opacity-switcher ';if(s.active){o+="bg-selector__handler_active"}o+='"><i class="bg-selector__handler-item" style="opacity: '+i(1-s.value/100)+';"></i></div>'}}o+="</div></div>"}if(t.navigation.left){o+='<i class="modal__zoom-nav modal__zoom-nav_left button-nav button-nav-left _zoom-prev"></i>'}if(t.navigation.right){o+='<i class="modal__zoom-nav modal__zoom-nav_right button-nav button-nav-right _zoom-next"></i>'}o+="</div></div>";return o}},774:function(e,t,i){"use strict";(function(t){function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);if(t)o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,o)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){o(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}i(799);i(776);var r=i(0);var a=i(738).videoPlayer;var l=i(800);var h=i(17);var d=i(737);var c=i(546);var u=i(78);var f="vjs-silent-video";var p=null;e.exports=c.extend({name:"FilePreviewVideo",el:false,template:l,file:null,RAWVideoFiles:null,$mount:undefined,$poster:undefined,mountMethod:"append",mountOn:"ready",playerId:null,preload:true,loop:true,shouldSetSizes:true,width:0,height:0,controls:true,autoplay:true,hasPoster:true,muted:false,controlBar:{muteToggle:false,volumeControl:true},spinner:{top:undefined,left:undefined,color:undefined},startPoint:0,startPointAutoCalculation:true,blackBackground:false,viewMode:"modal",initialize:function e(){var t=this;this.spinner=new d(r.defaults(this.spinner,r.clone(a)));if(this.app&&this.app.device&&this.app.device.isMobile){this.on("ready loadstart",(function(){t.toggleSpinner();t.$el.addClass("video-playing");t.$(".video-js").addClass("vjs-has-started")}))}else{this.once("playing",(function(){return t.$el.addClass("video-playing")}))}if(this.$mount){this.once(this.mountOn,this.mountHandler)}},serialize:function e(){return n({files:this.RAWVideoFiles||this.file.getVideoThumbs(this.getVideoThumbsSize(false)),isEditorial:this.file&&this.file.get("editorial"),showTitle:this.getShowTitle(),title:this.file&&this.file.get("title"),isWebmAllowed:this.app.features.isFeatureOnValue("Is webm video thumb allowed"),shouldSetSizes:this.shouldSetSizes,autoplay:this.autoplay,muted:this.muted},this.makeVideoInfo(),{},this.makePlayerOptions())},clientAfterRender:function e(){this.initVideoPlayer()},getShowTitle:function e(){return this.app&&this.app.features&&this.app.features.isFeatureOnValue("Show file title in preview")},initVideoPlayer:function e(){var t=this;this.toggleSpinner(true);i.e(139).then(function(e){p=p||i(1e3);t.destroyInactivePlayers();t.playerId=p(t.getPlayerElement(),r.extend(t.makePlayerOptions(),t.makeVideoInfo())).id();t.initPlayerEvents()}.bind(null,i)).catch(i.oe)},initPlayerEvents:function e(){var t=this;var i=this.getPlayer();if(i){i.ready((function(){t.trigger("ready",t);i.muted(t.muted);i.userActive(false);i.currentTime(t.makeStartPoint());i.on("loadeddata",(function(){t.checkVideoSoundTrack();t.getPlayerElement().currentTime=t.makeStartPoint()}));i.on("loadstart",(function(){t.toggleSpinner(true);t.trigger("loadstart",t)}));i.on("playing",(function(){t.toggleSpinner(false);t.trigger("playing",t)}));i.on("error",(function(){return t.onPlayerError()}));i.on("dispose",(function(){t.stopListening();t.undelegateEvents()}));i.on("touchend",(function(e){if(t.el.getElementsByClassName("vjs-control-bar")[0].contains(e.target)){return}if(i.paused()){t.startPlayer()}else{t.pausePlayer()}}));if(t.autoplay&&i.paused()){t.startPlayer()}}))}},calculateStartPoint:function e(){var t=this.file&&this.file.get("mp")||0;return t>5?Math.floor(t/5):0},makeStartPoint:function e(){return this.startPointAutoCalculation?this.calculateStartPoint():this.startPoint},makeVideoInfo:function e(){var t={width:this.width,height:this.height};if(this.file){var i=u.getThumbSizes(this.file.serialize(),"huge");t.width=this.width||i.w;t.height=this.height||i.h}return t},makePlayerOptions:function e(){return{controls:this.controls,preload:!!t.browser&&this.preload,loop:this.loop,blackBackground:this.blackBackground,poster:this.hasPoster?this.makePoster():null,controlBar:this.controlBar}},makePoster:function e(){var t=this.file&&this.file.getVideoThumbs(this.getVideoThumbsSize(true));if(t&&t.jpg){return t.jpg}if(this.RAWVideoFiles&&this.RAWVideoFiles.jpg){return this.RAWVideoFiles.jpg}return null},getVideoThumbsSize:function e(t){var i=["modal","page"].includes(this.viewMode)?"huge":"wide";return t?i:u.getVideoClipThumbSize(this.file.serialize(),i)},getPlayerElement:function e(){return this.el.tagName.toLowerCase()==="video"?this.el:this.$("video").get(0)},mountHandler:function e(){this.mountPreview();var t=this.getPlayer();if(this.autoplay&&t&&t.paused()){this.startPlayer()}this.app.observer.fire("Responsive:VideoPreviewMounted")},mountPreview:function e(){if(this.mountMethod==="html"){return this.$mount.html(this.$el)}if(this.mountMethod.indexOf("insert")===-1){return this.$mount[this.mountMethod](this.$el)}return this.$el[this.mountMethod](this.$mount)},onPlayerError:function e(){this.spinner.stop();this.spinner=new d(r.extend(r.clone(a),{color:"#ff0000"}));this.toggleSpinner(true)},checkVideoSoundTrack:function e(){var t=this.getPlayer();if(t){var i=this.$("video").get(0);var o=r.isUndefined(i.webkitAudioDecodedByteCount||i.mozHasAudio);t.toggleClass(f,o)}},toggleSpinner:function e(t){if(t){this.spinner.spin(this.$mount&&this.$mount.get(0)||this.el)}else{this.spinner.stop()}},getPlayer:function e(){return p&&this.playerId?p.getPlayers()[this.playerId]:null},startPlayer:function e(){var t=this.getPlayer();if(t){t.play()}},pausePlayer:function e(){var t=this.getPlayer();if(t){t.pause()}},destroyInactivePlayers:function e(){if(p){r.each(p.getPlayers(),(function(e,t){if(e){if(!h.$("#"+t).length){e.dispose()}}else{delete p.players[t]}}))}},cleanup:function e(){this.toggleSpinner();this.pausePlayer()}})}).call(this,i(16))},776:function(e,t,i){},799:function(e,t,i){},800:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var o='<div class="vjs-container"><noscript><video class="video-js vjs-deposit-skin ';if(t.blackBackground){o+=" vjs-bg-black"}o+='"';if(t.shouldSetSizes){o+='style="width: '+i(t.width)+"px; height: "+i(t.height)+'px;"'}o+='width="'+i(t.width)+'" height="'+i(t.height)+'" ';if(t.controls){o+=" controls"}if(t.muted){o+=" muted"}if(t.autoplay){o+=" autoplay"}if(t.poster){o+=' poster="'+i(t.poster)+'"'}if(t.preload){o+=" preload"}if(t.loop){o+=" loop"}o+=">";if(t.files.mp4){o+='<source type="video/mp4" src="'+t.files.mp4+'" itemprop="contentURL"></source>'}if(t.isWebmAllowed&&t.files.webm){o+='<source type="video/webm" src="'+t.files.webm+'" itemprop="contentURL"></source>'}if(t.files.ogg){o+='<source type="video/ogg" src="'+t.files.ogg+'" itemprop="contentURL"></source>'}o+='</video></noscript><video class="video-js vjs-deposit-skin ';if(t.blackBackground){o+=" vjs-bg-black"}o+='"';if(t.shouldSetSizes){o+='style="width: '+i(t.width)+"px; height: "+i(t.height)+'px;"'}o+='width="'+i(t.width)+'" height="'+i(t.height)+'" ';if(t.controls){o+=" controls"}if(t.muted){o+=" muted"}if(t.autoplay){o+=" autoplay"}if(t.poster){o+=' poster="'+i(t.poster)+'"'}if(t.preload){o+=" preload"}if(t.loop){o+=" loop"}o+=">";if(t.files.mp4){o+='<source type="video/mp4" src="'+t.files.mp4+'" itemprop="contentURL"></source>'}if(t.isWebmAllowed&&t.files.webm){o+='<source type="video/webm" src="'+t.files.webm+'" itemprop="contentURL"></source>'}if(t.files.ogg){o+='<source type="video/ogg" src="'+t.files.ogg+'" itemprop="contentURL"></source>'}o+="</video></div>";return o}},823:function(e,t,i){"use strict";var o=i(4),n=o.languages;var s=n.accepts;e.exports={ContactBox:function e(t){return{stats:["image","editorial","video"]}},OurApps:function e(t){return{isEnabled:t.lang!==s.zh}},About:function e(t){return{socialLinksEnabled:t.lang!==s.zh}},FileViewThumb:function e(t){return{isSharingEnabled:t.lang!==s.zh}},ShareFolder:function e(t){return{socialTabEnabled:t.lang!==s.zh}},SearchHeaderFolder:function e(t){return{isSharingEnabled:t.user.isLoggedIn()||t.lang!==s.zh}},FileViewModals:function e(t){return{shouldHideTitle:t.features.isFeatureOnValue("NoTitleModal")}}}},835:function(e,t,i){"use strict";var o=i(556);var n=i(1018);var s=i(1019);var r=i(0);var a=i(17);var l=i(546);var h=i(552);var d=i(555);var c=i(777);var u=4e3;var f=l.extend({el:false,template:n,isOpened:false,destroyOnHide:false,closeOnOverlayClick:true,overlayOpacity:null,overlayBgColor:null,closeOnEscapeBtn:true,lockInnerScroll:false,single:false,draggable:false,noBorder:false,showHeader:true,showTitle:true,roundCloseButton:false,leftBtn:false,rightBtn:false,zIndex:u,modalClasses:"",bodyClasses:"",title:"",lockBodyScroll:true,body:[],escKeys:[o.esc],footer:[{selector:"",label:"OK",color:"blue",hide:true,defaultAction:true,callback:function e(){}}],events:{"click ._overlay":"onOverlayClick","click ._close":"onCloseClick","click ._btn":"onModalButtonClick","click ._left-arrow-button":"onLeftArrowClick","click ._right-arrow-button":"onRightArrowClick"},globals:{keypress:"onKeypress","resize window":"onWindowResize"},initialize:function e(){if(!this.showHeader){this.showTitle=false}this.listenTo(this.app.observer,{"Modal:HideAll":this.observeHideAll.bind(this),"Modal:HideByName":this.handleHideByName.bind(this)})},getOverlaySchema:function e(){return[{key:"opacity",value:this.overlayOpacity},{key:"background-color",value:this.overlayBgColor}]},getOverlayStyle:function e(){return this.getOverlaySchema().filter((function(e){return e.value!==null})).map((function(e){return e.key+": "+e.value})).join("; ")},setOverlay:function e(){var t=l.extend({name:"ModalOverlay",el:false,template:s,styleString:this.getOverlayStyle(),serialize:function e(){return{styleString:this.styleString}}});this.setView(new t,true)},prepareRender:function e(){this.setOverlay();this.fillModalBody()},serialize:function e(){return{modalClasses:this.modalClasses,bodyClasses:this.bodyClasses,noBorder:!!this.noBorder,showTitle:this.showTitle,showHeader:this.showHeader,roundCloseButton:this.roundCloseButton,title:this.title,footer:this.footer,leftBtn:this.leftBtn,rightBtn:this.rightBtn,lockInnerScroll:this.lockInnerScroll}},clientAfterRender:function e(){this.setZindex();if(this.draggable){this.enableDraggable()}if(this.footer.length){h(this.$el.find("._footer"),a.$);d(this.$("._btn"))}},fillModalBody:function e(){if(!this.body.length&&typeof this.body!=="function"||this.getView("._body")){return}this.setViews({"._body":typeof this.body==="function"?this.body():this.body})},getModalRegisterId:function e(){return{id:this.cid}},show:function e(t){var i=this;if(t===void 0){t={}}this.app.observer.fire("Tooltip:GlobalHide",{cid:"all"});if(this.single){this.app.observer.fire("Modal:HideAll",{cid:this.cid})}if(!{}.hasOwnProperty.call(t,"shouldTrackModalShow")){t.shouldTrackModalShow=true}Object.assign(this,t);if(!this.isOpened){this.beforeShowCallback()}if(this.lockBodyScroll){this.bodyScrollLock()}this.render().promise().then((function(){i.onShowCallback();i.isOpened=true}))},hide:function e(){if(!this.isOpened){return}this.onHideCallback(this);this.$el.remove();this.undelegateEvents();this.isOpened=false;this.bodyScrollUnlock();if(this.destroyOnHide){this.remove()}this.onAfterHideCallback()},onCloseClick:function e(t){t.stopPropagation();this.onHide()},onOverlayClick:function e(t){t.stopPropagation();if(this.closeOnOverlayClick&&t.target===t.currentTarget){this.onHide()}},onModalButtonClick:function e(t){t.stopPropagation();t.preventDefault();this.executeButtonAction(t.currentTarget)},onKeypress:function e(t){if(this.isOpened&&t.target.tagName.toLowerCase()!=="textarea"&&t.keyCode===o.enter){var i=this.footer.find((function(e){return e.defaultAction===true}));this.executeButtonAction(i)}},executeButtonAction:function e(t){var i=this.footer[a.$(t).index()];if(!r.isObject(i)){return}if(r.isFunction(i.callback)){i.callback(this,t)}if(r.isFunction(this[i.callback])){this[i.callback](this,t)}if(i.hide){this.onHide()}},onTouchEndCallback:function e(t){t.stopPropagation();this.onHide()},observeHideAll:function e(t){if(t.cid!==this.cid){this.onHide()}},handleHideByName:function e(t){var i=t.name;if(this.name===i){this.onHide()}},setZindex:function e(){this.$el.css({zIndex:this.zIndex})},enableDraggable:function e(){var t=this;c.initDragNDrop();this.$el.find("._modal").draggable({handle:"._drag-handler",scroll:false,create:function e(i,o){t.$el.addClass("modal-container_lock-scroll")}})},isOpen:function e(){return this.isOpened},bodyScrollLock:function e(){this.setScrollGlitchSuppressor();this.enableScrollCompensator();a.$("html, body").addClass("lock-scroll")},bodyScrollUnlock:function e(){this.removeScrollGlitchSuppressor();this.disableScrollCompensator();a.$("html, body").removeClass("lock-scroll")},enableScrollCompensator:function e(){if(a.$(document).height()<=a.$(window).height()){return}var t=a.$(document.body);var i=a.$(document.head);var o=a.$('<div style="width: 100%; height: 50px; overflow: scroll;">').appendTo("body");var n=o[0].offsetWidth-o[0].clientWidth;o.remove();if(n>0){i.append('<style data-id="scroll-compensator" type="text/css">\n\t\t\t\t\t.scroll-compensator {\n\t\t\t\t\t\tpadding-right: '+n+"px;\n\t\t\t\t\t}\n\t\t\t\t</style>");document.documentElement.style.setProperty("--scroll-holder-width",n+"px","");t.addClass("scroll-compensator")}},disableScrollCompensator:function e(){a.$('[data-id="scroll-compensator"]').remove();a.$(document.body).removeClass("scroll-compensator");document.documentElement.style.setProperty("--scroll-holder-width","0","")},getFixedHeightRules:function e(){return"height: "+a.$(document).height()+"px !important;"},setScrollGlitchSuppressor:function e(){var t=a.$(document.body);var i=a.$(document.head);i.append('<style data-id="fixed-height" type="text/css">\n\t\t\t\t.fixed-height {\n\t\t\t\t\t'+this.getFixedHeightRules()+"\n\t\t\t\t}\n\t\t\t</style>");t.addClass("fixed-height")},removeScrollGlitchSuppressor:function e(){a.$('[data-id="fixed-height"]').remove();a.$(document.body).removeClass("fixed-height")},onHide:function e(){},onWindowResize:function e(){},beforeShowCallback:function e(){},onShowCallback:function e(){},onHideCallback:function e(){},onLeftArrowClick:function e(){},onRightArrowClick:function e(){},onAfterHideCallback:function e(){},onAnimationComplete:function e(){}});e.exports=f}}]);