/*! For license information please see route.FileView.js.LICENSE?ff0cb53d81c1abbeab34 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[51,4,137],{1009:function(e,t,i){},1045:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(1336).base;var o=i(777);var l=i(1337);e.exports=function(e,t,i){o.initDragNDrop();e.draggable(r({},n,{helper:function e(){if(!t.getView("fileDraggableHelper")){t.setViews({fileDraggableHelper:new l(i.helperOptions)})}return Backbone.$("<div></div>")},start:function e(a,s){t.getView("fileDraggableHelper").active=true;t.getView("fileDraggableHelper").setData(r({model:i.helperOptions.getModel(a)},t.getView("fileDraggableHelper").getDefaults())).then((function(){return s.helper.append(t.getView("fileDraggableHelper").$el)}))},drag:function e(i,a){if(a.position.top>window.innerHeight+window.scrollY-a.helper.height()){t.app.observer.fire("Favorites:OpenPanel")}},stop:function e(i,a){a.helper.remove();t.getView("fileDraggableHelper").active=false}}))}},1076:function(e,t,i){"use strict";var a=i(11);e.exports={initSocialButtons:function e(t){var i=this;var a=this.app.user.isLoggedIn()?"-"+this.convertBaseNumber(this.app.user.get("id")):"";this.$("._share-button").each((function(e,r){var s=r.getAttribute("data-social");var n=t.shareData.title||r.getAttribute("data-title");var o=t.shareData.description||r.getAttribute("data-description");var l=i.getCustomSocialRedirectUrl({socialSuffix:t.socialNameMap[s],refId:a,element:r});switch(s){case"facebook":r.href=i.app.makeUrl("facebookSharer",{query:{u:l,title:n,description:o,caption:i.app.host,picture:t.shareData.image}});break;case"twitter":r.href=i.app.makeUrl("twitterSharer",{query:{url:l,via:"depositphotos",text:n+" #stock #photo"}});break;case"pinterest":r.href=i.app.makeUrl("pinterestSharer",{query:{url:l,media:t.shareData.image,description:n}});break;case"vk":r.href=i.app.makeUrl("vkSharer",{query:{url:l,title:n,description:o,image:t.shareData.image}});break;default:r.href="";break}}))},convertBaseNumber:function e(t){return parseInt(t,10).toString(36)},getCustomSocialRedirectUrl:function e(t){if(this.getSocialRedirectUrl){return this.getSocialRedirectUrl(t)}return this.getDefaultSocialRedirectUrl(t)},getDefaultSocialRedirectUrl:function e(t){var i=this.convertBaseNumber(""+t.socialSuffix+this.model.get("id"));return a.urlFormat({protocol:this.app.parsedUrl.protocol,host:this.app.host,pathname:"/v/"+i+t.refId})},onShareButtonClick:function e(t){t.preventDefault();t.stopPropagation();var i=t.currentTarget;var a=t.currentTarget.getAttribute("data-width");var r=t.currentTarget.getAttribute("data-height");var s=(screen.height/2-r/2).toFixed(0);var n=(screen.width/2-a/2).toFixed(0);var o="\n\t\t\ttop="+s+",left="+n+",width="+a+",height="+r+",resizable=yes,\n\t\t\tscrollbars=no,status=yes,location=no";var l=window.open("about:blank",i.getAttribute("data-title"),o);l.location.href=i.href}}},1087:function(e,t,i){"use strict";e.exports=function(e){e.each((function(e,t){var i=t.getAttribute("data-preload");if(!i){return}var a=t.cloneNode(true);a.src=i;a.removeAttribute("style");a.removeAttribute("data-preload");a.addEventListener("load",(function e(){t.parentNode.replaceChild(a,t);a.removeEventListener("load",e);a=null;t=null}))}))}},1331:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}i(1332);i(1333);i(1334);var n=i(838);var o=i(733);var l=i(1335);var c=i(78);var u=i(1045);var d=i(829);var h=i(777);var p=i(571);var f=["normalSquare","big","wideSmall","wide","xwide","huge","large","max"];var v=8;var m=1;var b=4;var g=150;var _=200;var w=2.5;var y=2.75;var k=d.extend({name:"ConfigurableFilesList",el:false,collection:null,template:l,layout:"wide",draggableOptions:{},scale:1,maxRows:2,thumbListHolderWidth:1200,isTitleInside:false,isCartBtnEnabled:true,isFavoriteBtnEnabled:true,isSimilarBtnEnabled:false,isZoomBtnEnabled:false,isPanoramasImproveEnabled:true,displaySeeMoreAsThumb:false,shouldShowVideoLength:false,lazyLoadOptions:{},isSlidable:false,sliderParams:{},makeLikeGrid:false,isEditableFolder:false,panoramasWidthToHeightMax:4,events:r({},d.prototype.events,{"click ._see-more":"handleSeeMoreClick","contextmenu ._thumb-link":"handleContextMenu","click ._thumb-link":"handleFileClick","mouseup ._thumb-link":"handleFileMouseup"}),initialize:function e(){this.vanillaLazyload=h.initLazyLoad();if(!f.includes(this.layout)){throw new Error("Layout: "+this.layout+" is not supported!")}for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}d.prototype.initialize.apply(this,i);this.applyPropsAutoCorrection();this.setFileEventsListeners();this.listenTo(this.collection,"update reset",this.render)},applyPropsAutoCorrection:function e(){this.isTitleInside=this.layout!=="normalSquare";this.maxRows=Math.max(Math.min(this.maxRows,b),m)},serialize:function e(){this.serialized=this.serializeItems();var t=this.getSettingsData()||{};return{layout:this.layout,items:this.serialized,itemsData:this.makeLikeGrid?this.makeLikeGridDataSheet():this.makeRenderDataSheet(),classes:{list:o({"flex-files_wide":this.layout==="wide","flex-files_square":this.layout==="normalSquare","flex-files_xwide":this.layout==="xwide","flex-files_small-wide":this.layout==="wideSmall","flex-files_like-grid":this.makeLikeGrid,"flex-files_mobile":this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")}),slider:o({"files-slider":true,"files-slider_enabled":this.shouldEnableSlider()})},styles:{list:this.makeListStyles()},shouldShowFreeLabel:this.shouldShowFreeLabel(),shouldShowVideoLength:this.shouldShowVideoLength&&t.videoLength,isTitleInside:this.isTitleInside,isCartBtnEnabled:this.checkCartBtnEnabled(),isFavoriteBtnEnabled:this.isFavoriteBtnEnabled,isSimilarBtnEnabled:this.isSimilarBtnEnabled,isZoomBtnEnabled:this.isZoomBtnEnabled&&!t.linkTarget,isEditableFolder:this.isEditableFolder,settings:t}},shouldShowFreeLabel:function e(){return false},clientAfterRender:function e(){this.vanillaLazyload.update();if(this.shouldEnableSlider()){this.experimentalSliderPlug()}this.clientAfterRenderCallback()},checkCartBtnEnabled:function e(){return!this.app.user.isEnterprise()&&this.isCartBtnEnabled&&!this.app.features.isFeatureOnValue("Is cart hidden")},getThumbGutter:function e(){return this.layout==="wide"?12:17},makeListStyles:function e(){if(this.shouldEnableSlider()){return"width: "+this.getItemsFullWidth()+"px;"}if(this.maxRows===1){return""}var t=(this.renderStats.averageThumbHeight+this.renderStats.averageCroppedThumbHeight)/2;var i=this.getThumbGutter();var a=(t+i)*this.maxRows;return"max-height: "+a+"px;"},serializeItems:function e(){var t=this;var i=this.shouldEnableLazyLoad();var a=this.shouldDisplaySeeMore();var r=a?this.collection.first(v):this.collection.models;var s=true;var n="";var o=r.map((function(e,a){var r=e.get("type");if(!n){n=r}if(n!==r){s=false}var o=e.toSearchResult();o.lazyload={enabled:i&&a>=t.lazyLoadOptions.offset,dataSrc:o.thumbs[t.layout]};o.types={photo:r==="image",vector:r==="vector",video:r==="video"};o.shouldShowActions=!e.isBannedForCountry();return o}));if(a){var l=this.makeSeeMoreData()||{};Object.assign(o[o.length-1],{seeMoreData:l,url:l.url})}return p.injectFilesSEOMeta(this.app,o,s)},calculatedDimensions:function e(){var t=this;if(!this.serialized.length){return[]}return this.serialized.map((function(e){var i=c.config[e.type]||c.config.image;var a=i[t.layout];var r=c.getThumbSizes(e,t.layout);return{id:e.id,thumb:c.calculateSize(e,a),w:r.w,h:r.h}}))},makeRenderStats:function e(){this.dimensions=this.calculatedDimensions();var t={totalThumbWidth:0,totalThumbHeight:0,totalCroppedThumbWidth:0,totalCroppedThumbHeight:0,averageThumbWidth:0,averageThumbHeight:0,averageCroppedThumbWidth:0,averageCroppedThumbHeight:0};if(!this.dimensions.length){return t}for(var i=0;i<this.dimensions.length;i+=1){t.totalThumbWidth+=this.dimensions[i].thumb.w;t.totalThumbHeight+=this.dimensions[i].thumb.h;t.totalCroppedThumbWidth+=this.dimensions[i].w;t.totalCroppedThumbHeight+=this.dimensions[i].h}t.averageThumbWidth=t.totalThumbWidth/this.dimensions.length*this.scale;t.averageThumbHeight=t.totalThumbHeight/this.dimensions.length*this.scale;t.averageCroppedThumbWidth=t.totalCroppedThumbWidth/this.dimensions.length;t.averageCroppedThumbHeight=t.totalCroppedThumbHeight/this.dimensions.length;return t},makeLikeGridDataSheet:function e(){var t=this.calculatePanoramasRatio();var i=_*t;return this.serialized.reduce((function(e,a){var r=a.width/a.height;var s=Math.round(r*i);e[a.id]={width:s,height:i,styles:"width:"+s+"px; width:calc("+(r*t).toFixed(3)+" * var(--grid-row-height)); flex-grow:"+(r*10).toFixed(2),linkStyles:"padding-bottom:"+a.height/a.width*100+"%;",classes:{box:s<g?"file-container_small":"",link:"file-container__link"}};return e}),{})},calculatePanoramasRatio:function e(){var t=this;var i=0;this.serialized.forEach((function(e){var a=e.width/e.height;if(a>w){i+=1;if(a>t.panoramasWidthToHeightMax){e.width=e.height*t.panoramasWidthToHeightMax}if(!t.isPanoramasImproveEnabled){return}if(e.lazyload.enabled){e.lazyload.dataSrc=e.thumbs.large}else{e.lazyload={enabled:true,src:e.thumbs[t.layout],dataSrc:e.thumbs.large}}}}));return 1-i/this.serialized.length/y},makeRenderDataSheet:function e(){var t=this;this.renderStats=this.makeRenderStats();return this.dimensions.reduce((function(e,i){var a={width:110,height:110,styles:"",classes:{box:"_slider-item",link:"file-container__link"}};if(t.layout!=="normalSquare"){a.classes.box="file-container_grow _slider-item";a.classes.link="file-container__link";a.styles="min-width: 160px;";a.width=i.w;var r=(t.renderStats.averageThumbHeight+t.renderStats.averageCroppedThumbHeight)/2;a.height=parseInt(r,10)}e[i.id]=a;return e}),{})},experimentalSliderPlug:function e(){var t=this.insertView("slider",new n(r({app:this.app},this.sliderParams)));t.el=this.el;t.$el=this.$el;t.delegateEvents();t.clientAfterRender()},getItemsFullWidth:function e(){return(this.renderStats.totalThumbWidth+this.renderStats.totalCroppedThumbWidth)/2},shouldDisplaySeeMore:function e(){if(this.collection.length<v){return false}return this.displaySeeMoreAsThumb},shouldEnableSlider:function e(){if(!this.isSlidable||this.app.ampEnabled||!this.collection.length){return false}var t=this.getItemsFullWidth();return this.maxRows!==b&&t>this.thumbListHolderWidth&&t<this.thumbListHolderWidth*this.maxRows},shouldEnableLazyLoad:function e(){return this.lazyLoadOptions.enabled&&!this.app.ampEnabled},onFileMouseEnter:function e(t){var i=this;this.showFilePreview(t);if(!this.draggableOptions.enabled){return}var a=this.$(t.currentTarget);if(!a.data("ui-draggable")){u(a,this,{helperOptions:{app:this.app,mode:this.draggableOptions.mode,defaults:this.getDraggableData.bind(this),getModel:function e(){return i.collection.get(parseInt(a.data("id"),10)).toSearchResult()}}})}},getDraggableData:function e(){return{layout:this.layout,itemsData:this.makeLikeGrid?this.makeLikeGridDataSheet():this.makeRenderDataSheet(),settings:{},layoutClasses:o({"flex-files_like-grid":this.makeLikeGrid})}},onFileMouseLeave:function e(){this.hideVideoPreview()},showFilePreview:function e(t){var i=this.collection.get(t.currentTarget.getAttribute("data-id"));if(!i||!this.isVideoFile(i)){return}this.showVideoPreview({anchor:t.currentTarget,contentData:{file:i}})},handleFileMouseup:function e(){},handleFileClick:function e(){},handleSeeMoreClick:function e(){},handleContextMenu:function e(){},makeSeeMoreData:function e(){},getSettingsData:function e(){},showVideoPreview:function e(){},hideVideoPreview:function e(){},isVideoFile:function e(){},clientAfterRenderCallback:function e(){}});e.exports=k},1332:function(e,t,i){},1333:function(e,t,i){},1334:function(e,t,i){},1335:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="'+i(t.classes.slider)+'"><div class="files-slider__nav files-slider__nav_left _prev"><i class="icon icon-nav-arrow-left-white-big"></i></div><div class="flex-files '+t.classes.list+' _slider" ';if(t.styles.list){a+=' style="'+t.styles.list+'"'}a+=">";var s=t.items;if(s){var n,o=-1,l=s.length-1;while(o<l){n=s[o+=1];a+='<div data-id="'+i(n.id)+'" class="file-container _file-container '+t.itemsData[n.id].classes.box+'" ';if(t.itemsData[n.id].styles){a+=' style="'+t.itemsData[n.id].styles+'"'}a+='><a href="'+n.url+'"';if(t.settings.linkTarget){a+=' target="_blank"'}a+='class="'+t.itemsData[n.id].classes.link+" ";if(n.seeMoreData){a+=" _see-more"}else{a+=" _thumb-link _file-box-holder _file-box-image"}a+='"';if(t.itemsData[n.id].linkStyles){a+=' style="'+t.itemsData[n.id].linkStyles+'"'}a+="><img ";if(n.lazyload&&n.lazyload.enabled){if(n.lazyload.src){a+=' src="'+i(n.lazyload.src)+'"'}a+='data-src="'+i(n.lazyload.dataSrc)+'"'}else{a+='src="'+i(n.thumbs[t.layout])+'"'}a+='class="file-container__image _file-image';if(n.lazyload&&n.lazyload.enabled){a+=" lazyload"}a+='"alt="'+i(n.seoAlt)+'"title="'+i(n.seoTitle)+'"width="'+t.itemsData[n.id].width+'"height="'+t.itemsData[n.id].height+'"/>';if(!n.seeMoreData){if(n.shortTags.length===0){if(t.isTitleInside){a+='<span class="file-container__title">'+i(n.title)+"</span>"}else{a+='<span class="file-container__title hidden">'+i(n.title)+" #"+i(n.id)+"</span>"}}if(t.shouldShowFreeLabel&&n.freeLabel){a+='<div class="file-container__sale-free';if(n.isFreeCurated){a+=" file-container__sale-free_simple"}a+='"><div class="label label-sale';if(n.isFreeCurated){a+=" label-sale_curated"}a+='">'+i(n.freeLabel)+"</div></div>"}a+='<span class="file-container__indicators">';if(t.isCartBtnEnabled){a+='<span class="file-container__indicators-item label label-in-cart _label-in-cart';if(!n.inCart){a+=" hidden"}a+='"title="'+this.tr("In Shopping Cart")+'"></span>'}if(t.isFavoriteBtnEnabled){a+='<span class="file-container__indicators-item label label-in-favorites _label-in-favorites';if(!n.inFavorites){a+=" hidden"}a+='"title="'+this.tr("Added to Favorites")+'"></span>'}a+='</span><div class="file-container__details">';if(t.settings.author){a+='<img class="file-container__contributor-avatar avatar avatar-s" src="'+i(n.avatar)+'" />'}a+='<div class="file-container__name-details">';if(t.settings.author){a+='<div class="file-container__contributor label label-contributor">'+i(n.sellerName)+"</div>"}if(t.settings.maxsize){a+='<div class="file-container__maxsize label label-maxsize">'+i(n.width)+" x "+i(n.height)+"</div>"}a+="</div><div ";if(n.type==="video"){a+=' class="file-container__video-details"'}a+=">";if(t.shouldShowVideoLength&&n.type==="video"){a+='<div class="file-container__video-length label label-video-length">'+i(n.formattedLength)+"</div>"}if(t.settings.type){a+='<div class="file-container__type label label-type label-type-'+i(n.type)+'"></div>'}a+="</div></div>";if(t.settings.author||t.settings.maxsize||t.settings.type||t.shouldShowVideoLength&&n.type==="video"){a+='<span class="file-container__details-shadow"></span>'}if(n.shouldShowActions){a+='<span class="file-container__actions">';if(t.isCartBtnEnabled){a+='<button class="file-container__actions-item button button-circle button-add-to-cart';if(n.inCart){a+=" active"}a+=' _to-cart"title="';if(n.inCart){a+=""+this.tr("Remove from Shopping Cart")}else{a+=""+this.tr("Add to Shopping Cart")}a+='"></button>'}if(t.isFavoriteBtnEnabled){a+='<button class="file-container__actions-item button button-circle button-add-to-favorites';if(n.inFavorites){a+=" active"}a+=' _to-favorites"title="';if(n.inCart){a+=""+this.tr("Remove from Favorites")}else{a+=""+this.tr("Add to Favorites")}a+='"></button>'}if(t.isSimilarBtnEnabled){a+='<button class="file-container__actions-item button button-circle button-see-more-similars _to-similar"title="';if(n.type==="video"){a+=""+this.tr("Find Similar Videos")}else{a+=""+this.tr("Find Similar Images")}a+='"></button>'}a+="</span>"}if(n.type!=="video"){a+='<div class="file-container__btns">';if(t.isZoomBtnEnabled){a+='<button class="file-container__zoom file-action-btn file-action-btn_full-screen _zoom" title="'+this.tr("Quick Preview")+'"></button>'}if(t.isEditableFolder){a+='<button class="file-container__cover file-action-btn file-action-btn_cover _cover" title="'+this.tr("Set as Folder Cover")+'"></button>'}a+="</div>"}}if(n.seeMoreData){a+='<span class="file-container__see-more">'+n.seeMoreData.text+"</span>"}a+="</a>";if(n.shortTags.length>0){a+='<div class="file-container__tags">';var c=n.shortTags;if(c){var u,d=-1,h=c.length-1;while(d<h){u=c[d+=1];a+='<a class="file-container__tag _short-tag" data-index="'+i(d)+'" href="'+i(this.app.makeUrl(r({route:"Search",query:u},n.types)))+'">'+i(u)+"</a>"}}a+="</div>"}a+="</div>"}}a+='</div><div class="files-slider__nav files-slider__nav_right _next"><i class="icon icon-nav-arrow-right-white-big"></i></div></div>';return a}},1336:function(e,t,i){"use strict";e.exports.base={connectToSortable:"._sortable-files",cancel:".vjs-control-bar",addClasses:false,appendTo:"body",cursor:"move",cursorAt:{top:15,left:0},scroll:false,opacity:.5,zIndex:4001,distance:5,delay:150}},1337:function(e,t,i){"use strict";var a=i(0);var r=i(1338);var s=i(546);e.exports=s.extend({el:false,defaultMode:"search",active:false,template:r,initialize:function e(t){if(t.mode){this.defaultMode=t.mode}if(t.app){this.listenTo(t.app.observer,"Draggable:switchHelper",this.switchMode.bind(this))}},serialize:function e(){return this.data},clientAfterRender:function e(){if(this.data.mode==="search"&&this.data.thumbSize==="wide"){this.$("img").attr({style:this.data.itemsData[this.data.model.id].holderStyle})}},setData:function e(t){if(!t.mode){t.mode=this.defaultMode}this.data=t;return this.render().promise()},switchMode:function e(t){if(!this.active){return}var i=t;var r=a.clone(this.data.model);if(a.size(a.omit(i,"mode"))<1){i=a.extend({},t,this.getDefaults())}this.setData(a.extend({},{model:r},i))},getDefaults:function e(){return a.result(this,"defaults")},defaults:function e(){}})},1338:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a="";if(t.mode==="search"){a+='<div class="'+i(t.layoutClasses)+'"><div data-id="'+i(t.model.id)+'" class="file-container _file-container '+t.itemsData[t.model.id].classes.box+'" ';if(t.itemsData[t.model.id].styles){a+=' style="'+t.itemsData[t.model.id].styles+'"'}a+='><a href="'+t.model.url+'"';if(t.settings.linkTarget){a+=' target="_blank"'}a+='class="'+t.itemsData[t.model.id].classes.link+" ";if(t.model.seeMoreData){a+=" _see-more"}else{a+=" _thumb-link _file-box-holder _file-box-image"}a+='"';if(t.itemsData[t.model.id].linkStyles){a+=' style="'+t.itemsData[t.model.id].linkStyles+'"'}a+="><img ";if(t.model.lazyload&&t.model.lazyload.enabled){if(t.model.lazyload.src){a+=' src="'+i(t.model.lazyload.src)+'"'}a+='data-src="'+i(t.model.lazyload.dataSrc)+'"'}else{a+='src="'+i(t.model.thumbs[t.layout])+'"'}a+='class="file-container__image _file-image';if(t.model.lazyload&&t.model.lazyload.enabled){a+=" lazyload"}a+='"alt="'+i(t.model.seoAlt)+'"title="'+i(t.model.seoTitle)+'"width="'+t.itemsData[t.model.id].width+'"height="'+t.itemsData[t.model.id].height+'"/>';if(!t.model.seeMoreData){if(t.model.shortTags.length===0){if(t.isTitleInside){a+='<span class="file-container__title">'+i(t.model.title)+"</span>"}else{a+='<span class="file-container__title hidden">'+i(t.model.title)+" #"+i(t.model.id)+"</span>"}}if(t.shouldShowFreeLabel&&t.model.freeLabel){a+='<div class="file-container__sale-free';if(t.model.isFreeCurated){a+=" file-container__sale-free_simple"}a+='"><div class="label label-sale';if(t.model.isFreeCurated){a+=" label-sale_curated"}a+='">'+i(t.model.freeLabel)+"</div></div>"}a+='<span class="file-container__indicators">';if(t.isCartBtnEnabled){a+='<span class="file-container__indicators-item label label-in-cart _label-in-cart';if(!t.model.inCart){a+=" hidden"}a+='"title="'+this.tr("In Shopping Cart")+'"></span>'}if(t.isFavoriteBtnEnabled){a+='<span class="file-container__indicators-item label label-in-favorites _label-in-favorites';if(!t.model.inFavorites){a+=" hidden"}a+='"title="'+this.tr("Added to Favorites")+'"></span>'}a+='</span><div class="file-container__details">';if(t.settings.author){a+='<img class="file-container__contributor-avatar avatar avatar-s" src="'+i(t.model.avatar)+'" />'}a+='<div class="file-container__name-details">';if(t.settings.author){a+='<div class="file-container__contributor label label-contributor">'+i(t.model.sellerName)+"</div>"}if(t.settings.maxsize){a+='<div class="file-container__maxsize label label-maxsize">'+i(t.model.width)+" x "+i(t.model.height)+"</div>"}a+="</div><div ";if(t.model.type==="video"){a+=' class="file-container__video-details"'}a+=">";if(t.shouldShowVideoLength&&t.model.type==="video"){a+='<div class="file-container__video-length label label-video-length">'+i(t.model.formattedLength)+"</div>"}if(t.settings.type){a+='<div class="file-container__type label label-type label-type-'+i(t.model.type)+'"></div>'}a+="</div></div>";if(t.settings.author||t.settings.maxsize||t.settings.type||t.shouldShowVideoLength&&t.model.type==="video"){a+='<span class="file-container__details-shadow"></span>'}if(t.model.shouldShowActions){a+='<span class="file-container__actions">';if(t.isCartBtnEnabled){a+='<button class="file-container__actions-item button button-circle button-add-to-cart';if(t.model.inCart){a+=" active"}a+=' _to-cart"title="';if(t.model.inCart){a+=""+this.tr("Remove from Shopping Cart")}else{a+=""+this.tr("Add to Shopping Cart")}a+='"></button>'}if(t.isFavoriteBtnEnabled){a+='<button class="file-container__actions-item button button-circle button-add-to-favorites';if(t.model.inFavorites){a+=" active"}a+=' _to-favorites"title="';if(t.model.inCart){a+=""+this.tr("Remove from Favorites")}else{a+=""+this.tr("Add to Favorites")}a+='"></button>'}if(t.isSimilarBtnEnabled){a+='<button class="file-container__actions-item button button-circle button-see-more-similars _to-similar"title="';if(t.model.type==="video"){a+=""+this.tr("Find Similar Videos")}else{a+=""+this.tr("Find Similar Images")}a+='"></button>'}a+="</span>"}if(t.model.type!=="video"){a+='<div class="file-container__btns">';if(t.isZoomBtnEnabled){a+='<button class="file-container__zoom file-action-btn file-action-btn_full-screen _zoom" title="'+this.tr("Quick Preview")+'"></button>'}if(t.isEditableFolder){a+='<button class="file-container__cover file-action-btn file-action-btn_cover _cover" title="'+this.tr("Set as Folder Cover")+'"></button>'}a+="</div>"}}if(t.model.seeMoreData){a+='<span class="file-container__see-more">'+t.model.seeMoreData.text+"</span>"}a+="</a>";if(t.model.shortTags.length>0){a+='<div class="file-container__tags">';var s=t.model.shortTags;if(s){var n,o=-1,l=s.length-1;while(o<l){n=s[o+=1];a+='<a class="file-container__tag _short-tag" data-index="'+i(o)+'" href="'+i(this.app.makeUrl(r({route:"Search",query:n},t.model.types)))+'">'+i(n)+"</a>"}}a+="</div>"}a+="</div></div>"}if(t.mode==="favorite"){a+='<div class="files-list_layout-'+i(t.panel.thumbs)+'"><div data-id="'+i(t.model.id)+'" class="file-box folder-file-box _favorite-file';if(t.listOfSelected.indexOf(t.model.id)!==-1){a+=" file-box_selected"}a+='"><a class="file-box__link" href="'+t.model.url+'"><span class="file-box__holder"><span class="file-box-image file-box__image-holder';if(t.model.width>t.model.height&&t.model.height/t.model.width<1/2){a+=" file-box__image-holder_limit"}a+='"style="background-image: url('+i(t.model.thumbs[t.thumbSizes[t.panel.thumbs]])+')"></span><span class="file-box-video"></span></span>';if(t.isCartBtnEnabled){a+='<span class="file-box__indicator"><span class="file-box__indicator-item label label-in-cart _label-in-cart ';if(!t.model.inCart){a+=" hidden"}a+='" title="'+this.tr("In Shopping Cart")+'"></span></span>'}a+='<span class="file-box__control _prevent"><i class="file-box__control-item';if(!t.canChangeFiles){a+=" file-box__control-item_disabled "}else{a+=" _delete"}a+=' icon icon-item-remove"></i><i class="file-box__control-item';if(t.viewOnly){a+=" file-box__control-item_disabled"}a+=' icon icon-item-move"></i><i class="file-box__control-item icon icon-checkbox icon-checkbox-l _select';if(t.listOfSelected.indexOf(t.model.id)!==-1){a+=" checked"}a+='"></i><span class="file-box__blur"><img class="file-box__blur-image" src="'+t.model.thumbs[t.panel.thumbs]+'" style="filter: url(#blur'+i(t.model.id)+')" /></span></span></a></div></div>'}if(t.mode==="filePage"){a+='<div class="file-box view-file-box _file-box '+i(t.fileViewBoxClassNames)+'"><div class="view-file-box__holder ';if(t.shouldShowTextInside){a+="view-file-box__holder_text-inside"}a+=' _file-box-holder"><div class="view-file-box__box _draggable-box">';if(t.file.type==="video"){a+='<div class="view-file-box__video _video-placeholder"><div class="view-file-box__video-placeholder" style="'+t.videoPlaceholderStyles+'"></div><img class="view-file-box__video-poster view-file-box__video-poster_absolute _video-poster" src="'+t.thumb.src+'"width="'+t.dimensions.w+'" height="'+t.dimensions.h+'"';if(t.thumb.preload){a+=' data-preload="'+t.thumb.preload+'"'}a+='alt="'+t.file.seoAlt+'" title="'+t.file.seoTitle+'" /><i class="view-file-box__play-video icon-play-video"></i></div>'}else{a+='<a class="view-file-box__image-box view-file-box__image-box_label view-file-box__image-clear _image-box" href="'+t.thumb.download+'"><img class="view-file-box__image';if(t.dimensions.w>=t.dimensions.h){a+=" view-file-box__image_h"}else{a+=" view-file-box__image_v"}a+=" ";if(!t.thumb.hasLabel){a+=" view-file-box__image-clear"}a+=' _image _zoom-image" src="'+t.thumb.src+'" ';if(t.thumb.preload){a+=' data-preload="'+t.thumb.preload+'"'}else{a+=' data-src="'+t.thumb.seo+'"'}a+=" ";if(t.thumb.preloadMax){a+=' data-preload-max="'+t.thumb.preloadMax+'"'}a+=' width="'+t.dimensions.w+'" height="'+t.dimensions.h+'" alt="'+t.file.seoAlt+'" title="'+this.tr("Download")+" - "+t.file.seoTitle+'" itemprop="image"/></a>'}if(t.shouldShowActions){a+='<div class="view-file-box__action';if(t.actionsSmallMode){a+=" view-file-box__action_small"}if(t.file.type==="video"){a+=" _view-file-box-video"}a+=' _action-box"><span class="view-file-box__action-holder';if(t.viewMode==="modal"&&t.file.editorial){a+=" view-file-box__action-holder_tall"}a+='">';if(t.isCartBtnEnabled){a+='<button class="view-file-box__action-item button-circle button-circle-xl button-add-to-cart';if(t.file.inCart){a+=" active"}a+=' _to-cart"title="';if(t.file.inCart){a+=""+this.tr("Remove from Shopping Cart")}else{a+=""+this.tr("Add to Shopping Cart")}a+='"></button>'}if(t.isFavoriteBtnEnabled){a+='<button class="view-file-box__action-item button-circle button-circle-xl button-add-to-favorites _to-favorites';if(t.file.inFavorites){a+=" active"}a+='"title="';if(t.file.inFavorites){a+=""+this.tr("Remove from Favorites")}else{a+=""+this.tr("Add to Favorites")}a+='"></button>'}if(t.isSharingEnabled){a+='<button class="view-file-box__action-item button-circle button-circle-xl button-share _share" title="'+this.tr("Share")+'"></button>'}if(!t.isEnterpriseUser){a+='<a class="view-file-box__action-item button-circle button-circle-xl button-download _download_comp" ';if(t.canDownloadComp){a+='href="'+t.thumb.download+'?download=true" '}a+='title="'+this.tr("Download Comp")+'"></a>'}a+="</span></div>"}if(t.isSharingEnabled){a+='<div class="view-file-box__share _share-box"><div class="view-file-box__share-container"><div class="view-file-box__share-box"><div class="view-file-box__share-holder"><i class="view-file-box__close icon icon-close-cross icon-close-cross-white _share-close"></i><ul class="view-file-box__list"><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="730" data-height="420" data-title="Tweet" data-social="twitter"><span class="button-circle button-circle-xl button-social-twitter"></span></a></li><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="650" data-height="370" data-title="Facebook" data-social="facebook"><span class="button-circle button-circle-xl button-social-facebook"></span></a></li><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="700" data-height="370" data-title="Pinterest" data-social="pinterest"><span class="button-circle button-circle-xl button-social-pinterest"></span></a></li>';if(t.showVKSocial){a+='<li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="700" data-height="370" data-title="VK" data-social="vk"><span class="button-circle button-circle-xl button-social-vk"></span></a></li>'}a+="</ul></div></div></div></div>"}a+='<div class="view-file-box__indicator-wrapper">';if(t.infoIndicators.length){a+="<div class='view-file-box__indicator-info'>";var c=t.infoIndicators;if(c){var u,d=-1,h=c.length-1;while(d<h){u=c[d+=1];a+="<div class='view-file-box__info'><i class=\"icon "+i(u.iconClass)+'"></i>'+i(u.value)+"</div>"}}a+="</div>"}a+='<div class="view-file-box__to-page _to-page"></div><div class="view-file-box__similar-btn _thumb-find-similar"></div><div class="view-file-box__indicator">';if(t.isCartBtnEnabled){a+='<i class="view-file-box__indicator-item label-in-cart _label-in-cart';if(!t.file.inCart){a+=" hidden"}a+='" title="'+this.tr("In Shopping Cart")+'"></i>'}if(t.isFavoriteBtnEnabled){a+='<i class="view-file-box__indicator-item label-in-favorites _label-in-favorites';if(!t.file.inFavorites){a+=" hidden"}a+='" title="'+this.tr("Added to Favorites")+'"></i>'}a+="</div></div>";if(t.file.type!=="video"){a+='<button class="view-file-box__lens file-action-btn file-action-btn_full-screen _zoom-btn"></button>'}if(t.viewMode==="modal"&&t.file.editorial){a+='<div class="view-file-box__editorial-box';if(t.file.type==="video"){a+=" view-file-box__editorial-box-video"}a+='"><span class="view-file-box__editorial"><span class="view-file-box__editorial-text">'+this.tr("Editorial Use Only")+'</span><i class="view-file-box__editorial-icon icon icon-help icon-help-light-active _editorial-tooltip"></i></span></div>'}a+="</div>";if(t.viewMode==="page"&&!t.hideDescription){a+='<p class="view-file-box__description view-file-box__description_short _file-box-description ';if(t.isModifyDescriptionWidth){a+="view-file-box__description_squeezed"}a+='">';if(t.file.type==="video"){a+=""+i(t.file.visibleDescription)+" &mdash; "+this.tr("Video by %s",t.file.sellerName)}else{a+='<a class="view-file-box__description-link _zoom-image" href="'+t.thumb.download+'"><span class="view-file-box__description-text" itemprop="description">'+i(t.file.visibleDescription)+"</span>";if(t.file.type==="vector"){a+=" &mdash; "+this.tr("Vector by %s",t.file.sellerName)}else if(t.file.id!==328593200||this.app.lang!=="ru"){a+=" &mdash; "+this.tr("Photo by %s",t.file.sellerName)}a+="</a>"}if(t.shouldShowFileId){a+='<span class="view-file-box__description-id">| '+this.tr("ID")+": "+i(t.file.id)+"</span>"}a+="</p>"}a+="</div></div>"}if(t.mode==="related"){a+='<div data-id="'+i(t.model.id)+'" class="file-container _file-container '+t.itemsData[t.model.id].classes.box+'" ';if(t.itemsData[t.model.id].styles){a+=' style="'+t.itemsData[t.model.id].styles+'"'}a+='><a href="'+t.model.url+'"';if(t.settings.linkTarget){a+=' target="_blank"'}a+='class="'+t.itemsData[t.model.id].classes.link+" ";if(t.model.seeMoreData){a+=" _see-more"}else{a+=" _thumb-link _file-box-holder _file-box-image"}a+='"';if(t.itemsData[t.model.id].linkStyles){a+=' style="'+t.itemsData[t.model.id].linkStyles+'"'}a+="><img ";if(t.model.lazyload&&t.model.lazyload.enabled){if(t.model.lazyload.src){a+=' src="'+i(t.model.lazyload.src)+'"'}a+='data-src="'+i(t.model.lazyload.dataSrc)+'"'}else{a+='src="'+i(t.model.thumbs[t.layout])+'"'}a+='class="file-container__image _file-image';if(t.model.lazyload&&t.model.lazyload.enabled){a+=" lazyload"}a+='"alt="'+i(t.model.seoAlt)+'"title="'+i(t.model.seoTitle)+'"width="'+t.itemsData[t.model.id].width+'"height="'+t.itemsData[t.model.id].height+'"/>';if(!t.model.seeMoreData){if(t.model.shortTags.length===0){if(t.isTitleInside){a+='<span class="file-container__title">'+i(t.model.title)+"</span>"}else{a+='<span class="file-container__title hidden">'+i(t.model.title)+" #"+i(t.model.id)+"</span>"}}if(t.shouldShowFreeLabel&&t.model.freeLabel){a+='<div class="file-container__sale-free';if(t.model.isFreeCurated){a+=" file-container__sale-free_simple"}a+='"><div class="label label-sale';if(t.model.isFreeCurated){a+=" label-sale_curated"}a+='">'+i(t.model.freeLabel)+"</div></div>"}a+='<span class="file-container__indicators">';if(t.isCartBtnEnabled){a+='<span class="file-container__indicators-item label label-in-cart _label-in-cart';if(!t.model.inCart){a+=" hidden"}a+='"title="'+this.tr("In Shopping Cart")+'"></span>'}if(t.isFavoriteBtnEnabled){a+='<span class="file-container__indicators-item label label-in-favorites _label-in-favorites';if(!t.model.inFavorites){a+=" hidden"}a+='"title="'+this.tr("Added to Favorites")+'"></span>'}a+='</span><div class="file-container__details">';if(t.settings.author){a+='<img class="file-container__contributor-avatar avatar avatar-s" src="'+i(t.model.avatar)+'" />'}a+='<div class="file-container__name-details">';if(t.settings.author){a+='<div class="file-container__contributor label label-contributor">'+i(t.model.sellerName)+"</div>"}if(t.settings.maxsize){a+='<div class="file-container__maxsize label label-maxsize">'+i(t.model.width)+" x "+i(t.model.height)+"</div>"}a+="</div><div ";if(t.model.type==="video"){a+=' class="file-container__video-details"'}a+=">";if(t.shouldShowVideoLength&&t.model.type==="video"){a+='<div class="file-container__video-length label label-video-length">'+i(t.model.formattedLength)+"</div>"}if(t.settings.type){a+='<div class="file-container__type label label-type label-type-'+i(t.model.type)+'"></div>'}a+="</div></div>";if(t.settings.author||t.settings.maxsize||t.settings.type||t.shouldShowVideoLength&&t.model.type==="video"){a+='<span class="file-container__details-shadow"></span>'}if(t.model.shouldShowActions){a+='<span class="file-container__actions">';if(t.isCartBtnEnabled){a+='<button class="file-container__actions-item button button-circle button-add-to-cart';if(t.model.inCart){a+=" active"}a+=' _to-cart"title="';if(t.model.inCart){a+=""+this.tr("Remove from Shopping Cart")}else{a+=""+this.tr("Add to Shopping Cart")}a+='"></button>'}if(t.isFavoriteBtnEnabled){a+='<button class="file-container__actions-item button button-circle button-add-to-favorites';if(t.model.inFavorites){a+=" active"}a+=' _to-favorites"title="';if(t.model.inCart){a+=""+this.tr("Remove from Favorites")}else{a+=""+this.tr("Add to Favorites")}a+='"></button>'}if(t.isSimilarBtnEnabled){a+='<button class="file-container__actions-item button button-circle button-see-more-similars _to-similar"title="';if(t.model.type==="video"){a+=""+this.tr("Find Similar Videos")}else{a+=""+this.tr("Find Similar Images")}a+='"></button>'}a+="</span>"}if(t.model.type!=="video"){a+='<div class="file-container__btns">';if(t.isZoomBtnEnabled){a+='<button class="file-container__zoom file-action-btn file-action-btn_full-screen _zoom" title="'+this.tr("Quick Preview")+'"></button>'}if(t.isEditableFolder){a+='<button class="file-container__cover file-action-btn file-action-btn_cover _cover" title="'+this.tr("Set as Folder Cover")+'"></button>'}a+="</div>"}}if(t.model.seeMoreData){a+='<span class="file-container__see-more">'+t.model.seeMoreData.text+"</span>"}a+="</a>";if(t.model.shortTags.length>0){a+='<div class="file-container__tags">';var p=t.model.shortTags;if(p){var n,o=-1,f=p.length-1;while(o<f){n=p[o+=1];a+='<a class="file-container__tag _short-tag" data-index="'+i(o)+'" href="'+i(this.app.makeUrl(r({route:"Search",query:n},t.model.types)))+'">'+i(n)+"</a>"}}a+="</div>"}a+="</div>"}return a}},1339:function(e,t,i){"use strict";var a=i(1340);e.exports={showVideoPreview:function e(t){if(t===void 0){t={}}var i=this.$(t.anchor).find("._file-box-image");this.setView("videoPreview",new a({$mount:this.$(t.anchor).find("._file-box-holder"),$poster:i,width:i.outerWidth(),height:i.outerHeight(),file:t.contentData.file,app:this.app})).render()},hideVideoPreview:function e(){if(this.getView("videoPreview")){this.getView("videoPreview").remove()}},isVideoFile:function e(t){return t.get("type")==="video"}}},1340:function(e,t,i){"use strict";var a=i(774);e.exports=a.extend({name:"VideoPreview",el:undefined,tagName:"span",className:"file-box-video",muted:true,controls:false,viewMode:"wide"})},1515:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="price-table';if(t.availableMethods){a+=" price-table_has-methods"}a+=" "+i(t.classNames)+'"><form autocomplete="off" method="GET" class="price-table__form" action="'+t.formActionUrl+'"><input type="hidden" name="id" value="'+i(t.download.itemId)+'" /><input type="hidden" name="source" value="'+i("view_item"||false)+'" /><input type="hidden" name="license" value="'+i(t.download.license)+'" /><input type="hidden" name="size" value="'+i(t.download.size)+'" /><input type="hidden" name="method" value="'+i(t.download.method)+'" /><input type="hidden" name="purchased" value="'+i(t.download.purchased)+'" /><input type="hidden" name="product" value="'+i(t.download.fileType)+'" /><input type="hidden" name="subproduct" value="'+i(t.download.resolution)+'" /><input type="hidden" name="split_count" value="'+i(t.download.splitCount)+'" /><input type="hidden" name="subscription" value="'+i(t.download.subscription)+'" />';if(t.searchQuery){a+='<input type="hidden" name="sq" value="'+i(t.searchQuery.hash)+'" /><input type="hidden" name="sst" value="'+i(t.searchQuery.offset)+'" />'}a+='<div class="price-table__content"><div class="price-table__sizes';if(t.isExtendedChosen){a+=" price-table__sizes_locked"}a+='">';var r=t.table.body;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<div class="price-table__size-box _size-box';if(s.active){a+=" price-table__size-box_active"}if(s.isDisabled){a+=" price-table__size-box_disabled"}a+='">';if(s.purchase.size||s.price.isLicensed){a+='<div class="price-table__redownload"><i class="price-table__redownload-cover"></i>';if(s.purchase.size){a+='<a class="price-table__redownload-item price-table__redownload-item_ok icon icon-round-ok-large';if(!s.purchase.size||s.purchase.data.error){a+=" hidden"}a+='"href="'+this.app.makeUrl("purchased",{query:{"filter[query]":s.fileID}})+'" target="_blank" title="'+this.tr("Already Downloaded")+'"></a><i class="price-table__redownload-item icon icon-round-fail-large ';if(!s.purchase.data.error){a+=" hidden"}a+='"';if(s.purchase.data.error){a+=' title="'+i(s.purchase.data.error)+'"'}a+="></i>"}else if(s.price.isLicensed){a+='<i class="price-table__redownload-item icon icon-round-ok-large"></i>'}a+="</div>"}a+='<label class="price-table__size-btn price-table__size-btn_'+i(s.key)+' _row"><input class="price-table__size-radio _file-size" type="radio" name="size" value="'+i(s.key)+'"';if(s.active){a+=' checked="checked"'}if(s.isDisabled){a+=" disabled"}a+=" />";if(s.key==="vect"){a+='<i class="price-table__size-vector"></i>'}else if(s.key==="ds"&&s.indicator==="ds"){a+='<span class="price-table__size-super">Super</span>'}else if(s.key==="el0"){a+="EL"}else if(t.file.type==="video"){a+='<span class="price-table__size-video price-table__size-video_'+i(s.key)+'">'+i(s.indicator);if(s.key!=="4k"){a+="p"}a+="</span>"}else{a+=""+i(s.indicator)}if(s.licenseTitle){a+='<span class="price-table__license-title">'+s.licenseTitle+"</span>"}a+='</label><div class="price-table__info-box';if(t.isEnterpriseUser){a+=" price-table__info-box_es"}a+='">';if(t.isEnterpriseUser){if(s.price.labeled){a+='<span class="price-table__info-text">'+s.price.labeled+'</span><span class="price-table__info-sep price-table__info-sep_first"> | </span>'}}else if(s.license.name==="attributed_free"){a+='<span class="price-table__info-text"><a class="price-table__info-link" href="'+this.app.makeUrl("free-license-with-attribution")+'" target="_blank">'+this.tr(s.license.labels.short)+'</a></span><span class="price-table__info-sep price-table__info-sep_first"> | </span>'}a+='<span class="price-table__info-text">'+this.tr(s.label)+", "+this.tr(s.extension.label)+'</span><span class="price-table__info-sep"> | </span>';if(t.file.type==="video"||t.file.type==="vector"&&(s.key==="vect"||s.key==="el0")){a+='<span class="price-table__info-text">'+this.tr(s.size.value);if(t.file.type==="vector"&&(s.key==="vect"||s.key==="el0")){a+='<i class="price-table__info-help icon icon-help';if(t.viewMode==="modal"){a+=" icon-help-light"}else{a+=" icon-help-dark"}a+=' _tooltip-vector"></i>'}a+="</span>"}else{a+='<span class="price-table__info-text price-table__info-text_switch _tab" data-key="'+i(s.nextUnit)+'">'+i(s.size.value)+"</span>"}a+="</div></div>"}}a+='</div></div><div class="price-table__footer _price-table-footer '+i(t.footerClassNames)+'">';if(t.isExtendedAvailable){a+='<div class="price-table__license"><';if(t.switcher.tag){a+=""+i(t.switcher.tag)}else{a+="label"}a+=' class="switch-wrapper '+i(t.switcher.className||"")+'"><input class="switch__input vissually-hidden '+i(t.switcher.inputClass||"")+'" type="checkbox" name="'+i(t.switcher.name)+'"';if(t.switcher.id){a+=' id="'+i(t.switcher.id)+'"'}if(t.switcher.value){a+=' value="'+i(t.switcher.value)+'"'}if(t.switcher.checked){a+=' checked="checked"'}if(t.switcher.disabled){a+=" disabled"}a+=' /><div class="switch"><span class="switch__box"><span class="switch__on"><span class="title">'+i(t.switcher.labelOn||this.tr("On"))+'</span></span><span class="circle"></span><span class="switch__off"><span class="title">'+i(t.switcher.labelOff||this.tr("Off"))+"</span></span></span></div></";if(t.switcher.tag){a+=""+i(t.switcher.tag)}else{a+="label"}a+='><label for="license" class="price-table__license-text">'+this.tr("Upgrade to <b>Extended License</b>")+'</label><i class="price-table__icon-help icon icon-help';if(t.viewMode==="modal"){a+=" icon-help-light"}else{a+=" icon-help-dark"}a+=' _tooltip-extended"></i></div>'}a+='<div class="price-table__captcha g-recaptcha" data-sitekey="'+i(t.captcha.siteKey)+'"></div><div class="price-table__download';if(t.isEnterpriseUser){a+=" price-table__download_es"}a+=" ";if(t.isTrialButtonEnabled){a+=" price-table__download_trial"}a+='">';if(t.userHasPermissionsToDownload){a+='<button class="price-table__download-btn button button-5xl button-red '+i(t.buttonClassNames)+' _download-button" type="submit"';var l=t.table.body;if(l){var s,c=-1,u=l.length-1;while(c<u){s=l[c+=1];if(s.active&&s.price.isCustom){a+=' data-label="'+this.tr("Price")+": "+s.price.labeled+'"'}}}a+=">"+t.downloadButtonText+"</button>"}if(t.isTrialButtonEnabled){a+='<span class="price-table-trial-button-container _trial-button"></span>'}if(t.isEnterpriseUser&&t.userHasPermissionsToLicense){a+='<button type="button" class="price-table__license-btn button button-5xl button-pill '+i(t.licenseButtonClassNames)+' _license">'+this.tr("License")+"</button>"}a+='</div><span class="price-table__download-error _download-error"></span>';if(t.isFreeLicenseAvailable){a+='<div class="price-table__free-license _free-license-info"></div>'}a+="</div></form></div>";return a}},1516:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="price-table-fallback '+i(t.fallback.classNames)+'"><i class="price-table-fallback__icon icon '+i(t.fallback.icon)+'"></i><div class="price-table-fallback__text">'+t.fallback.text+'</div><a href="'+this.app.makeUrl("contact_us")+'" class="price-table-fallback__btn button button-xl button-pill button-transparent-light-black">'+this.tr("Contact Us")+"</a></div>";return a}},1517:function(e,t,i){"use strict";i(1566);var a=i(1567);var r=i(1568);var s=i(546);e.exports=s.extend({name:"FreeLicenseInfo",el:false,template:a,classNames:"",events:{"click ._more":"handleMoreClick","click ._how":"handleHowClick"},serialize:function e(){return{classNames:this.classNames}},handleMoreClick:function e(){this.app.store.get("ModalsManager").show("LicenseInfoModal",{app:this.app,licenseTemplate:r,modalClasses:"modal_free-download"}).catch((function(){}))},handleHowClick:function e(){this.app.store.get("ModalsManager").show("FreeDownloadModal",{app:this.app,file:this.model,mode:"howTo",modalClasses:"modal_free-download",onDownload:this.onDownload.bind(this)}).catch((function(){}))},onDownload:function e(){}})},1518:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(2);var o=i(11);e.exports=n.extend({defaults:{itemId:null,size:null,source:"item",license:null,method:null,subscription:0,fileType:"image",resolution:"standart",splitCount:0,sizeMask:0,link:null,purchased:false,"g-recaptcha-response":""},idAttribute:"link",url:function e(){return this.options.url||"Download"},getQueryParams:function e(){return r({},this.attributes)},parse:function e(t){this.set("g-recaptcha-response","");if(t.errors){this.validationError=t.errors;this.trigger("invalid",this,t.errors,{validationError:t.errors});return{}}return{link:o.urlFormat(r({},o.urlParse(t.downloadLink),{protocol:null}))}},requestLink:function e(){this.attributes.link=null;this.save()}})},1519:function(e,t,i){"use strict";var a=i(1572);var r=i(546);var s=i(1647);i(1573);var n=1;var o=r.extend({name:"StartTrialButton",el:false,template:a,offerUrl:"",events:{"click ._start-trial":"handleStartTrialClick"},initialize:function e(){var t=this;if(!this.app.store.get("MembershipYearlyTrial")){this.app.store.link("MembershipYearlyTrial",new s({},{url:"TrialYearly",app:this.app})).promiseFetch().then((function(){return t.render()})).catch((function(){}))}this.model=this.app.store.get("MembershipYearlyTrial")},prepareRender:function e(){return this.model.get("active")},serialize:function e(){return{offerUrl:this.model.get("offer").makeTrialPlanUrl({trial:n})}},handleStartTrialClick:function e(t){this.app.observer.broadcast("Track:UE:FileViewModal:StartTrial")}});e.exports={init:function e(t){return new o(t)},isEnabled:function e(t){return!t.config.userOrigin.isFirstSession&&t.user.isLoggedIn()}}},1520:function(e,t,i){"use strict";(function(e){var t=i(0);var a=i(749).mobile.responsive;var r=i(9),s=r.getLogger;var n=s(e);var o=500;var l=60;var c=31;var u=41;var d=60;e.exports={togglePin:function e(){if(!this.isPinnedButton||this.app.ampEnabled){return}if(!this.element||!this.element.length||!this.breakPointEl){n.warn("Element and breakPointEl are required");return}var t=this.isVisibleElement();this.element.toggleClass(this.pinnedClass,!t);this.element.toggleClass(this.hiddenPinnedClass,this.isFooterShown());this.environmentCorrection();if(this.scrollElement){Backbone.$(this.scrollElement.querySelector("._modal")).toggleClass(this.modalExtraSpaceClass||"",!t)}},isFooterShown:function e(){return!this.scrollElement&&window.scrollY+window.innerHeight>this.breakPointEl.offsetTop},isVisibleElement:function e(){if(this.isFooterShown()){return true}var t=this.scrollElement||window;var i=this.element.height()/-2+(this.scrollElement?0:l);var a=t.scrollY===undefined?t.scrollTop:t.scrollY;var r=a+(t.innerHeight||t.offsetHeight);var s=this.scrollElement?this.element.offset().top-Backbone.$(this.scrollElement).offset().top:this.element.offset().top;var n=s+(t.scrollTop||0)-i;var o=n+this.element.height()+i+this.getAfterSpace();return o<=r&&n>=a},getAfterSpace:function e(){var t=window.matchMedia("(max-width: "+a.mobileTablets+"px)").matches;var i=this.element.height()>d?c:u;return!this.scrollElement&&!t?i:0},environmentCorrection:function e(){if(this.scrollElement){var t=Math.max(this.scrollElement.offsetHeight-window.innerHeight,0);this.scrollElement.style.paddingBottom=t+"px"}},setScrollElementListener:function e(){var t=this;if(!this.scrollElement){return}this.scrollElement.addEventListener("scroll",(function(){return t.onWindowScroll()}))},onWindowScroll:t.throttle((function(){this.togglePin()}),o)}}).call(this,i(5)(e))},1536:function(e,t,i){},1563:function(e,t,i){"use strict";(function(e){function t(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function a(e){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};if(i%2){t(Object(a),true).forEach((function(t){r(e,t,a[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(a))}else{t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}}return e}function r(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var s=i(0);var n=i(17);var o=i(4);var l=i(548);var c=i(48);var u=i(73),d=u.apiErrors;var h=i(73),p=h.captchaErrors;var f=i(1515);var v=i(1516);var m=i(1564);var b=i(1565);var g=i(869);var _=i(546);var w=i(1517);var y=i(547);var k=i(549);var x=i(1569);var C=i(1571);var S=i(1518);var T=i(552);var M=i(555);var P=i(866);var L=i(560);var O=i(24),E=O.classNames;var D=i(557);var F=i(9),I=F.getLogger;var z=i(1519);var B=i(1520);var R=i(764);var V=I(e);var U=".g-recaptcha-response";var A=100;var N=_.extend({name:"PriceTable",el:false,template:function e(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}if(this.shouldUseMobileView()){return b.apply(this,i)}return this.app.features.isFeatureOnValue("File View Classic")?m.apply(this,i):f.apply(this,i)},fallbackOptions:{icon:"icon-error-transparent",classNames:"price-table-fallback_modal"},viewMode:"page",mobileTablets:false,downloadModels:{},downloading:0,refPrefix:"",isDesktopSmall:false,isPinnedButton:true,isTrialButtonEnabled:false,isMobileMode:false,buttonClassNames:"",licenseButtonClassNames:"",events:{"click ._row":"onTableRowClick","click ._tab":"onSwitcherTabClick","click ._license":"onLicenseClick","click ._download-button":"onDownloadClick","mouseenter ._tooltip-vector":"showVectorTooltip","mouseleave ._tooltip-vector":"hideVectorTooltip","mouseenter ._editorial-tooltip":"toggleEditorialTooltip","mouseleave ._editorial-tooltip":"toggleEditorialTooltip","mouseenter ._extended-tooltip":"handleExtendedTooltipShow","mouseleave ._extended-tooltip":"handleExtendedTooltipHide"},globals:{"resize window":"onWindowResize","scroll window":"onWindowScroll"},initialize:function e(){var t=this;this.userPlansManager=this.userPlansManager||this.app.store.get("UserPlansManager");this.signUpModalAllowed=this.app.features.isFeatureOnValue("Is Signup Modal On Download Allowed");this.priceTable=new C({file:this.file,product:this.userPlansManager.get("preferred")},{app:this.app});this.listenTo(this.file,"change:purchased change:sizeMask change:licensed",this.render);this.on("item.downloaded",this.render);this.listenTo(this.priceTable,"change",this.render);this.listenTo(this.userPlansManager,{change:function e(){return t.priceTable.set({product:t.userPlansManager.get("preferred")})}});this.listenTo(this.app.observer,"Responsive:VideoPreviewMounted",this.togglePin)},prepareRender:function e(){var t=this;this.isMobileMode=this.isMobileModeEnabled();if(this.isMobileUpgradeVersion()){this.isPinnedButton=false;this.setMatchMedia(this.render.bind(this))}this.table=this.priceTable.buildTable(this.file);if(!this.table.body.length||this.file.isBannedForCountry()){this.template=v;return true}if(this.downloading!==0){return false}s.each(this.downloadModels,(function(e,i){if(i!==t.file.get("id")){delete t.downloadModels[i]}}));this.setViews({"._free-license-info":this.getFreeLicenseInfoView()});if(this.shouldEnableTrialButton()){this.setViews({"._trial-button":z.init({app:this.app})})}return true},serialize:function e(){var t;var i=this.priceTable.get("chosen");var a=this.getDownloadModel(i).serialize();var r=this.checkSizeCanBeDownload();var n=this.app.user.isEnterprise();var l=this.elChosen()&&this.file.get("type")!=="video"&&!r&&!n;return{table:this.table,file:this.file.serialize(),download:a,searchQuery:this.app.store.get("SearchQuery")?s.pick(this.app.store.get("SearchQuery").attributes,"offset","hash"):undefined,userHasPermissionsToLicense:this.app.user.hasPermissionsTo("enterprise","license"),userHasPermissionsToDownload:this.app.user.hasPermissionsToDownload()||this.file.isLicensed(i),isEnterpriseUser:n,isFooterWithNote:!this.canBeDownload&&!this.isEnterpriseUser,isFreeLicenseAvailable:this.isFreeAttributateAvailable(),isTrialButtonEnabled:this.shouldEnableTrialButton(),canBeDownload:r,viewMode:this.viewMode,classNames:E((t={},t[this.classNames]=true,t["price-table-static"]=this.app.ampEnabled,t["price-table-classic_mobile"]=this.shouldUseMobileView(),t["price-table-classic_upgrade"]=this.viewMode==="page"&&this.isMobileUpgradeVersion(),t)),footerClassNames:this.footerClassNames,licenseButtonClassNames:this.licenseButtonClassNames,buttonClassNames:this.buttonClassNames,priceInButton:this.app.user.isLoggedIn(),captcha:{siteKey:o.client.recaptcha.publicKey},downloadButtonText:this.getDownloadButtonText(),fallback:this.getFallbackOptions(),availableMethods:this.userPlansManager.get("available"),elLabel:l?this.getElLabel():"",formActionUrl:"/cart/purchase.html"}},clientAfterRender:function e(){var t=this;if(this.file.get("type")==="vector"){this.setNotExistView("vectorTooltip",y,{name:"VectorTooltip",params:l.PriceTableVector,classes:{tooltip_dark:this.app.features.isFeatureOnValue("File View Page Upgrade")},content:new _({el:false,template:function e(){return this.tr(c.AIFilesHelpMessage)}})})}if(this.file.get("editorial")){this.setNotExistView("editorialTooltip",y,{params:l.ViewInfoEditorial,classes:{tooltip_dark:this.app.features.isFeatureOnValue("File View Page Upgrade")},content:new _({el:false,template:g})})}if(!this.app.user.isEnterprise()){this.setView("ExtendedInfoTooltip",new x({app:this.app}))}T(this.$el,n.$);this.$("._download-button").each((function(e,i){return M(t.$(i),{color:t.viewMode==="modal"?"#fff":undefined})}));this.setPricePosition();this.sizeChangedCallback();if(this.isPinnedButton){this.setVariablesForHandlePin();this.togglePin()}},setVariablesForHandlePin:function e(){if(this.viewMode!=="page"){this.scrollElement=document.querySelector("._modal-container");this.setScrollElementListener()}this.breakPointEl=document.querySelector("footer");this.element=this.$("._price-table-footer");this.hiddenPinnedClass=this.app.features.isFeatureOnValue("File View Classic")?"price-table-classic__footer_pinned-hidden":"price-table__footer_pinned-hidden";this.pinnedClass=this.app.features.isFeatureOnValue("File View Classic")?"price-table-classic__footer_pinned":"price-table__footer_pinned";this.modalExtraSpaceClass="file-view-modal_extra-space"},isMobileUpgradeVersion:function e(){return!this.app.features.isFeatureOnValue("File View Page Upgrade")&&this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")},shouldEnableTrialButton:function e(){return this.isTrialButtonEnabled&&z.isEnabled(this.app)&&this.file.get("type")!=="video"},shouldUseMobileView:function e(){return this.viewMode==="page"&&this.isMobileUpgradeVersion()&&this.isMobileMode},checkSizeCanBeDownload:function e(t){if(t===void 0){t=this.priceTable.get("chosen")}var i=this.priceTable.get("product");return this.app.user.isLoggedIn()&&(this.app.user.isEnterprise()||this.file.isPurchased(t)||this.file.isLicensed(t)||this.app.user.hasPlans()&&this.app.licensor.checkSizeCanBeDownload(this.file,i,t)&&i.left)},elChosen:function e(){return this.priceTable.get("chosen")==="el0"},getFallbackOptions:function e(){var t=this.file.isBannedForCountry()?this.app.tr("Not available in your country"):this.app.tr("This image cannot be downloaded under this account");return a({},this.fallbackOptions,{text:t})},getDownloadButtonText:function e(){var t=this.priceTable.get("chosen");if(this.file.isPurchased(t)||this.file.isLicensed(t)){return this.tr("Re-Download_full")}if(this.app.user.isEnterprise()){return this.tr("Download Comp")}var i=[{type:"image",label:this.tr("Download Image")},{type:"vector",label:this.tr("Download Vector")},{type:"video",label:this.tr("Download Video")}];var a=this.getFileTypeOverride(this.file.get("type"),t);var r=i.find((function(e){return e.type===a})),s=r.label;return s},getElLabel:function e(){return this.tr("Files under the Extended license can be<br /> downloaded using On Demand Downloads<br /> for Extended License only.")},getFileTypeOverride:function e(t,i){return this.file.get("type")==="vector"&&!["vect","el0"].includes(i)?"image":this.file.get("type")},setPricePosition:function e(){var t=this.$("._size-box");var i=parseInt(t.css("marginLeft"),10)+parseInt(t.css("marginRight"),10);var a=t.outerWidth()*t.length+i*(t.length-1);var r=this.$("._price-box");var s=this.$("._download-button");var n=s.length?s.outerWidth():0;var o=0;if(n+r.outerWidth()<=a){o=a-r.outerWidth()}else{o=n}r.css({left:o})},onTableRowClick:function e(t){this.setChosenSize(n.$(t.currentTarget).find('input[name="size"]').val())},onSwitcherTabClick:function e(t){this.priceTable.set({units:t.currentTarget.getAttribute("data-key")})},onLicenseClick:function e(t){t.preventDefault();t.stopPropagation();this.onLicenseBtnClick()},onDownloadClick:function e(t){t.preventDefault();this.resetError();this.app.observer.broadcast("Track:UE:File:DownloadClick",{id:this.file.get("id"),file:this.file,product:this.file.get("free")?0:this.userPlansManager.get("preferred").bit_price,size:this.priceTable.get("chosen"),route:this.app.router.routeName,view:this.name});this.proceedDownloadByScheme()},proceedDownloadByScheme:function e(){var t=this.app.store.get("ModalsManager");if(!t.get("FreeDownloadModal")&&this.isFreeAttributateAvailable()){this.showFreeDownloadModal();return}if(t.get("FreeDownloadModal")){t.hide("FreeDownloadModal")}if(this.app.user.isLoggedIn()){this.proceedDownloadForAuthUser()}else{this.proceedDownloadForGuest()}},proceedDownloadForGuest:function e(){if(this.app.router.routeName!=="Cart"&&this.app.store.get("CartIndicator")){this.listenToOnce(this.app.observer,"Cart:added",this.doPurchaseAndDownloadForGuest);this.app.observer.fire("Cart:add",{fileId:this.file.get("id")})}else{this.doPurchaseAndDownloadForGuest()}},proceedDownloadForAuthUser:function e(){var t=this.$("._note");if(t.is(":visible")&&!t.hasClass("animation-el-note")&&this.app.user.checkExtendedProduct()){t.addClass("animation-el-note");this.getDownloadButton(this.priceTable.get("chosen")).trigger("loaded")}else{this.doPurchaseAndDownload()}},doPurchaseAndDownloadForGuest:function e(){var t=this;if(!this.signUpModalAllowed){this.doPurchaseAndDownload();return}this.initDownloadChain().then((function(){return t.app.chain.addNextStepDummyRoute((function(){return t.app.chain.execute("Signup",true)}))}));this.app.store.get("ModalsManager").show("SignupModal",{app:this.app}).then((function(){return t.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:t.app.history.first().get("route")+"/download"})})).catch((function(){}))},getDownloadButton:function e(t){var i=this.$('._download-button[value="'+t+'"]');return i.length>0?i:this.$("._download-button")},getDownloadChainName:function e(){return this.file.get("free")&&!this.elChosen()||this.isFreeAttributateAvailable()?"download-free":"download"},injectPurchased:function e(t,i){var a=this;if(i===void 0){i=[]}var r=i[0]&&i[0].error_message;var s=r?{error:r}:true;var n=this.app.config.prices.singlePaySizes&&this.app.config.prices.singlePaySizes[t];if(this.app.features.isFeatureEnabled("Single pay for multiple sizes",1)&&n){n.forEach((function(e){a.file.setPurchase(e,s)}))}else{this.file.setPurchase(t,s)}},initDownloadChain:function e(){return this.app.chain.initChain(this.getDownloadChainName(),{refPrefix:this.refPrefix,fileId:this.file.get("id"),fileType:this.file.get("type")})},createDownloadModel:function e(t,i){var r=this;if(i===void 0){i=this.priceTable.get("chosen")}var s=this.priceTable.get("product");var n=this.table.body.find((function(e){return e.key===i}))||{};var o=n.license||{};var l=function e(){return{source:"item",itemId:t,size:i,license:o.id===2?"extended":"standard",licenseId:o.id,purchased:r.file.isPurchased(i),fileType:r.file.get("type")==="video"?"video":"image",method:s.type==="imagepack"?"bonus":s.type,subscription:s.type==="subscription"?s.id:0,resolution:s.subproduct||"standart",splitCount:s.split_count||0}};var c=new S(l(),a({app:this.app},this.app.user.isEnterprise()?{url:this.getEnterpriseDownloadUrl()}:{}));c.listenTo(this.priceTable,"change",(function(){return c.secureSet(l())}));this.listenTo(c,{"change:link":this.onGetDownloadLink,invalid:this.onInvalidDownload,error:this.onDownloadError});return c},getEnterpriseDownloadUrl:function e(){var t=this.priceTable.get("chosen");return this.file.isPurchased(t)||this.file.isLicensed(t)?"GetDownloadLink":"ComplimentaryDownload"},getDownloadModel:function e(t){var i=this.file.get("id");if(!this.downloadModels[i]){this.downloadModels[i]={}}if(!this.downloadModels[i][t]){this.downloadModels[i][t]=this.createDownloadModel(i,t)}this.downloadModels[i][t].set({"g-recaptcha-response":this.$(U).val()||""});return this.downloadModels[i][t]},downloadPreparationsDone:function e(){if(this.isNeedToRefillPlan()){this.showRefillMembershipModal();return false}return true},doPurchaseAndDownload:function e(){var t=this.priceTable.get("chosen");if(!(this.file.get("free")&&!this.elChosen())&&!this.file.isPurchased(t)&&!this.downloadPreparationsDone()){return}this.downloading+=1;this.getDownloadButton(t).trigger("loading");this.getDownloadModel(t).requestLink()},isNeedToRefillPlan:function e(){var t=this.priceTable.get("product"),i=t.type;if(i!=="membership"){return false}var a=s.chain(this.app.user.serializeUserPlans({type:i})).sortBy("order").first().value();return!(a&&this.app.user.products.findWhere({type:i,id:a.id}).canBePurchased())},getFreeLicenseInfoView:function e(){if(!this.isFreeAttributateAvailable()){return[]}return new w({app:this.app,model:this.file,classNames:E({"free-license-info_light":this.app.features.isFeatureOnValue("File View Page Upgrade")}),onDownload:this.proceedDownloadByScheme.bind(this)})},isFreeAttributateAvailable:function e(){var t=this;var i=this.app.licensor.getLicensableSizesForFile(this.file);var a=i.find((function(e){var i=t.app.licensor.getFileSizePrice(e,t.priceTable.get("product"));return e.id===t.priceTable.get("chosen")&&i&&i.cost===0}));return!this.elChosen()&&!this.checkSizeCanBeDownload()&&a},onGetDownloadLink:function e(t,i){var a=this;var r=t.get("size");P.downloadByUrl({app:this.app,link:i,callback:function e(){a.getDownloadButton(r).trigger("loaded");a.downloading-=1;if(a.downloading===0){a.trigger("item.downloaded")}a.app.user.fetch()}});var s=this.file.isLicensed(this.priceTable.get("chosen"));var n=["EnterpriseLicensedDownloads","EnterpriseCompDownloads"].indexOf(this.app.router.routeName)>-1;var o=this.userPlansManager.get("preferred");var l=o.type;if(this.app.user.isEnterprise()&&!s&&!n){this.app.observer.broadcast("Track:UE:File:AddToCart",{id:this.file.get("id"),file:this.file.serialize(),view:this.name})}else if(!this.app.user.isEnterprise()){var c=o.bit_price;if(this.file.get("free")){c="Free";if(this.file.isFreeCurated()){c="FreeCurated";l="membership"}}this.app.observer.broadcast("Track:UE:File:Download",{route:this.app.router.routeName,id:this.file.get("id"),file:this.file,size:t.get("size"),reDownload:this.file.isPurchased(t.get("size")),cost_type:c,view:this.name,plan:this.app.tracking.rewriteProduct(l)})}this.injectPurchased(t.get("size"));this.onDownloadBegins()},onInvalidDownload:function e(t,i){var a=this;this.downloading-=1;if(i.length&&s.some(i,(function(e){return e.error_code===d.haveNoPermissionToSection}))){this.getDownloadButton(t.get("size")).trigger("loaded");new k({app:this.app,title:this.tr("Service Message"),message:s.map(i,(function(e){return e.error_message})).join(" ")}).show();V.warn("DOWNLOAD ERROR: Cannot get download link. Something wrong with arrived data",i);return}var r=s.find(i,(function(e){return s.contains(Object.values(p),+e.error_code)?e:false}));if(r){this.getDownloadButton(t.get("size")).trigger("loaded");this.showError(r.error_code,r.error_message);D.injectScript().then((function(){return D.render(a.$(".g-recaptcha")[0])})).then((function(){return a.sizeChangedCallback()}));return}if(i.length){if(this.app.router.routeName!=="Cart"){this.app.observer.broadcast("Track:UE:File:AddToCart",{id:this.file.get("id"),file:this.file.serialize(),view:this.name})}this.injectPurchased(t.get("size"),i);this.initDownloadChain().then((function(){return a.app.chain.start(i[0])}))}},onDownloadError:function e(t,i){D.reset(this.$(U));if(i.responseJSON&&i.responseJSON.errors){this.onInvalidDownload(t,i.responseJSON.errors);return}V.warn("DOWNLOAD ERROR: Cannot get download link. Server returns error: ",i)},setChosenSize:function e(t,i){this.priceTable.set({chosen:t},i||{})},showRefillMembershipModal:function e(){this.app.store.get("ModalsManager").show("RefillMembershipModal",{app:this.app,type:"notAvailable"}).catch((function(){}))},showFreeDownloadModal:function e(){var t=this;this.app.store.get("ModalsManager").show("FreeDownloadModal",{app:this.app,file:this.file,modalClasses:"modal_free-download",onDownload:function e(){return t.proceedDownloadByScheme()}}).catch((function(){}))},resetError:function e(){this.$("._download-error").text("")},showError:function e(t,i){this.$("._download-error").text(t+"::"+i);this.sizeChangedCallback()},getActiveTableRowData:function e(){return this.table&&this.table.body&&this.table.body.find((function(e){return e.active}))||null},showVectorTooltip:function e(t){t.preventDefault();this.getView("vectorTooltip").show(t)},hideVectorTooltip:function e(t){t.preventDefault();this.getView("vectorTooltip").hide(t)},toggleEditorialTooltip:function e(t){this.getView("editorialTooltip").toggle(t)},handleExtendedTooltipShow:function e(t){this.getView("ExtendedInfoTooltip").show(t)},handleExtendedTooltipHide:function e(t){this.getView("ExtendedInfoTooltip").hide(t)},onWindowResize:s.throttle((function(){if(L.desktopSmall()!==this.isDesktopSmall){this.isDesktopSmall=L.desktopSmall();this.setPricePosition()}this.togglePin()}),A),onLicenseBtnClick:function e(){},onDownloadBegins:function e(){},sizeChangedCallback:function e(){},onWindowScroll:function e(){},togglePin:function e(){}});Object.assign(N.prototype,B,R);e.exports=N}).call(this,i(5)(e))},1564:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="price-table-classic price-table-classic_mode-'+i(t.viewMode);if(t.availableMethods.length){a+=" price-table-classic_has-methods"}a+=" "+i(t.classNames)+'"><form autocomplete="off" method="GET" class="price-table-classic__form" action="'+t.formActionUrl+'" target="_top"><input type="hidden" name="id" value="'+i(t.download.itemId)+'" /><input type="hidden" name="source" value="'+i("view_item"||false)+'" /><input type="hidden" name="license" value="'+i(t.download.license)+'" /><input type="hidden" name="size" value="'+i(t.download.size)+'" /><input type="hidden" name="method" value="'+i(t.download.method)+'" /><input type="hidden" name="purchased" value="'+i(t.download.purchased)+'" /><input type="hidden" name="product" value="'+i(t.download.fileType)+'" /><input type="hidden" name="subproduct" value="'+i(t.download.resolution)+'" /><input type="hidden" name="split_count" value="'+i(t.download.splitCount)+'" /><input type="hidden" name="subscription" value="'+i(t.download.subscription)+'" />';if(t.searchQuery){a+='<input type="hidden" name="sq" value="'+i(t.searchQuery.hash)+'" /><input type="hidden" name="sst" value="'+i(t.searchQuery.offset)+'" />'}a+='<div class="price-table-classic__content"><div class="price-table-classic__head';if(t.availableMethods.length&&!t.isEnterpriseUser){a+=" price-table-classic__head_methods"}a+='">';var r=t.table.head;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<div class="price-table-classic__th';if(s.label==="Resolution"){a+=" price-table-classic__th_resolution"}if(s.label==="Price"){a+=" price-table-classic__th_price"}a+='">';if(s.label==="Resolution"){a+='<div class="price-table-classic__col-name price-table-classic__col-name_alt">'+this.tr("Size")+'</div><div class="price-table-classic__col-name price-table-classic__col-name_simple">'+this.tr(s.label)+"</div>"}else if(s.label==="Size"){a+='<div class="price-table-classic__col-name price-table-classic__col-name_alt">'+this.tr("Resolution")+'</div><div class="price-table-classic__col-name price-table-classic__col-name_simple">'+this.tr(s.label)+":</div>"}else{a+='<div class="price-table-classic__col-name">'+this.tr(s.label)+"</div>"}if(s.switcher){a+='<div class="price-table-classic__col-switch col-switch">';var l=s.switcher;if(l){var c,u=-1,d=l.length-1;while(u<d){c=l[u+=1];a+='<div class="col-switch__item _tab ';if(c.active){a+=" col-switch__item_active"}a+='" data-key="'+i(c.key)+'">'+this.tr(c.label)+"</div>"}}a+="</div>"}a+="</div>"}}a+='</div><div class="price-table-classic__space"></div>';var h=t.table.body;if(h){var s,p=-1,f=h.length-1;while(p<f){s=h[p+=1];a+='<label class="price-table-classic__row _row ';if(s.active){a+=" price-table-classic__row_active"}a+='" tabindex="0"><div class="price-table-classic__cell price-table-classic__cell_resolution"><div class="price-table-classic__radio field-box radio-box radio-only radio-box-m"><input class="radio" type="radio" name="size" value="'+i(s.key)+'"';if(s.active){a+=' checked="checked"'}a+=' /><i class="icon icon-radio icon-radio-m"></i></div><span class="price-table-classic__size">';if(s.key==="vect"){a+='<i class="icon icon-size';if(t.viewMode==="modal"){a+=" icon-size-air"}a+=" icon-size-vector ";if(s.active){a+=" active"}a+='"></i>'}else if(s.key==="el0"){a+='<i class="icon icon-size';if(t.viewMode==="modal"){a+=" icon-size-air"}a+=" icon-size-extended ";if(s.active){a+=" active"}a+='"></i>'}else{a+='<i class="icon icon-size ';if(t.viewMode==="modal"){a+=" icon-size-air"}if(t.file.type!=="video"){a+=" icon-size-photo"}else{a+=" icon-size-video"}a+=" icon-size-"+i(s.indicator);if(s.active){a+=" active"}a+='"></i>'}a+='</span><div class="price-table-classic__size-info"><span class="price-table-classic__text-size">'+this.tr(s.label)+'</span><span class="price-table-classic__text-type" ';if(s.extension.tooltip){a+=' title="'+i(s.extension.tooltip)+'"'}a+=">,&nbsp;"+this.tr(s.extension.label)+"</span>";if(!t.isEnterpriseUser){a+='<div class="price-table-classic__text-license">'+this.tr(s.license.labels.full)+"</div>"}a+='</div></div><div class="price-table-classic__cell price-table-classic__cell_frame-rate">';if(s.size.tooltip){a+='<span class="price-table-classic__text">'+this.tr(s.size.value)+'<i class="price-table-classic__help icon icon-help icon-help-';if(t.viewMode==="modal"){a+="light"}else{a+="dark"}a+=' _tooltip-vector"></i></span>'}else{a+='<div class="price-table-classic__text price-table-classic__text-alt">'+this.tr(s.label)+'</div><div class="price-table-classic__text price-table-classic__text-size-details">'+i(s.size.value)+"</div>"}a+='</div><div class="price-table-classic__cell price-table-classic__cell_price">';if(!s.purchase.size){a+='<span class="price-table-classic__label">';if(s.price.discounted&&s.price.discounted!==s.price.value){a+='<span class="price-table-classic__discount"><s class="price-table-classic__price-old">'+s.price.value+'</s><span class="price-table-classic__price-new price-table-classic__text_red">'+s.price.discounted+"</span></span>"}else{a+='<span class="price-table-classic__text ';if(s.price.free){a+=" price-table-classic__text_red"}a+='">'+s.price.labeled+"</span>"}if(s.price.labeled){a+='<span class="price-table-classic__label-item price-table-classic__label-item_ok icon icon-round-ok';if(!s.price.isLicensed){a+=" hidden"}a+='" ';if(!s.price.isLicensed){a+=" hidden"}a+="></span>"}a+="</span>"}else{a+='<span class="price-table-classic__redownload">';if(!s.purchase.data.error){a+='<span class="price-table-classic__text price-table-classic__text_middle">'+this.tr("Re-Download")+"</span>"}a+='<a class="price-table-classic__redownload-item price-table-classic__redownload-item_ok icon icon-round-ok';if(!s.purchase.size||s.purchase.data.error){a+=" hidden"}a+='" href="'+this.app.makeUrl("purchased",{query:{"filter[query]":s.fileID}})+'" target="_blank"></a><i class="price-table-classic__redownload-item icon icon-round-fail ';if(!s.purchase.data.error){a+=" hidden"}a+='" ';if(s.purchase.data.error){a+='title="'+i(s.purchase.data.error)+'"'}a+='></i><i class="price-table-classic__redownload-item icon icon-loading icon-loading-gray hidden"></i></span>'}a+="</div></label>"}}if(t.isEnterpriseUser&&t.userHasPermissionsToLicense){a+='<div class="price-table-classic__row price-table-classic__license-btn-row"><div class="price-table-classic__cell price-table-classic__cell_resolution"></div><div class="price-table-classic__cell"></div><div class="price-table-classic__cell price-table-classic__cell_price"><div class="price-table-classic__license-btn-container"><button type="button" class="price-table-classic__license-btn button button-xxl';if(t.viewMode==="modal"){a+=" button-black-blue"}else{a+=" button-white-blue"}a+=" "+i(t.licenseButtonClassNames)+' _license">'+this.tr("License")+"</button></div></div></div>"}a+='</div><div class="'+i(t.footerClassNames)+' _price-table-footer"><div class="price-table-classic__captcha g-recaptcha" data-sitekey="'+i(t.captcha.siteKey)+'"></div><div class="price-table-classic__download';if(t.isEnterpriseUser){a+=" price-table-classic__download_enterprise"}if(t.isTrialButtonEnabled){a+=" price-table__download_trial"}a+='">';if(t.userHasPermissionsToDownload){a+='<button class="price-table-classic__download-btn button button-xxxl button-red '+i(t.buttonClassNames)+' _download-button" type="submit"';var v=t.table.body;if(v){var s,m=-1,b=v.length-1;while(m<b){s=v[m+=1];if(s.active&&s.price.free){a+=' data-label="'+s.price.labeled+'"'}}}a+=">"+t.downloadButtonText+"</button>"}if(t.isTrialButtonEnabled){a+='<span class="price-table-trial-button-container _trial-button"></span>'}if(t.isEnterpriseUser&&t.userHasPermissionsToLicense){a+='<button type="button" class="price-table-classic__license-btn_mobile button button-xxl';if(t.viewMode==="modal"){a+=" button-black-blue"}else{a+=" button-white-blue"}a+=" "+i(t.licenseButtonClassNames)+' _license">'+this.tr("License")+"</button>"}a+="</div>";if(t.elLabel){a+='<span class="price-table-classic__note _note">'+t.elLabel+"</span>"}var g=t.table.body;if(g){var s,_=-1,w=g.length-1;while(_<w){s=g[_+=1];if(s.active){a+='<div class="price-table-classic__full-info size-full-info"><i class="size-full-info__size-name icon icon-size';if(t.file.type==="video"){a+=" icon-size-video"}a+=" icon-size-dark icon-size-"+i(s.indicator)+" "+i(s.key)+'"></i>';if(!t.isEnterpriseUser){a+='<span class="size-full-info__license">'+this.tr(s.license.labels.full)+"</span>"}a+='<span class="size-full-info__size-px">'+this.tr(s.label)+'</span><span class="size-full-info__type">'+this.tr(s.extension.label)+'</span><span class="size-full-info__size-inch">'+this.tr(s.size.value)+"</span></div>"}}}a+="</div>";var y=t.table.body;if(y){var s,k=-1,x=y.length-1;while(k<x){s=y[k+=1];if(s.active){a+='<div class="price-table-classic__footer-info"><div class="price-table-classic__footer-info-row"><div class="price-table-classic__footer-info-cell">'+this.tr("License")+':</div><div class="price-table-classic__footer-info-cell">'+this.tr(s.license.labels.full)+'</div></div><div class="price-table-classic__footer-info-row"><div class="price-table-classic__footer-info-cell">'+this.tr("File Type")+':</div><div class="price-table-classic__footer-info-cell">'+this.tr(s.extension.label)+"</div></div></div>"}}}a+='<span class="price-table-classic__download-error _download-error"></span>';if(t.isFreeLicenseAvailable){a+='<div class="price-table-classic__free-license _free-license-info"></div>'}a+="</form></div>";return a}},1565:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="price-table-classic price-table-classic_mode-'+i(t.viewMode)+" "+i(t.classNames)+'"><form autocomplete="off" method="GET" class="price-table-classic__form" action="'+t.formActionUrl+'" target="_top"><input type="hidden" name="id" value="'+i(t.download.itemId)+'" /><input type="hidden" name="source" value="'+i("view_item"||false)+'" /><input type="hidden" name="license" value="'+i(t.download.license)+'" /><input type="hidden" name="size" value="'+i(t.download.size)+'" /><input type="hidden" name="method" value="'+i(t.download.method)+'" /><input type="hidden" name="purchased" value="'+i(t.download.purchased)+'" /><input type="hidden" name="product" value="'+i(t.download.fileType)+'" /><input type="hidden" name="subproduct" value="'+i(t.download.resolution)+'" /><input type="hidden" name="split_count" value="'+i(t.download.splitCount)+'" /><input type="hidden" name="subscription" value="'+i(t.download.subscription)+'" />';if(t.searchQuery){a+='<input type="hidden" name="sq" value="'+i(t.searchQuery.hash)+'" /><input type="hidden" name="sst" value="'+i(t.searchQuery.offset)+'" />'}a+='<div class="price-table-classic__content">';var r=t.table.body;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<label class="price-table-classic__row _row ';if(s.active){a+=" price-table-classic__row_active"}a+='"><div class="price-table-classic__cell price-table-classic__cell_resolution"><div class="price-table-classic__radio field-box radio-box radio-only radio-box-m"><input class="radio" type="radio" name="size" value="'+i(s.key)+'"';if(s.active){a+=' checked="checked"'}a+=' /><i class="icon icon-radio icon-radio-m"></i></div><span class="price-table-classic__size">';if(s.key==="vect"){a+='<i class="price-table-classic__size-vector"></i>'}else if(s.key==="ds"&&s.indicator==="ds"){a+='<span class="price-table-classic__size-super">Super</span>'}else if(s.key==="el0"){a+="EL"}else if(t.file.type==="video"){a+='<span class="price-table-classic__size-video price-table-classic__size-video_'+i(s.key)+'">'+i(s.indicator);if(s.key!=="4k"){a+="p"}a+="</span>"}else{a+=""+i(s.indicator)}a+='</span><div class="price-table-classic__size-info"><span class="price-table-classic__text-size">'+this.tr(s.label)+'</span><span class="price-table-classic__text-type" ';if(s.extension.tooltip){a+=' title="'+i(s.extension.tooltip)+'"'}a+=">,&nbsp;"+this.tr(s.extension.label)+"</span>";if(!t.isEnterpriseUser){a+='<div class="price-table-classic__text-license">'+this.tr(s.license.labels.full)+"</div>"}a+='</div></div><div class="price-table-classic__cell price-table-classic__cell_price">';if(!s.purchase.size){a+='<span class="price-table-classic__label">';if(s.price.discounted&&s.price.discounted!==s.price.value){a+='<span class="price-table-classic__discount"><s class="price-table-classic__price-old">'+s.price.value+'</s><span class="price-table-classic__price-new price-table-classic__text_red">'+s.price.discounted+"</span></span>"}else{a+='<span class="price-table-classic__text ';if(s.price.free){a+=" price-table-classic__text_red"}a+='">'+s.price.labeled+"</span>"}if(s.price.labeled){a+='<span class="price-table-classic__label-item price-table-classic__label-item_ok icon icon-round-ok-large';if(!s.price.isLicensed){a+=" hidden"}a+='" ';if(!s.price.isLicensed){a+=" hidden"}a+="></span>"}a+="</span>"}else{a+='<span class="price-table-classic__redownload">';if(!s.purchase.data.error){a+='<span class="price-table-classic__text price-table-classic__text_middle">'+this.tr("Re-Download")+"</span>"}a+='<a class="price-table-classic__redownload-item price-table-classic__redownload-item_ok icon icon-round-ok-large';if(!s.purchase.size||s.purchase.data.error){a+=" hidden"}a+='" href="'+this.app.makeUrl("purchased",{query:{"filter[query]":s.fileID}})+'" target="_blank"></a><i class="price-table-classic__redownload-item icon icon-round-fail-large ';if(!s.purchase.data.error){a+=" hidden"}a+='" ';if(s.purchase.data.error){a+='title="'+i(s.purchase.data.error)+'"'}a+='></i><i class="price-table-classic__redownload-item icon icon-loading icon-loading-gray hidden"></i></span>'}a+="</div></label>"}}a+='</div><div class="price-table-classic__notice-box">';if(t.elLabel){a+='<span class="price-table-classic__note _note">'+t.elLabel+"</span>"}a+='<span class="price-table-classic__download-error _download-error"></span>';if(t.isFreeLicenseAvailable){a+='<div class="price-table-classic__free-license _free-license-info"></div>'}a+='</div><div class="'+i(t.footerClassNames)+' _price-table-footer"><div class="price-table-classic__captcha g-recaptcha" data-sitekey="'+i(t.captcha.siteKey)+'"></div><div class="price-table-classic__download';if(t.isEnterpriseUser){a+=" price-table-classic__download_enterprise"}a+='">';if(t.userHasPermissionsToDownload){a+='<button class="price-table-classic__download-btn button button-xxxl button-red '+i(t.buttonClassNames)+' _download-button" type="submit"';var l=t.table.body;if(l){var s,c=-1,u=l.length-1;while(c<u){s=l[c+=1];if(s.active&&s.price.isCustom){a+=' data-label="'+this.tr("Price")+": "+s.price.labeled+'"'}}}a+=">"+t.downloadButtonText+"</button>"}if(t.isEnterpriseUser&&t.userHasPermissionsToLicense){a+='<button type="button" class="price-table-classic__license-btn_mobile button button-xxl';if(t.viewMode==="modal"){a+=" button-black-blue"}else{a+=" button-white-blue"}a+=" "+i(t.licenseButtonClassNames)+' _license">'+this.tr("License")+"</button>"}a+="</div>";var d=t.table.body;if(d){var s,h=-1,p=d.length-1;while(h<p){s=d[h+=1];if(s.active){a+='<div class="price-table-classic__full-info size-full-info _tab" data-key="'+i(s.nextUnit)+'"><i class="size-full-info__size-name icon icon-size';if(t.file.type==="video"){a+=" icon-size-video"}a+=" icon-size-dark icon-size-"+i(s.indicator)+" "+i(s.key)+'"></i><span class="size-full-info__size-text size-full-info__size-text_'+i(s.key)+'">';if(s.key==="ds"&&s.indicator==="ds"){a+="Super"}else if(s.key==="el0"){a+="EL"}else if(s.key!=="vect"){a+=""+i(s.indicator);if(t.file.type==="video"&&s.key!=="4k"){a+="p"}}a+=""+this.seo.space+"</span>";if(!t.isEnterpriseUser){a+='<span class="size-full-info__license">'+this.tr(s.license.labels.full)+this.seo.space+"</span>"}a+='<div class="size-full-info__row size-full-info__row_'+s.key+'"><span class="size-full-info__size-px">'+this.tr(s.label)+'</span><span class="size-full-info__type">'+this.seo.space+this.tr(s.extension.label)+this.seo.space+'</span><span class="size-full-info__size-inch">'+this.tr(s.size.value)+this.seo.space+"</span></div></div>"}}}a+="</div></form></div>";return a}},1566:function(e,t,i){},1567:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="free-license-info '+i(t.classNames)+'"><h5 class="free-license-info__title">'+this.tr("Free License")+'</h5><span class="free-license-info__text">'+this.tr('Free for personal and commercial purpose with attribution. <span class="%s">More info</span>',"free-license-info__link _more")+'</span><span class="free-license-info__text">'+this.tr('Attribution is required <span class="%s">How to attribute?</span>',"free-license-info__link _how")+"</span></div>";return a}},1568:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="license-info-modal"><h1 class="license-info-modal__title">'+this.tr("License Summary")+'</h1><span class="license-info-modal__text">'+this.tr("Free license allows you to use the content for:")+'</span><ul class="license-info-modal__list"><li class="license-info-modal__item"><i class="license-info-modal__icon icon icon-ok-blue"></i>'+this.tr("Commercial and personal projects")+'</li><li class="license-info-modal__item"><i class="license-info-modal__icon icon icon-ok-blue"></i>'+this.tr("Digital or printed media")+'</li><li class="license-info-modal__item"><i class="license-info-modal__icon icon icon-ok-blue"></i>'+this.tr("Worldwide usage")+'</li><li class="license-info-modal__item"><i class="license-info-modal__icon icon icon-ok-blue"></i>'+this.tr("Creating derivative works")+'</li></ul><div class="license-info-modal__footer">'+this.tr('<b>This text is just a summary.</b><br> For more information, read full text of<br> the <a class="%s" href="%s">Attributed Free License Agreement</a>.',["link-blue",this.app.makeUrl("free-license-with-attribution")])+"</div></div>";return i}},1569:function(e,t,i){"use strict";var a=i(1570);var r=i(546);var s=i(547);e.exports=s.extend({name:"ExtendedInfoTooltip",params:{rootClose:true,displayForce:false,pointerShow:true,templatePosition:"br",templateOffset:{top:4,left:-10}},classes:{tooltip_dark:true},prepareContent:function e(){this.content=new r({el:false,template:a})}})},1570:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="tooltip__custom tooltip__custom_justify"><p class="tooltip__text tooltip__text_bold">'+this.tr("Extended License")+'</p><p class="tooltip__text tooltip__text_line">'+this.tr("Files under the Extended license can be<br /> downloaded using On Demand Downloads<br /> for Extended License only.")+"</p></div>";return i}},1571:function(e,t,i){"use strict";var a=i(2);var r=i(24);var s=i(123);var n=["US","GB","LR","MM"];var o=[{id:"ds",bit:8}];e.exports=a.extend({defaults:{file:null,product:null,defaultUnits:true,units:"inch",chosen:""},makeUniqueEnterprisePriceList:function e(t){var i={};return t.filter((function(e){if(!i[e.id]){i[e.id]=true;return true}return false}))},makeStandardLicensePriceList:function e(t){var i=this;return t.filter((function(e,t,a){var r=a.find((function(t){return t.id===e.id&&t.licenseBit!==e.licenseBit}));return!r||i.app.licensor.getFileSizePrice(r,i.get("product")).cost>i.app.licensor.getFileSizePrice(e,i.get("product")).cost}))},buildTable:function e(t){var i=this.app.user.isEnterprise()?this.makeUniqueEnterprisePriceList(this.app.licensor.getLicensableSizesForFile(t,undefined,true)):this.makeStandardLicensePriceList(this.app.licensor.getLicensableSizesForFile(t));this.set({chosen:this.get("chosen")||this.getDefaultSize(i)});return{head:this.buildHead(t),body:this.buildBody(t,i)}},getDefaultSize:function e(t){if(!t.length){return""}var i=t.filter((function(e){return o.some((function(t){return!Object.keys(t).every((function(i){return t[i]===e[i]}))}))}));var a=i.filter((function(e){return e.licenseBit===1||e.bit===8})).pop();var r=i.length?i:t;return a?a.id:r[r.length-1].id},buildHead:function e(t){return[{label:this.app.tr("Resolution"),switcher:null},{label:t.get("type")==="video"?this.app.tr("Rate"):this.app.tr("Size"),switcher:t.get("type")==="video"?null:[{key:"inch",label:this.app.tr("Inches"),active:this.getUnits()==="inch"},{key:"cm",label:this.app.tr("Cm"),active:this.getUnits()==="cm"}]},{label:this.app.user.isEnterprise()?this.app.tr("License"):this.app.tr("Price"),switcher:null}]},buildBody:function e(t,i){var a=this;var r=this.get("chosen");var s=this.get("product");return i.map((function(e){return a.row(t,e,s,r)}))},row:function e(t,i,a,r){var n=this.app.licensor.getLicenseByBit(i.licenseBit);var o=this.getUnits();var l=this.app.user.isEnterprise()?this.makeLicense(t,i):this.makePrice(t,i,a,n);return{key:i.id,indicator:this.makeIndicator(i),label:s.makeSizeLabel(t.attributes,i),extension:i.extension,size:s.makeSize(t,i,o),license:a.bit_price===16&&!a.dummy&&!t.get("free")?this.app.licensor.getLicenseById(2):n,price:l,fileID:t.get("id"),active:i.id===r,purchase:!this.app.user.isEnterprise()&&t.getPurchase(i.id)||{},nextUnit:o==="inch"?"cm":"inch"}},makeIndicator:function e(t){return t.labels.short.toLowerCase().replace(/p/,"")},makePrice:function e(t,i,a,s){var n=this.app.licensor.getFileSizePrice(i,a);var o=t.get("free")&&s.id!==2||n&&n.cost===0;var l=a.type==="credits"?this.getPriceKoef(t,this.app.user,i):1;var c=n?r.formatPrice(n.cost):null;var u=l<1?r.formatPrice(n.cost*l):null;var d=this.makePriceLabel(a,c,u,o);var h=o||n>1||n&&n.cost>1||a.type==="credits";return{free:o,value:c,labeled:d,discounted:u,isCustom:h}},makePriceLabel:function e(t,i,a,r){if(r){return this.app.tr("Free")}if(i==null){return"-"}if(t.type==="credits"){var s=a&&a!==i?"<s>"+i+"</s> "+a:i;return this.app.features.isFeatureOnValue("File View Classic")?i:this.app.tr("%s Credits",[s])}if(i===1&&!this.app.features.isFeatureOnValue("File View Classic")){return""}return i!==1?this.app.tr("%s Downloads",[i]):this.app.tr("%s Download",[i])},getPriceKoef:function e(t,i,a){var r=t.get("type")==="vector"?"image":t.get("type");var s=t.get("discount")||0;var n=this.app.user.get("id")?i.get("discounts").items&&i.get("discounts").items[r]&&i.get("discounts").items[r][a.id]:0;n*=100;return a.license==="extended"&&t.get("discount")==="100"?1:1-Math.max(s,n)/100},makeLicense:function e(t,i){var a=t.isLicensed(i.id);return{free:false,isLicensed:a,labeled:a?this.app.tr("Licensed"):this.app.tr("Not Licensed")}},getUnits:function e(){var t=n.indexOf(this.app.config.country)>=0?"inch":"cm";if(this.changed.units){this.secureSet({defaultUnits:false})}if(this.get("defaultUnits")&&this.get("units")!==t){this.secureSet({units:t})}return this.get("units")}})},1572:function(e,t,i){"use strict";e.exports=function e(t){var i="<span>";if(t.offerUrl){i+='<a class="price-table-trial-button button button-xxxl button-pill _start-trial" href="'+t.offerUrl+'">'+this.tr("Start Free Trial")+"</a>"}i+="</span>";return i}},1573:function(e,t,i){},1574:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}i(1575);var n=i(17);var o=i(548);var l=i(1576);var c=i(546);var u=i(547);var d=i(672);var h=i(1577);var p=i(24),f=p.classNames;var v=i(560);e.exports=c.extend({name:"DownloadMethodSelector",el:false,template:l,viewMode:"page",classNames:"",onlyDesktopView:false,mobileTablets:false,events:{"click ._methods":"togglePlansToolTip"},globals:{click:"onGlobalClick","resize window":"onWindowResize"},initialize:function e(){this.userPlansManager=this.userPlansManager||this.app.store.get("UserPlansManager");this.listenTo(this.userPlansManager,"change",this.render);if(this.collection){this.listenTo(this.collection,"reset",this.render)}},prepareRender:function e(){if(this.userPlansManager.get("available").length&&this.shouldBeShown()){return true}if(this.$el&&this.$el.hide){this.$el.hide()}return false},serialize:function e(){var t;return r({viewMode:this.viewMode,classNames:f((t={},t[this.classNames]=true,t["download-method_white"]=this.viewMode==="page",t["download-method_black"]=this.viewMode==="modal",t))},this.userPlansManager.get("preferred"))},clientAfterRender:function e(){if(this.getView("PlansTooltip")&&this.getView("PlansTooltip").isOpen()){this.getView("PlansTooltip").repin(this.$("._methods"))}if(!this.onlyDesktopView&&v.mobileTablets()){this.makePlansListMobile()}else{this.makePlansList()}},makePlansList:function e(){this.setNotExistView("PlansTooltip",u,{name:"PlansTooltip",keep:true,params:o.Products,classes:{"tooltip_extra-shadow":true,"tooltip_not-border":true,tooltip_rounding:true},content:new d({app:this.app,plans:this.userPlansManager,handleProductClick:false,chooseProductCallback:this.onChoosePlan.bind(this)})})},makePlansListMobile:function e(){var t=new h({viewMode:this.viewMode,app:this.app,plans:this.userPlansManager,chooseProductCallback:this.onChoosePlan.bind(this)});this.setView("._mobile-products",t);t.render().promise().then((function(e){return n.$("._mobile-products").append(e.$el)}))},shouldBeShown:function e(){return true},onGlobalClick:function e(t){t.stopPropagation();this.hidePlansToolTip()},onWindowResize:function e(){if(!this.onlyDesktopView){var t=v.mobileTablets();if(t!==this.mobileTablets){this.mobileTablets=t;if(this.mobileTablets){if(this.getView("PlansTooltip")){this.getView("PlansTooltip").remove()}this.makePlansListMobile()}else{if(this.getView("._mobile-products")){this.getView("._mobile-products").remove()}this.makePlansList()}}}},onChoosePlan:function e(t){this.hidePlansToolTip();this.userPlansManager.set({preferred:t});this.chooseProductCallback(t)},togglePlansToolTip:function e(t){t.preventDefault();t.stopPropagation();if(this.getView("._mobile-products")){this.getView("._mobile-products").toggle(t)}if(this.getView("PlansTooltip")){this.getView("PlansTooltip").toggle(t)}},hidePlansToolTip:function e(){if(this.getView("._mobile-products")){this.getView("._mobile-products").hide()}if(this.getView("PlansTooltip")){this.getView("PlansTooltip").hide()}},chooseProductCallback:function e(){}})},1575:function(e,t,i){},1576:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="download-method '+i(t.classNames)+'"><div class="download-method__method _methods"><i class="download-method__icon download-method__icon_'+i(t.type)+'"></i><span class="download-method__title">'+this.tr("Download Using")+':</span><span class="download-method__description">'+this.tr(t.baseLabel)+" "+i(t.serialIndex||"")+'<input class="download-method__radio" type="radio" name="method" value="'+i(t.type)+'" /></span><i class="download-method__arrow arrow _arrow"></i></div><div class="download-method__products-box _mobile-products"></div></div>';return a}},1577:function(e,t,i){"use strict";var a=i(0);var r=i(17);var s=i(1578);var n=i(546);var o={credits:{},subscription:{},ondemand:{},membership:{},imagepack:{}};o.credits.View=i(625);o.credits.template=i(667);o.subscription.View=i(623);o.subscription.template=i(668);o.ondemand.View=i(624);o.ondemand.template=i(669);o.imagepack.View=i(665);o.imagepack.template=i(670);o.membership.View=i(618);o.membership.template=i(671);e.exports=n.extend({name:"UserProductsListMobile",el:false,template:s,viewMode:"modal",linksEnabled:false,plans:undefined,events:{"click ._product":"onUserProductClick"},initialize:function e(){this.listenTo(this.app.user,"sync",this.render)},prepareRender:function e(){a.each(this.plans.serializeUserPlans(),(function(e){this.insertView("._list",this.getProductView(e))}),this)},serialize:function e(){return{products:this.plans.serializeUserPlans()}},getProductView:function e(t){var i=this.linksEnabled?this.app.makeUrl("subscribe",{backURL:true}):"";var a=o[t.type];if(!a){return null}return new a.View({app:this.app,template:a.template,product:t,serializeParams:{href:i}})},onUserProductClick:function e(t){if(!this.linksEnabled){t.stopPropagation();t.preventDefault()}this.chooseProductCallback(this.plans.serializeUserPlans()[r.$(t.currentTarget).index()])},toggle:function e(){this.$el.toggle();if(this.viewMode==="modal"){this.app.observer.fire("Modal:CheckSize")}},hide:function e(){this.$el.hide();if(this.viewMode==="modal"){this.app.observer.fire("Modal:CheckSize")}},chooseProductCallback:a.noop})},1578:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="user-plans-list user-plans-list_mobile _list"></div>';return i}},1579:function(e,t,i){},1594:function(e,t,i){"use strict";var a=i(1048);e.exports={set:function e(t,i){if(i===void 0){i="membership_collection_curated"}if(!t){throw new Error("PresetOffers: app is required.")}if(t.store.get("PresetOffers")){return}t.store.link("PresetOffers",new a([],{getQueryParams:{group:i},app:t})).fetch()}}},1595:function(e,t,i){"use strict";var a=i(0);var r=i(548);var s=i(556);var n=i(1707);var o=i(869);var l=i(546);var c=i(547);var u=i(764);var d=i(571),h=d.formatFilePublicationDate;var p=l.extend({name:"FileInfo",el:false,template:n,viewMode:"page",isMobileMode:false,events:{"mouseenter ._editorial-tooltip":"handleEditorialTooltipShow","mouseleave ._editorial-tooltip":"handleEditorialTooltipHide","click ._link":"onLinkClick","contextmenu ._link":"onLinkCustomClick","mouseup ._link":"onLinkCustomClick","click ._zoom-image":"onZoomImage","click ._copy-id":"handleCopyIdClick","mouseenter ._copy-id":"handleCopyTooltipShow","mouseleave ._copy-id":"handleCopyTooltipHide"},prepareRender:function e(){this.isMobileMode=this.isMobileModeEnabled();if(this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")){this.setMatchMedia(this.render.bind(this))}},serialize:function e(){return{isEnterpriseUser:this.app.user.isEnterprise(),file:this.model.serialize(),published:h(this.app,this.model.get("published")),products:this.viewMode==="page"?this.app.user.serializeUserPlans():[],viewMode:this.viewMode,subscribeLink:this.app.makeUrl("subscribe",{backURL:true,query:{ref:this.model.get("id")}}),portfolioLink:this.getPortfolioLink(),avatar:this.model.get("avatar")||this.app.user.avatar.constructor.prototype.defaults.default,downloadThumb:this.model.makeThumb("max"),isUpgraded:this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")&&this.isMobileMode,isItemPropEnabled:!this.app.features.isFeatureOnValue("JSON for Linked Data"),shouldShowUploadDate:this.app.features.isFeatureOnValue("Show item upload date")&&this.model.get("type")!=="video"}},clientAfterRender:function e(){var t=this;if(this.model.get("editorial")){this.setNotExistView("editorialTooltip",c,{params:r.ViewInfoEditorial,content:new l({el:false,template:o})})}if(this.viewMode==="page"&&this.app.features.isFeatureOnValue("File View Page Upgrade")){this.setNotExistView("copyTooltip",c,{params:r.darkTitle,classes:{tooltip_dark:true},content:new l({el:false,template:function e(){return t.tr("Click to copy to clipboard")}})})}},getPortfolioLink:function e(){var t={};if(this.viewMode==="page"){t.absolute=true}else if(this.app.user.isEnterprise()&&this.app.store.get("SearchQuery")){var i=this.app.store.get("SearchQuery").getNonDefaults(["dataSource"]);if(a.has(i,"dataSource")){t.query={data_source:i.dataSource}}}return this.app.makeUrl({route:"Search",seller:this.model.get("sellerId")},t)},handleEditorialTooltipShow:function e(t){this.getView("editorialTooltip").show(t)},handleEditorialTooltipHide:function e(t){this.getView("editorialTooltip").hide(t)},handleCopyIdClick:function e(){this.el.querySelector("._item-id").select();document.execCommand("copy");this.app.observer.fire("Notification",{type:"tooltip",message:this.tr("Copied to clipboard")})},handleCopyTooltipShow:function e(t){this.getView("copyTooltip").show(t)},handleCopyTooltipHide:function e(t){this.getView("copyTooltip").hide(t)},onLinkClick:function e(t){if(t.ctrlKey||t.shiftKey||t.metaKey){this.trackLinkNewTabClick(t);return}t.preventDefault();var i=t.currentTarget.dataset.target;if(i==="portfolio"){this.app.observer.broadcast("Track:UE:Portfolio:Click",{sellerId:this.model.get("sellerId")})}else if(i==="file"){this.app.observer.broadcast("Track:UE:File:OpenFileView",{view:this.name,file:this.model})}this.app.router.redirect(t.currentTarget.href)},onLinkCustomClick:function e(t){if(![s.rightMouse,s.middleMouse].includes(t.which)){return}this.trackLinkNewTabClick(t)},trackLinkNewTabClick:function e(t){var i;var a=t.currentTarget.dataset.target;if(a==="portfolio"){i={source:"Portfolio",target:{target:"search"},params:{sellerId:this.model.get("sellerId")}}}else if(a==="file"){i={source:this.name,target:{target:"fileView",targetId:this.model.id},params:{id:this.model.id}}}this.app.observer.broadcast("Track:UE:ContextMenu:Open",i)},enabledCuratedCollection:function e(){},onZoomImage:function e(){}});Object.assign(p.prototype,u);e.exports=p},1596:function(e,t,i){"use strict";i(1536);var a=i(556);var r=i(17),s=r.$;var n=i(1597);var o=i(546);var l=i(24),c=l.classNames;e.exports=o.extend({name:"LinksWithImage",el:false,template:n,actions:{remove:false},events:{"click ._item":"onItemClick","contextmenu ._item":"onCustomLinkClick","mouseup ._item":"onCustomLinkClick","click ._remove-query":"onRemoveLinkClick"},initialize:function e(){this.listenTo(this.collection,"reset update",this.render)},serialize:function e(){var t=this.getItems();return{items:t,actions:this.actions,classes:c({"links-list_maxsize":t.maxRowSize,"links-list_multi-rows":t.multiRows})}},getItems:function e(){var t=this;var i=this.collection.serialize().map((function(e){return{id:e.searchId,link:t.getLink(e),query:e.query,img:e.img}}));if(!this.config||!i.length){return i}var a=this.config,r=a.rowLimit,s=a.rowLimitExtra;var n=r+s;var o=i.length===n||i.length>r*2?n:r;i.maxRowSize=o===n;i.multiRows=i.length>n;if(i.length%o!==0){var l=o-i.length%o;for(var c=0;c<l;c+=1){i.push({isPlaceholder:true})}}return i},getItemBySearchId:function e(t){return this.collection.findWhere({searchId:t})},onItemClick:function e(t){var i=this.getItemBySearchId(t.currentTarget.dataset.id);if(t.ctrlKey||t.shiftKey||t.metaKey){this.onItemContextClickCallback(i);return}t.preventDefault();this.onItemClickCallback(i);this.app.router.redirect(this.getLink(i.serialize()))},onCustomLinkClick:function e(t){if(![a.rightMouse,a.middleMouse].includes(t.which)){return}this.onItemContextClickCallback(this.getItemBySearchId(t.currentTarget.dataset.id))},onRemoveLinkClick:function e(t){var i=this;t.stopPropagation();t.preventDefault();var a=s(t.currentTarget).parents("[data-id]").data("id");if(this.collection.length===1){this.$el.slideUp(this.config.removeSpeed,(function(){i.collection.get(a).destroy()}))}else{this.collection.get(a).destroy()}},getLink:function e(){},onItemClickCallback:function e(){},onItemContextClickCallback:function e(){}})},1597:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="links-list '+t.classes+'">';var r=t.items;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];if(s.isPlaceholder){a+='<div class="links-list__item links-list__item_empty"><div class="links-list__placeholder"></div></div>'}else{a+='<div class="links-list__item _item" data-id="'+i(s.id)+'"><a class="links-list__link _link" href="'+s.link+'" title="'+i(s.query)+'">';if(s.img){a+='<span class="links-list__bg" style="background-image: url('+i(s.img)+')"></span>'}a+='<span class="links-list__text">'+i(s.query)+"</span>";if(t.actions.remove){a+='<i class="links-list__reset button-reset _remove-query"></i>'}a+="</a></div>"}}}a+="</div>";return a}},1642:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view__link-content search-similar-box '+i(t.classNames)+'">';if(t.displayAsLink){a+='<a class="file-view__link-button button" href="'+t.url+'"><i class="search-similar-box__icon icon '+i(t.iconClassNames)+'"></i><span class="search-similar-box__text">'+i(t.btnText)+"</span></a>"}else{a+='<button class="file-view__link-button button _find-similar-btn"><i class="search-similar-box__icon icon '+i(t.iconClassNames)+'"></i><span class="search-similar-box__text">'+i(t.btnText)+"</span></button>"}a+="</div>";return a}},1684:function(e,t,i){},1685:function(e,t,i){},1700:function(e,t,i){"use strict";var a=i(0);var r=i(24);var s=i(28);var n=i(117);e.exports=s.extend({url:"FileViewRelated",model:n,initialize:function e(t,i){this.store=a.clone(i)},getQueryParams:function e(){return a.clone(this.store)},parse:function e(t,i){t.result=r.beautifyApiResponse(t.items||t.result||[]);i.parser="parseFromSearch";return s.prototype.parse.call(this,t.result,i)}})},1701:function(e,t,i){"use strict";var a=i(2);e.exports=a.extend({url:"MinPrices",defaults:{image:null,vector:null,video:null,editorial:null,currency:null},getQueryParams:function e(){return this.pickDefaultsFrom(this.attributes)},parse:function e(t){if(t===void 0){t={}}return this.pickDefaultsFrom(t.data)}})},1702:function(e,t,i){"use strict";var a=i(0);var r=i(2);var s=r.extend({url:"itemViewedInternal",getQueryParams:function e(){return a.clone(this.attributes)}},{write:function e(t,i){return new s(t,i).save()}});e.exports=s},1703:function(e,t,i){"use strict";(function(t){function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(0);var o=i(1704);var l=i(1705);var c=i(869);var u=i(548);var d=i(23).fileViewButtons;var h=i(823);var p=i(546);var f=i(774);var v=i(547);var m=i(1087);var b=i(1045);var g=i(78);var _=i(560);var w=i(1076);var y=i(24),k=y.classNames;var x=i(571);var C=i(740),S=C.getSpecifications,T=C.isSpecified;var M=10;var P=200;var L=1;var O={default:{width:450,height:450},compact:{width:450,height:380}};var E=p.extend({name:"FileViewThumb",el:false,insert:true,props:{},template:o,amp:l,viewMode:"page",preloadFileSize:"huge",player:null,dimensions:{},shouldShowTextInside:false,isCartBtnEnabled:true,isFavoriteBtnEnabled:true,showDownloadButtonInZoomMode:false,enableListThroughNavigation:false,shouldFixFrameSize:false,showFileId:false,classNamesType:"regular",classNamesMap:{regular:{video:"view-file-box_video",image:"view-file-box_image",fixed:"view-file-box_fixed-size",share:"view-file-box_share",shareActive:"view-file-box__share_active",descriptionShort:"view-file-box__description_short"},upgrade:{video:"file-thumb_video",image:"file-thumb_image",fixed:"file-thumb_fixed-size",share:"file-thumb_share",shareActive:"file-thumb__share-box_active",descriptionShort:"file-thumb__description_short"}},events:{"click ._zoom-btn":"zoomIn","click ._zoom-image":"zoomIn","click ._to-cart":"onAddToCart","click ._to-favorites":"onFavoritesClick","click ._share":"onShareClick","click ._share-close":"onShareCloseClick","click ._share-button":"onShareButtonClick","click ._download_comp":"onDownloadCompClick","click ._file-box-description":"onFileBoxDescriptionClick","mouseenter ._editorial-tooltip":"handleEditorialTooltipShow","mouseleave ._editorial-tooltip":"handleEditorialTooltipHide","mouseenter ._action-item":"handleActionTooltipShow","mouseleave ._action-item":"handleActionTooltipHide"},globals:{"resize window":"onWindowResize"},initialize:function e(){var t=this;this.props=h.FileViewThumb(this.app);this.preloadFileSize=this.getThumbSize();this.listenTo(this.app.observer,{"Cart:added":function e(i){return t.markCart(true,i.fileId)},"Cart:removed":function e(i){return t.markCart(false,i.fileId)},"Favorites:PanelCacheUpdate":this.markFavorites})},prepareRender:function e(){var t="huge";if(this.viewMode==="page"&&this.app.features.isFeatureOnValue("File View Page Upgrade")&&this.model.get("type")!=="video"){t="max"}else if(this.useBroadSize()&&!this.useHugeSize()){t="broad"}else if(this.viewMode==="modal"&&this.app.features.isFeatureOnValue("File View Modal Image Max Thumb")&&this.model.get("type")!=="video"){this.compactMode=_.desktopMedium();t=this.compactMode?"huge":"modal"}this.dimensions=g.getThumbSizes(this.model.serialize(),t)},getThumbSize:function e(){var t="huge";if(this.useMaxModalSize()||this.useBroadSize()&&!this.useHugeSize()){t="large"}if(this.useMaxSize()){t="max"}return t},useBroadSize:function e(){return this.viewMode==="page"&&this.app.features.isFeatureOnValue("File View Classic")&&this.app.features.isFeatureOnValue("Broad size file view")},useMaxSize:function e(){return this.viewMode==="page"&&this.model.get("type")!=="video"&&this.app.features.isFeatureOnValue("File View Classic")&&this.app.features.isFeatureOnValue("Max size file view")},useHugeSize:function e(){return this.viewMode==="page"&&this.model.get("type")==="video"&&this.model.get("hasHugeVideoThumb")&&this.app.features.isFeatureOnValue("Broad size file view")},useMaxModalSize:function e(){return this.viewMode==="modal"&&this.model.get("type")!=="video"&&this.app.features.isFeatureOnValue("File View Modal Image Max Thumb")},serialize:function e(){var t=this.getThumbSize();var i=this.model.serialize();return r({fileViewBoxClassNames:this.getFileViewBoxClassNames(),isEnterpriseUser:this.app.user.isEnterprise(),file:x.injectFilesSEOMeta(this.app,i),dimensions:this.dimensions,thumb:{hasLabel:g.hasLabel(i,t),src:this.model.makeThumb(t),preload:this.model.makeThumb(this.preloadFileSize),preloadMax:this.model.get("hasHugeImageThumb")||this.model.get("hasHugeVectorThumb")?this.model.makeThumb("max"):"",seo:this.model.makeThumb("max"),download:this.model.get("type")==="video"?this.getVideoThumb():this.model.makeThumb("max")},viewMode:this.viewMode,canDownloadComp:this.app.user.isLoggedIn(),actionsSmallMode:this.checkActionsSmallMode(),isCartBtnEnabled:this.checkCartBtnEnabled(),isFavoriteBtnEnabled:this.isFavoriteBtnEnabled,showVKSocial:this.app.lang==="ru",hideDescription:false,infoIndicators:this.getInfoIndicators(),shouldShowFileId:this.shouldShowFileId,shouldShowTextInside:this.dimensions.h>P&&this.shouldShowTextInside,isModifyDescriptionWidth:this.model.get("width")/this.model.get("height")<L&&!this.shouldShowTextInside,videoPlaceholderStyles:this.getVideoPlaceholderStyles(),shareButtonsList:this.getShareButtonsList(),fileSizeLimits:this.getFileSizeLimits(),shouldShowActions:!this.model.isBannedForCountry()},this.props)},checkCartBtnEnabled:function e(){return!this.app.user.isEnterprise()&&this.isCartBtnEnabled&&!this.app.features.isFeatureOnValue("Is cart hidden")},getShareButtonsList:function e(){var t=S(this.app);var i=[{name:"twitter",title:"Tweet",width:730,height:420,rel:"nofollow",className:"button-social-twitter"},{name:"facebook",title:"Facebook",width:650,height:370,rel:"nofollow",className:"button-social-facebook"},{name:"pinterest",title:"Pinterest",width:700,height:370,rel:"nofollow",className:"button-social-pinterest"},{name:"vk",title:"VK",width:700,height:370,rel:"nofollow",className:"button-social-vk",isSpecified:t.isRuLang}];return i.filter(T)},getFileSizeLimits:function e(){var t=this.model.get("width");var i=this.model.get("height");var a={width:1024,height:740};var r=a.width/a.height;var s=t/i;if(s>r){return{width:a.width,height:Math.floor(a.width/s)}}return{width:Math.floor(s*a.height),height:a.height}},getVideoThumb:function e(){var t=this.model.getVideoThumbs("huge");return t.mp4||this.app.features.isFeatureOnValue("Is webm video thumb allowed")&&t.webm||t.ogg||this.model.makeThumb("huge")},getInfoIndicators:function e(){if(this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")&&this.model.get("type")==="video"&&this.viewMode==="page"){return[{value:this.model.get("mp")+"s",iconClass:"icon-clock-light"},{value:this.model.get("ar"),iconClass:"icon-aspectratio-light"}]}return[]},getFileViewBoxClassNames:function e(){var t;var i=this.model.get("type")==="video";return k((t={},t[this.classNamesMap[this.classNamesType].video]=i,t[this.classNamesMap[this.classNamesType].image]=!i,t[this.classNamesMap[this.classNamesType].fixed]=!i&&this.shouldFixFrameSize,t))},getVideoPlaceholderStyles:function e(){return"width:"+this.dimensions.w+"px;padding-top:"+(this.dimensions.h/this.dimensions.w*100).toFixed(2)+"%"},clientAfterRender:function e(){var t=this;if(this.model.get("type")==="video"){this.enableVideoPlayer()}else if(this.shouldFixFrameSize){this.setFrameSize()}if(this.model.get("editorial")){this.initEditorialToolTip()}if(this.model.get("type")!=="video"){m(this.$("._image"))}b(this.$el.find("._draggable-box"),this,{helperOptions:{app:this.app,mode:"filePage",defaults:this.serialize.bind(this),getModel:function e(){return t.model.serialize()}}});this.initSocial();this.markFavorites()},cleanup:function e(){if(this.getView("FilePreviewVideo")){this.getView("FilePreviewVideo").remove()}},checkActionsSmallMode:function e(){return this.dimensions.h<=100},setFrameSize:function e(){var t;var i=O[this.app.features.isFeatureOnValue("Price Table Upgrade")?"compact":"default"];var a=_.mobileMode()?Math.min(this.$el.width(),i.width):this.$el.width();if(this.dimensions.w/this.dimensions.h>=i.width/i.height){t=this.dimensions.w<this.dimensions.h?a*this.dimensions.w/this.dimensions.h:a}else{t=i.height*this.dimensions.w/this.dimensions.h}this.$("._file-box").css({maxWidth:Math.ceil(t)+"px"});this.$("._image-box").css({paddingBottom:"calc(100% / ("+this.dimensions.w+" / "+this.dimensions.h+"))"})},enableVideoPlayer:function e(){this.setView("FilePreviewVideo",new f({app:this.app,$mount:this.$("._video-placeholder"),$poster:this.$("._video-poster"),file:this.model,blackBackground:this.viewMode==="modal",viewMode:this.viewMode})).render()},zoomIn:function e(t){t.stopPropagation();t.preventDefault();this.app.store.get("ModalsManager").show("ZoomModal",{placeholderSRC:this.getZoomPlaceholderSRC(),model:this.model,collection:this.collection,app:this.app,single:false,showDownloadButton:this.showDownloadButtonInZoomMode,onDownloadCallback:this.zoomDownloadCallback.bind(this),afterRenderCallback:this.afterRenderCallback.bind(this),enableListThroughNavigation:this.enableListThroughNavigation,zoomShowCallback:this.zoomShowCallback.bind(this),zoomHideCallback:this.zoomHideCallback.bind(this),isFirstItem:this.isFirstItem,isLastItem:this.isLastItem,zoomLeftCallback:this.zoomLeftCallback.bind(this),zoomRightCallback:this.zoomRightCallback.bind(this),rightEdgeCallback:this.rightEdgeCallback.bind(this),leftEdgeCallback:this.leftEdgeCallback.bind(this)}).catch((function(){}));this.$("._zoom-image").removeAttr("data-preload-max")},getZoomPlaceholderSRC:function e(){return this.model.get("hasHugeImageThumb")||this.model.get("hasHugeVectorThumb")?this.$("._zoom-image").attr("data-preload-max"):this.$("._zoom-image").attr("src")},onWindowResize:n.throttle((function(){var e=t.browser?_.desktopMedium():this.compactMode;if(e!==this.compactMode){this.compactMode=e}}),M),onFavoritesClick:function e(t){t.stopPropagation();t.preventDefault();this.app.observer.broadcast(this.model.get("inFavorites")?"Track:UE:File:RemoveFromFavorites":"Track:UE:File:AddToFavorites",{id:this.model.get("id"),file:this.model.serialize(),position:0,view:this.name});if(!this.model.get("inFavorites")){this.app.store.link("FileForFavorite",this.model)}this.app.observer.fire("Favorites:ToggleFile",{id:this.model.get("id")})},onAddToCart:function e(t){var i=this;t.stopPropagation();t.preventDefault();if(!this.model.get("inCart")&&!this.app.user.isLoggedIn()){this.app.store.get("ModalsManager").show("SignupModal",{app:this.app,title:this.tr("Add to Cart?"),subTitle:this.model.get("type")==="video"?this.tr('<span class="%s">Create your Account</span> to add this video to your Cart',"sub-text"):this.tr('<span class="%s">Create your Account</span> to add this image to your Cart',"sub-text")}).then((function(){return i.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:i.name+"/addToCart"})})).catch((function(){}))}this.app.observer.fire(this.model.get("inCart")?"Cart:remove":"Cart:add",{fileId:this.model.get("id")});this.app.observer.broadcast(this.model.get("inCart")?"Track:UE:File:RemoveFromCart":"Track:UE:File:AddToCart",{id:this.model.get("id"),file:this.model.serialize(),position:0,view:this.name})},onShareClick:function e(){this.$("._file-box").addClass(this.classNamesMap[this.classNamesType].share);this.$("._share-box").addClass(this.classNamesMap[this.classNamesType].shareActive)},onShareCloseClick:function e(){this.$("._file-box").removeClass(this.classNamesMap[this.classNamesType].share);this.$("._share-box").removeClass(this.classNamesMap[this.classNamesType].shareActive)},onDownloadCompClick:function e(t){var i=this;if(!this.app.user.isLoggedIn()){t.stopPropagation();t.preventDefault();this.app.store.get("ModalsManager").show("SignupModal",{app:this.app}).then((function(){return i.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:i.name+"/downloadComp"})})).catch((function(){}))}this.app.observer.broadcast("Track:UE:File:CompDownload",{file:this.model,option:"comp"})},onFileBoxDescriptionClick:function e(t){var i=this.$("._file-box-description");if(_.mobileMode()&&i.hasClass(this.classNamesMap[this.classNamesType].descriptionShort)){t.preventDefault();t.stopPropagation();i.removeClass(this.classNamesMap[this.classNamesType].descriptionShort)}},handleEditorialTooltipShow:function e(t){this.getView("editorialTooltip").show(t)},handleEditorialTooltipHide:function e(t){this.getView("editorialTooltip").hide(t)},handleActionTooltipShow:function e(t){this.setNotExistView("actionTooltip",v,{params:u.darkTitle,classes:{tooltip_dark:true},content:new p({el:false,template:function e(){return t.currentTarget.getAttribute("data-title")}})});this.getView("actionTooltip").show(t)},handleActionTooltipHide:function e(){this.removeActionTooltip()},removeActionTooltip:function e(){var t=this.getView("actionTooltip");if(t){t.remove()}},initEditorialToolTip:function e(){this.setNotExistView("editorialTooltip",v,{params:u.ViewInfoEditorial,classes:{tooltip_dark:this.app.features.isFeatureOnValue("File View Page Upgrade")},content:new p({el:false,template:c,serialize:function e(){return{extendedMessage:true}}})})},initSocial:function e(){var t={facebook:1,twitter:2,google:3,pinterest:4};if(this.app.lang==="ru"){t.vk=5}this.initSocialButtons({socialNameMap:t,shareData:{title:this.model.get("title"),description:this.model.get("description"),image:this.model.makeThumb("huge")}})},markCart:function e(t,i){var a;if(!i.includes(this.model.get("id"))){return}var r=this.app.features.isFeatureOnValue("File View Page Upgrade")?"data-title":"title";var s=t?"removeFromCart":"addToCart";var n=d.find((function(e){return e.key===s})).label;this.model.set({inCart:t});this.$("._label-in-cart").toggleClass("hidden",!t);this.$("._to-cart").toggleClass("active",t).attr((a={},a[r]=n,a));this.removeActionTooltip()},markFavorites:function e(){var t;var i=this.app.store.get("FolderCache");if(!i){return}var a=this.app.features.isFeatureOnValue("File View Page Upgrade")?"data-title":"title";var r=!!i.get(this.model.get("id"));var s=r?"removeFavorites":"addToFavorites";var n=d.find((function(e){return e.key===s})).label;this.model.set({inFavorites:r});this.$("._label-in-favorites").toggleClass("hidden",!r);this.$("._to-favorites").toggleClass("active",r).attr((t={},t[a]=n,t));this.removeActionTooltip()},afterRenderCallback:function e(){},zoomDownloadCallback:function e(){},zoomShowCallback:function e(){},zoomHideCallback:function e(){},zoomLeftCallback:function e(){},zoomRightCallback:function e(){},rightEdgeCallback:function e(){},leftEdgeCallback:function e(){}});Object.assign(E.prototype,w);e.exports=E}).call(this,i(16))},1704:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view__thumb-wrapper" data-id="'+i(t.file.id)+'"><div class="file-box view-file-box _file-box '+i(t.fileViewBoxClassNames)+'"><div class="view-file-box__holder ';if(t.shouldShowTextInside){a+="view-file-box__holder_text-inside"}a+=' _file-box-holder"><div class="view-file-box__box _draggable-box">';if(t.file.type==="video"){a+='<div class="view-file-box__video _video-placeholder"><div class="view-file-box__video-placeholder" style="'+t.videoPlaceholderStyles+'"></div><img class="view-file-box__video-poster view-file-box__video-poster_absolute _video-poster" src="'+t.thumb.src+'"width="'+t.dimensions.w+'" height="'+t.dimensions.h+'"';if(t.thumb.preload){a+=' data-preload="'+t.thumb.preload+'"'}a+='alt="'+t.file.seoAlt+'" title="'+t.file.seoTitle+'" /><i class="view-file-box__play-video icon-play-video"></i></div>'}else{a+='<a class="view-file-box__image-box view-file-box__image-box_label view-file-box__image-clear _image-box" href="'+t.thumb.download+'"><img class="view-file-box__image';if(t.dimensions.w>=t.dimensions.h){a+=" view-file-box__image_h"}else{a+=" view-file-box__image_v"}a+=" ";if(!t.thumb.hasLabel){a+=" view-file-box__image-clear"}a+=' _image _zoom-image" src="'+t.thumb.src+'" ';if(t.thumb.preload){a+=' data-preload="'+t.thumb.preload+'"'}else{a+=' data-src="'+t.thumb.seo+'"'}a+=" ";if(t.thumb.preloadMax){a+=' data-preload-max="'+t.thumb.preloadMax+'"'}a+=' width="'+t.dimensions.w+'" height="'+t.dimensions.h+'" alt="'+t.file.seoAlt+'" title="'+this.tr("Download")+" - "+t.file.seoTitle+'" itemprop="image"/></a>'}if(t.shouldShowActions){a+='<div class="view-file-box__action';if(t.actionsSmallMode){a+=" view-file-box__action_small"}if(t.file.type==="video"){a+=" _view-file-box-video"}a+=' _action-box"><span class="view-file-box__action-holder';if(t.viewMode==="modal"&&t.file.editorial){a+=" view-file-box__action-holder_tall"}a+='">';if(t.isCartBtnEnabled){a+='<button class="view-file-box__action-item button-circle button-circle-xl button-add-to-cart';if(t.file.inCart){a+=" active"}a+=' _to-cart"title="';if(t.file.inCart){a+=""+this.tr("Remove from Shopping Cart")}else{a+=""+this.tr("Add to Shopping Cart")}a+='"></button>'}if(t.isFavoriteBtnEnabled){a+='<button class="view-file-box__action-item button-circle button-circle-xl button-add-to-favorites _to-favorites';if(t.file.inFavorites){a+=" active"}a+='"title="';if(t.file.inFavorites){a+=""+this.tr("Remove from Favorites")}else{a+=""+this.tr("Add to Favorites")}a+='"></button>'}if(t.isSharingEnabled){a+='<button class="view-file-box__action-item button-circle button-circle-xl button-share _share" title="'+this.tr("Share")+'"></button>'}if(!t.isEnterpriseUser){a+='<a class="view-file-box__action-item button-circle button-circle-xl button-download _download_comp" ';if(t.canDownloadComp){a+='href="'+t.thumb.download+'?download=true" '}a+='title="'+this.tr("Download Comp")+'"></a>'}a+="</span></div>"}if(t.isSharingEnabled){a+='<div class="view-file-box__share _share-box"><div class="view-file-box__share-container"><div class="view-file-box__share-box"><div class="view-file-box__share-holder"><i class="view-file-box__close icon icon-close-cross icon-close-cross-white _share-close"></i><ul class="view-file-box__list"><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="730" data-height="420" data-title="Tweet" data-social="twitter"><span class="button-circle button-circle-xl button-social-twitter"></span></a></li><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="650" data-height="370" data-title="Facebook" data-social="facebook"><span class="button-circle button-circle-xl button-social-facebook"></span></a></li><li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="700" data-height="370" data-title="Pinterest" data-social="pinterest"><span class="button-circle button-circle-xl button-social-pinterest"></span></a></li>';if(t.showVKSocial){a+='<li class="view-file-box__list-item"><a class="view-file-box__share-item button-social button-social-share _share-button" rel="nofollow" data-width="700" data-height="370" data-title="VK" data-social="vk"><span class="button-circle button-circle-xl button-social-vk"></span></a></li>'}a+="</ul></div></div></div></div>"}a+='<div class="view-file-box__indicator-wrapper">';if(t.infoIndicators.length){a+="<div class='view-file-box__indicator-info'>";var r=t.infoIndicators;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+="<div class='view-file-box__info'><i class=\"icon "+i(s.iconClass)+'"></i>'+i(s.value)+"</div>"}}a+="</div>"}a+='<div class="view-file-box__to-page _to-page"></div><div class="view-file-box__similar-btn _thumb-find-similar"></div><div class="view-file-box__indicator">';if(t.isCartBtnEnabled){a+='<i class="view-file-box__indicator-item label-in-cart _label-in-cart';if(!t.file.inCart){a+=" hidden"}a+='" title="'+this.tr("In Shopping Cart")+'"></i>'}if(t.isFavoriteBtnEnabled){a+='<i class="view-file-box__indicator-item label-in-favorites _label-in-favorites';if(!t.file.inFavorites){a+=" hidden"}a+='" title="'+this.tr("Added to Favorites")+'"></i>'}a+="</div></div>";if(t.file.type!=="video"){a+='<button class="view-file-box__lens file-action-btn file-action-btn_full-screen _zoom-btn"></button>'}if(t.viewMode==="modal"&&t.file.editorial){a+='<div class="view-file-box__editorial-box';if(t.file.type==="video"){a+=" view-file-box__editorial-box-video"}a+='"><span class="view-file-box__editorial"><span class="view-file-box__editorial-text">'+this.tr("Editorial Use Only")+'</span><i class="view-file-box__editorial-icon icon icon-help icon-help-light-active _editorial-tooltip"></i></span></div>'}a+="</div>";if(t.viewMode==="page"&&!t.hideDescription){a+='<p class="view-file-box__description view-file-box__description_short _file-box-description ';if(t.isModifyDescriptionWidth){a+="view-file-box__description_squeezed"}a+='">';if(t.file.type==="video"){a+=""+i(t.file.visibleDescription)+" &mdash; "+this.tr("Video by %s",t.file.sellerName)}else{a+='<a class="view-file-box__description-link _zoom-image" href="'+t.thumb.download+'"><span class="view-file-box__description-text" itemprop="description">'+i(t.file.visibleDescription)+"</span>";if(t.file.type==="vector"){a+=" &mdash; "+this.tr("Vector by %s",t.file.sellerName)}else if(t.file.id!==328593200||this.app.lang!=="ru"){a+=" &mdash; "+this.tr("Photo by %s",t.file.sellerName)}a+="</a>"}if(t.shouldShowFileId){a+='<span class="view-file-box__description-id">| '+this.tr("ID")+": "+i(t.file.id)+"</span>"}a+="</p>"}a+="</div></div></div>";return a}},1705:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view__thumb-wrapper" data-id="'+i(t.file.id)+'"><div class="file-box view-file-box _file-box '+i(t.fileViewBoxClassNames)+'"><div class="view-file-box__holder ';if(t.shouldShowTextInside){a+="view-file-box__holder_text-inside"}a+=' _file-box-holder"><div class="view-file-box__box">';if(t.file.type==="video"){a+='<div class="view-file-box__video _video-placeholder"><amp-video class="view-file-box__video-poster _video-poster" autoplay src="'+t.thumb.download+'"width="'+t.dimensions.w+'" height="'+t.dimensions.h+'"';if(t.thumb.preload){a+=' data-preload="'+t.thumb.preload+'"'}a+='alt="'+t.file.seoAlt+'" title="'+t.file.seoTitle+'" layout="responsive"poster="'+t.thumb.src+'" loop controls></amp-video></div>'}else{a+='<a class="view-file-box__image-box view-file-box__image-box_label view-file-box__image-clear _image-box" href="'+t.thumb.download+'"><amp-img class="view-file-box__image';if(t.dimensions.w>=t.dimensions.h){a+=" view-file-box__image_h"}else{a+=" view-file-box__image_v"}a+=" ";if(!t.thumb.hasLabel){a+=" view-file-box__image-clear"}a+=' _image _zoom-image" src="'+t.thumb.src+'" ';if(t.thumb.preload){a+=' data-preload="'+t.thumb.preload+'"'}else{a+=' data-src="'+t.thumb.seo+'"'}a+=" ";if(t.thumb.preloadMax){a+=' data-preload-max="'+t.thumb.preloadMax+'"'}a+=' width="'+t.dimensions.w+'" height="'+t.dimensions.h+'" layout="intrinsic" alt="'+t.file.seoAlt+'" title="'+this.tr("Download")+" - "+t.file.seoTitle+'" itemprop="image"/></a>'}a+='<div class="view-file-box__indicator-wrapper"><div class="view-file-box__similar-btn _thumb-find-similar"></div></div></div>';if(t.viewMode==="page"&&!t.hideDescription){a+='<p class="view-file-box__description view-file-box__description_short _file-box-description">';if(t.file.type==="video"){a+=""+i(t.file.visibleDescription)+" &mdash; "+this.tr("Video by %s",t.file.sellerName)}else{a+='<a class="view-file-box__description-link _zoom-image" href="'+t.thumb.download+'"><span class="view-file-box__description-text" itemprop="description">'+i(t.file.visibleDescription)+"</span> &mdash; ";if(t.file.type==="vector"){a+=""+this.tr("Vector by %s",t.file.sellerName)}else{a+=""+this.tr("Photo by %s",t.file.sellerName)}a+="</a>"}a+="</p>"}a+="</div></div></div>";return a}},1706:function(e,t,i){"use strict";var a=i(556);var r=i(546);var s=i(24),n=s.capitalize;var o=i(560);var l=2;e.exports=r.extend({name:"FileViewTitle",el:false,viewMode:"page",globals:{"resize window":"onWindowResize"},events:{"click ._title-file":"onTitleClick","contextmenu ._title-file":"onCustomTitleClick","mouseup ._title-file":"onCustomTitleClick"},serialize:function e(){var t=this.model.serialize();return{file:t,title:n(t.title),shouldAddTitleAttr:this.app.user.isLoggedIn()}},clientAfterRender:function e(){this.setTitleWidth()},setTitleWidth:function e(){var t=this.$el.width();if(o.mobileTablets()){this.$el.find("._title-name").css("max-width",t)}else if(this.viewMode==="page"){this.$el.find("._title-name").css("max-width",this.$el.width()-this.$el.find("._title-type").width()-this.$el.find("._title-sep").width()-l)}else if(this.viewMode==="modal"){var i=o.mobilePhone()?2:1.4;var a=Math.floor(t/i);this.$el.find("._title-name").css("max-width",a);this.$el.find("._title-seller").css("max-width",t-a-this.$el.find("._title-sep").width())}},onWindowResize:function e(){this.setTitleWidth()},trackNewTabClick:function e(){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:this.name,target:{target:"fileView",targetId:this.model.get("id")},params:Object.assign(this.model.toTracking(),{view:this.name})})},onTitleClick:function e(t){if(this.viewMode!=="modal"){return}if(t.ctrlKey||t.metaKey){this.trackNewTabClick();return}this.app.observer.broadcast("Track:UE:File:OpenFileView",{file:this.model,view:this.name})},onCustomTitleClick:function e(t){if(![a.rightMouse,a.middleMouse].includes(t.which)||this.viewMode!=="modal"){return}this.trackNewTabClick(t.currentTarget)}})},1707:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view__short-info-wrapper"><div class="file-view__short-info"><a class="file-view__short-info-avatar" href="'+t.portfolioLink+'"><span class="avatar-box avatar-box-m"><img class="avatar avatar-m" src="'+t.avatar+'" alt="'+i(t.file.sellerName)+'"></span></a><div class="file-view__short-info-line"><span class="file-view__short-info-name">'+this.tr("Copyright")+": "+this.seo.space+'</span><span class="file-view__short-info-value"><a class="';if(t.viewMode==="modal"){a+="link-blue-on-dark"}else{a+="link-blue"}a+=' _portfolio" href="'+t.portfolioLink+'"><span';if(t.isItemPropEnabled){a+=' itemprop="author" itemscope itemtype="http://schema.org/Person"'}a+='><span itemprop="name">'+i(t.file.sellerName)+'</span><meta itemprop="url" content="'+i(t.portfolioLink)+'" /></span></a>'+this.seo.space+'<span class="hidden" itemprop="provider">Depositphotos</span></span></div><div class="file-view__short-info-line"><span class="file-view__short-info-name">';if(t.file.type==="video"){a+=""+this.tr("Clip ID")}else if(t.file.type==="vector"){a+=""+this.tr("Vector ID")}else if(t.file.editorial){a+=""+this.tr("Photography ID")}else{a+=""+this.tr("Image ID")}a+=":"+this.seo.space+'</span><span class="file-view__short-info-value">'+i(t.file.id)+"</span></div></div></div>";return a}},1708:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="series-box';if(t.series.className){a+=" "+i(t.series.className)}a+=' _series-box">';var r=t.series.elements;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<a class="series-box__link-poster _link" href="'+(s.url||s.urlVar)+'" style="background-image: url('+i(s.resource.src.jpg)+')">';if(s.trTitle){a+=""+i(s.trTitle)}else{a+=""+i(s.title)}a+="</a>"}}a+="</div>";return a}},1709:function(e,t,i){"use strict";i(1710);var a=i(733);var r=i(1711);var s=i(1712);var n=i(1713);var o=i(546);var l=i(571);var c=4;var u=8;var d={image:8,vector:8,video:6};var h=o.extend({name:"RelatedFiles",el:false,collection:null,template:r,relatedMode:"",viewMode:"page",layout:"wide",className:"",limitClassName:"",maxRows:2,thumbListHolderWidth:1200,title:"",isCartBtnEnabled:true,isFavoriteBtnEnabled:true,isSimilarBtnEnabled:false,displaySeeMoreAsLink:undefined,displaySeeMoreAsThumb:undefined,isSeeMoreAsPseudo:false,lazyLoadOptions:{},isSlidable:false,sliderParams:{},events:{"click ._see-more":"handleSeeMoreClick"},initialize:function e(){if(!this.collection){throw new Error(this.name+" "+this.relatedMode+" "+this.cid+": Related collection required!")}this.applyPropsAutoCorrection();this.listenTo(this.collection,"update reset",this.render)},applyPropsAutoCorrection:function e(){if(this.maxRows!==c&&this.displaySeeMoreAsLink===undefined&&this.displaySeeMoreAsThumb===undefined){this.displaySeeMoreAsLink=this.layout!=="normalSquare";this.displaySeeMoreAsThumb=this.layout==="normalSquare"}},prepareRender:function e(){var t=this;this.setView("._files-list",new n({app:this.app,maxRows:this.maxRows,scale:this.scale||1,model:this.model,collection:this.collection,layout:this.layout,viewMode:this.viewMode,relatedMode:this.relatedMode,isSlidable:this.isSlidable,sliderParams:this.sliderParams,amp:s,draggableOptions:{mode:"related",enabled:this.viewMode==="page"},isCartBtnEnabled:this.isCartBtnEnabled,isFavoriteBtnEnabled:this.isFavoriteBtnEnabled,isSimilarBtnEnabled:this.isSimilarBtnEnabled,thumbListHolderWidth:this.thumbListHolderWidth,displaySeeMoreAsThumb:this.displaySeeMoreAsThumb,lazyLoadOptions:this.lazyLoadOptions,makeSeeMoreData:function e(){return t.makeSeeMoreData()},onFileClickCallback:function e(i,a){return t.onFileClickCallback(i,a)}}))},serialize:function e(){var t;return{layoutClassName:a((t={},t[this.className]=true,t[this.limitClassName]=this.collection.length<u,t)),seeMoreData:this.shouldDisplaySeeMore()?this.makeSeeMoreData():null,title:this.title,relatedMode:this.relatedMode}},clientAfterRender:function e(){if(this.isSeeMoreAsPseudo){this.setSeeMoreLink()}this.clientAfterRenderCallback()},makeSeeMoreData:function e(){return{url:this.makeSeeMoreURL(),text:this.model.get("type")==="image"&&this.viewMode==="page"?this.app.tr("See More Pictures"):this.app.tr("See More"),pseudo:this.isSeeMoreAsPseudo}},makeSeeMoreURL:function e(){return this.model.makeRelatedUrl({relatedTo:this.relatedMode})},setSeeMoreLink:function e(){var t=this.$("._link");if(t.length){l.transformToLink(t[0],this.makeSeeMoreURL())}},shouldDisplaySeeMore:function e(){if(this.collection.length<d[this.model.get("type")]){return false}return this.displaySeeMoreAsLink},handleSeeMoreClick:function e(t){this.findView("RelatedFilesList").trackSeeMore(t)},onFileClickCallback:function e(){},clientAfterRenderCallback:function e(){}});e.exports=h},1710:function(e,t,i){},1711:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="'+i(t.layoutClassName)+'" data-tab="'+i(t.relatedMode)+'">';if(t.title){a+='<h2 class="files-container__title related-item__title ';if(t.seeMoreData){a+=" files-container__title_see-more"}a+='">'+i(t.title)+"</h2>"}a+='<div class="_files-list"></div>';if(t.seeMoreData){if(t.seeMoreData.pseudo){a+='<span class="files-container__see-more-link link-blue _see-more _link" data-seolink="'+t.seeMoreData.url+'">'+t.seeMoreData.text+'<i class="files-container__see-more-icon icon icon-link-blue-dark"></i></span>'}else{a+='<a class="files-container__see-more-link link-blue-on-dark _see-more" href="'+t.seeMoreData.url+'">'+t.seeMoreData.text+'<i class="files-container__see-more-icon icon icon-link-blue"></i></a>'}}a+="</div>";return a}},1712:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="'+i(t.layoutClassName)+'">';if(t.title){a+='<h2 class="related-item__title">'+i(t.title)+"</h2>"}a+='<div class="related-slider"><div class="flex-files '+t.classes.list+'">';var r=t.items;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<div data-id="'+i(s.id)+'" class="file-container '+t.itemsData[s.id].classes.box+'"><a href="'+s.url+'" class="'+t.itemsData[s.id].classes.link+'"><amp-img src="'+i(s.thumbs[t.layout])+'"class="file-container__image _file-image"alt="'+i(s.seoAlt)+'"width="'+t.itemsData[s.id].width+'"height="'+t.itemsData[s.id].height+'"/>';if(!s.seeMoreData){if(t.isTitleInside){a+='<span class="file-container__title">'+i(s.title)+"</span>"}else{a+='<span class="file-container__title hidden">'+i(s.title)+" #"+i(s.id)+"</span>"}}a+="</a></div>"}}a+="</div></div></div>";return a}},1713:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(556);var o=i(1331);var l=i(1339);var c=o.extend({name:"RelatedFilesList",events:r({},o.prototype.events,{"mouseenter .file-container":"onFileMouseEnter","mouseleave .file-container":"onFileMouseLeave"}),initialize:function e(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}o.prototype.initialize.apply(this,i);this.on("clientAfterRender",this.trackImpression)},trackImpression:function e(){if(this.collection.length&&this.$el.is(":visible")){this.app.observer.broadcast("Track:UE:File:UserSeeFileThumb",{page:1,files:this.collection.serialize(),relatedMode:this.relatedMode,anchor:this.model.get("id"),view:this.name})}},handleFileClick:function e(t){var i=this.$(t.currentTarget).closest("[data-id]").data("id");var a=this.collection.get(i);this.app.observer.broadcast("Track:UE:File:RelatedFileClick",{id:a.get("id"),index:this.$(t.currentTarget).index(),mode:this.relatedMode});if(t.ctrlKey||t.shiftKey||t.metaKey){this.trackNewTabClick(a);return}this.app.observer.broadcast("Track:UE:File:OpenFileView",{file:a,sourceFile:this.model,mode:this.relatedMode,viewMode:this.viewMode,view:this.name});this.onFileClickCallback(t,a)},handleFileMouseup:function e(t){if([n.rightMouse,n.middleMouse].includes(t.which)){var i=this.$(t.currentTarget).closest("[data-id]").data("id");this.trackNewTabClick(this.collection.get(i))}},handleSeeMoreClick:function e(t){this.trackSeeMore(t)},trackSeeMore:function e(t){if(t.ctrlKey||t.shiftKey||t.metaKey){this.trackSeeMoreNewTabClick();return}this.app.observer.broadcast("Track:UE:File:SeeMoreClick",{mode:this.relatedMode})},trackSeeMoreNewTabClick:function e(){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"FileSeeMore",target:{target:"search"},params:{mode:this.relatedMode}})},trackNewTabClick:function e(t){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"FileThumb",target:{target:"fileView",targetId:t.id},params:r({},t&&t.toTracking(),{mode:this.relatedMode,view:this.name})})},toTracking:function e(){return this.serializeItems()}});Object.assign(c.prototype,l);e.exports=c},1714:function(e,t,i){},1715:function(e,t,i){"use strict";i(1716);var a=i(1642);var r=i(546);e.exports=r.extend({name:"SearchSimilarFiles",el:false,template:a,viewMode:"modal",events:{"click ._find-similar-btn":"onFindSimilarBtnClick"},serialize:function e(){var t=this.file.get("type");var i=this.file.get("id")===328593200?this.tr("RU: Find Similar Images"):this.tr("Find Similar Images");return{displayAsLink:this.app.ampEnabled,url:this.file.makeRelatedUrl({relatedTo:"similar"}),type:t,classNames:this.classNames,iconClassNames:this.iconClassNames,btnText:t==="video"?this.tr("Find Similar Videos"):i}},onFindSimilarBtnClick:function e(t){t.stopPropagation();t.preventDefault();this.app.observer.broadcast("Track:UE:File:ToSimilar",{file:this.file});this.app.router.redirect(this.file.makeRelatedUrl({relatedTo:"similar"}))}})},1716:function(e,t,i){},1717:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}i(1718);var n=i(126);var o=i(4);var l=i(546);var c=i(1719);var u=i(24);e.exports=l.extend({name:"CreateDesign",el:false,viewMode:"modal",events:{"click ._btn":"onBtnClick"},initialize:function e(){if(this.app.features.isFeatureOnValue("Crello autologin token")){this.autoLoginToken=new c({},{app:this.app});this.autoLoginToken.fetch()}},serialize:function e(){return{btnText:this.getCrelloButtonType()==="edit"?this.tr("Edit with Crello"):this.tr("Create Design"),classNames:this.classNames,iconClassNames:this.iconClassNames}},clientAfterRender:function e(){this.trackEvent("show")},getCrelloButtonType:function e(){var t=this.app.features.get("Crello button type");return t.get("status")==="enabled"?t.get("value"):""},onBtnClick:function e(t){t.stopPropagation();var i=window.open(this.getLink(),"_blank");i.focus();this.trackEvent("click")},getLink:function e(){var t={protocol:o.client.crello.protocol,host:o.client.crello.host,pathname:"home"};if(!this.app.features.isFeatureOnValue("Create Design Home")){Object.assign(t,{pathname:"create_design/depositphotos/"+this.model.get("id"),query:this.getQueryParams()})}if(this.autoLoginToken){t.query=r({},t.query,{access_token:this.autoLoginToken.get("token")})}return n.format(t)},getQueryParams:function e(){var t=this.viewMode==="modal"?"Modal":"ItemPage";return{utm_source:"DepositPhotos",utm_medium:u.capitalize(this.getCrelloButtonType()),utm_campaign:t}},trackEvent:function e(t){var i=this.viewMode==="modal"?"FileViewModal":"FileView";var a=this.getCrelloButtonType()==="edit"?"EditWCrello":"CrelloCreate";this.app.observer.broadcast("Track:UE:"+i+":CrelloCreate",{eventCategory:a,action:t})}})},1718:function(e,t,i){},1719:function(e,t,i){"use strict";var a=i(2);e.exports=a.extend({url:"AutoLoginToken",defaults:{token:""},parse:function e(t){var i=t===void 0?{}:t,a=i.autoLoginToken,r=i.errors;if(r){return{}}return{token:a}}})},1859:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view__link-content create-design '+i(t.classNames)+'"><button class="file-view__link-button button _btn"><i class="create-design__icon icon '+i(t.iconClassNames)+'"></i><span class="create-design__text">'+i(t.btnText)+"</span></button></div>";return a}},1860:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(0);var o=i(1861);var l=i(631);var c=i(1862);var u=i(736);var d=i(1700);var h=i(1863);var p=i(882);var f=i(81);var v=i(705);var m=i(117);var b=i(1701);var g=i(927);var _=i(122);var w=i(580);var y=i(750);var k=i(1594);var x=i(1865);var C=i(1702);e.exports=u.extend({allowedRelated:["portfolio","models","series","similar"],viewMode:"page",favoritesPanelEnabled:true,isCartIndicatorEnabled:true,related:{},initialize:function e(){var t=this;this.app.store.link("SearchQuery",v.createInstance({app:this.app}));this.app.store.link("UserPlansManager",new f({},{app:this.app}));this.metaModel=new g([],{app:this.app});this.metaModel.getQueryParams=function(){return{page:"view_item",params:{itemId:t.app.queryParams.id}}};this.metaModel.fetch();this.file=new m({id:this.app.queryParams.id},{app:this.app});this.app.store.link("FileModel",this.file);this.file.fetch({parser:"parseFromFile"});this.allowedRelated.forEach((function(e){t.related[e]=new d([],{relatedTo:e==="models"?"model":e,relatedItemId:t.file.get("id"),app:t.app})}));this.relatedSearches=new h([],{app:this.app});this.relatedSearches.getQueryParams={limit:10,itemId:this.app.queryParams.id};if(this.app.features.isFeatureOnValue("Freepic file")){this.app.store.link("CuratedFolder",new p({},{app:this.app})).fetch();this.app.store.link("Stats",new y(r({},this.app.stats.formatLegacy()),{app:this.app,parse:true}));k.set(this.app,"freepic_plans")}this.listenTo(this.file,"sync",(function(e,i){t.allowedRelated.forEach((function(a){t.related[a].reset(t.file.parseRelated(a,i).map((function(t){return e.parse(t)})))}));e.set("visibleDescription",t.getVisibleDescription());if(n.isEmpty(t.file.validationError)){t.app.store.get("UserPlansManager").set({fileTypes:[e.get("type")]})}}));this.minPrices=new b({},{app:this.app});this.minPrices.fetch();this.banner=new _([],{app:this.app});this.banner.getQueryParams=function(){return{location:t.getBannerLocation(),params:{itemId:t.app.queryParams.id}}};this.banner.fetch();var i=l.series.find((function(e){return e.name==="curatedCollectionPoster"}));i.lang=this.app.lang;this.series=new w(i,{app:this.app});this.series.fetch();this.on("onPageTrackersAreExecuted",(function(){t.app.observer.broadcast("Track:UE:FileView:Show",{file:t.file.toJSON(),activeTableRow:t.findView("PriceTable")&&t.findView("PriceTable").getActiveTableRowData(),view:t.name})}));this.isClassicPriceTable=this.app.features.isFeatureOnValue("File View Classic");if(this.shouldShowAdvertising()){this.app.currency.init()}},clientAfterRender:function e(){C.write({itemId:this.file.get("id")},{app:this.app});this.app.observer.broadcast("Track:UE:FileView:DownloadShow")},shouldShowBanner:function e(){return!this.app.ampEnabled&&!!this.banner.changedAttributes()},shouldShowAdvertising:function e(){return!this.app.ampEnabled&&!this.app.user.serializeUserPlans().length&&!this.app.user.isEnterprise()},shouldShowCreateDesign:function e(){return this.app.features.isFeatureOnValue("Create Design")&&!this.app.user.isEnterprise()&&this.file.get("type")==="image"&&!this.file.get("editorial")},shouldShowSearchCategories:function e(){return this.app.features.isFeatureOnValue("File View Search Links")},getVisibleDescription:function e(){return this.metaModel.get("visibleDescription")||this.file.get("description")||this.file.get("title")},openLicenseWizardModal:function e(){this.app.store.get("ModalsManager").show("LicenseWizardModal",{app:this.app,files:[this.file],onHideCallback:this.onLicenseWizardModalHideCallback.bind(this),onLicenseSuccessCallback:this.onLicenseModalSuccessCallback.bind(this)}).catch((function(){}));if(this.file.get("type")==="video"){this.findView("FilePreviewVideo").pausePlayer()}},onLicenseWizardModalHideCallback:function e(){if(this.file.get("type")==="video"&&this.findView("FilePreviewVideo")){this.findView("FilePreviewVideo").startPlayer()}},onLicenseModalSuccessCallback:function e(t){var i=this;t.forEach((function(e){if(e.transaction){var t=(i.file.get("licensed")||[]).slice();t.push(e.transaction);i.file.set({licensed:t})}}));this.app.store.get("ModalsManager").hide("LicenseWizardModal")},zoomDownloadCallback:function e(t){this.findView("PriceTable").onDownloadClick(t)},getCorrectUrl:function e(){var t=this;if(this.file.validationError||!n.isEmpty(this.file.validationError)){var i=this.app.makeUrl("404");n.find(this.file.validationError,(function(e,a){var r=x.getErrorParams(a,e,t.app);if(r&&r.redirectUrl){i=r.redirectUrl;return true}return false}));return i}return this.app.makeUrl({route:"FileView",fileUrl:this.file.makeUrl()})},getMeta:function e(){var t=this.metaModel.toJSON();var i=[{tagName:"meta",selfClosing:true,attributes:{property:"og:url",content:this.app.parsedUrl.protocol+"//"+this.app.parsedUrl.hostname+this.app.parsedUrl.pathname}},{tagName:"meta",selfClosing:true,attributes:{property:"og:title",content:t.ogTitle}},{tagName:"meta",selfClosing:true,attributes:{property:"og:description",content:this.file.get("description")}},{tagName:"meta",selfClosing:true,attributes:{property:"og:site_name",content:"Depositphotos"}},{tagName:"meta",selfClosing:true,attributes:{property:"twitter:card",content:"summary_large_image"}},{tagName:"meta",selfClosing:true,attributes:{property:"twitter:site",content:"@depositphotos"}},{tagName:"meta",selfClosing:true,attributes:{property:"twitter:title",content:t.ogTitle}},{tagName:"meta",selfClosing:true,attributes:{property:"twitter:image",content:this.getFileThumbForMeta()}},{tagName:"meta",selfClosing:true,attributes:{property:"twitter:image:width",content:this.file.get("width")}},{tagName:"meta",selfClosing:true,attributes:{property:"twitter:image:height",content:this.file.get("height")}},{tagName:"meta",selfClosing:true,attributes:{property:"twitter:url",content:this.app.url}},{tagName:"meta",selfClosing:true,attributes:{property:"twitter:description",content:t.description}}];if(this.file.get("nudity")){i.push({tagName:"meta",selfClosing:true,attributes:{name:"rating",content:"adult"}})}if(this.file.get("type")==="video"){i.push({tagName:"meta",selfClosing:true,attributes:{property:"og:video",content:this.file.getVideoThumbs("huge").mp4}},{tagName:"meta",selfClosing:true,attributes:{property:"og:type",content:"video.other"}})}else{i.push({tagName:"meta",selfClosing:true,attributes:{property:"og:image",content:this.getFileThumbForMeta()}})}var a=this.app.features.getValueArray("HrefLang for FileView filter");t.hreflangDisabled=!this.app.features.isFeatureOnValue("HrefLang for FileView enabled")||a.includes(+this.app.queryParams.id);return{tags:i,params:t}},getBaseMeta:function e(){var t=this;for(var i=arguments.length,a=new Array(i),r=0;r<i;r++){a[r]=arguments[r]}var s=u.prototype.getBaseMeta.apply(this,a);s.locales.forEach((function(e){return t.processLocale(e)}));return s},processLocale:function e(t){var i=this.app.features.isValueInFeature("Domain excluded from hreflangs",t.key,"FileView");t.hideHreflang=i||this.hideAllHreflangs()},hideAllHreflangs:function e(){return this.app.features.isValueInFeature("Domain excluded from hreflangs",this.app.lang,"FileView")},getStructuredData:function e(){return[c.build(this.app,{file:this.file}),o.build(this.app,{file:this.file})]},getBannerLocation:function e(){return"FileView"}})},1861:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(3);var o=i(24),l=o.capitalize;var c="video";var u=function e(t,i){var a=i.file;return{"@context":"http://schema.org","@type":"MediaObject",name:a.get("title"),description:a.get("description")||a.get("alt"),keywords:Object.keys(a.get("tags")).map(l),datePublished:new Date(a.get("published")),author:{"@type":"Person",name:a.get("sellerName"),url:t.makeUrl({route:"Search",seller:a.get("sellerId")},{absolute:true})},provider:"Depositphotos",license:t.makeUrl("license",{absolute:true}),acquireLicensePage:t.makeUrl("license-comparison",{absolute:true})}};var d=function e(t,i){var a=i.file,s=i.contentUrl;var n=a.makeThumbs();return{isEnabled:true,json:r({},u(t,{file:a}),{"@type":"ImageObject",contentUrl:s||n.large,thumbnail:n.normal,image:[n.wide,n.max]})}};var h=function e(t,i){var a=i.file;var s=a.serialize(),o=s.length;var l=u(t,{file:a});var c=a.getVideoThumbs("huge")||{};return{isEnabled:true,json:r({},l,{"@type":"VideoObject",thumbnailUrl:a.makeThumb("huge"),duration:n.duration(o,"s").toISOString(),contentUrl:c.mp4,uploadDate:l.datePublished})}};t.build=function(e,t){var i=t.file;if(i.get("type")===c){return h(e,{file:i})}return d(e,{file:i})};t.VIDEO_TYPE=c;t.buildVideoObject=h;t.buildImageObject=d},1862:function(e,t,i){"use strict";var a=i(50),r=a.getCategoriesWithUrl;var s=function e(t){return t.get("type")==="image"};t.build=function(e,t){var i=t===void 0?{}:t,a=i.file;var n=a.isFreeLicenseAvailable();var o=s(a);var l=n+o+1;var c=[];var u=r(e,a.get("categories")).map((function(e,t){return{"@type":"ListItem",position:l+t,item:{"@id":e.url,name:e.name}}}));if(n){c.push({"@type":"ListItem",position:1,item:{"@id":e.makeUrl("free-collection",{absolute:true}),name:e.tr("Free Images")}})}if(o){c.push({"@type":"ListItem",position:n?2:1,item:{"@id":e.makeUrl("/",{absolute:true}),name:e.tr("Stock Photos")}})}var d=[].concat(c,u);return{isEnabled:d.length>0,json:{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:d}}}},1863:function(e,t,i){"use strict";var a=i(28);var r=i(1864);e.exports=a.extend({url:"SinglePageCollection",getQueryParams:{},model:r,parse:function e(t,i){return t.data||[]}})},1864:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(76),o=n.parseDataHandlers;var l=i(50),c=l.getCategory;var u=i(2);e.exports=u.extend({parse:function e(t){var i={searchId:this.cid,searchParams:{},type:"collection"};Object.keys(t.search_params).map((function(e){return o[e]&&o[e](t.search_params[e],i.searchParams)}));if(t.category_id){var a=c({id:t.category_id})||{};return r({},i,{type:"category",query:a.name,img:this.app.cdnPath+"_img/categories/"+a.alias+".jpg"})}return r({query:t.phrase,img:t.thumb},i)}})},1865:function(e,t,i){"use strict";var a=i(0);var r=i(73);var s=[{code:r.apiErrors.itemImageDisabled,handler:function e(t){return{redirectUrl:t.makeUrl("stock-photography")}}},{code:r.apiErrors.itemVectorDisabled,handler:function e(t){return{redirectUrl:t.makeUrl("stock-vectors")}}},{code:r.apiErrors.itemVideoDisabled,handler:function e(t){return{redirectUrl:t.makeUrl("stock-videos")}}},{code:r.apiErrors.itemNotVisibleForUser,handler:function e(t){return{redirectUrl:t.makeUrl("enterprise")}}},{code:r.apiErrors.itemRejectedPortfolioRedirect,handler:function e(t,i){return{redirectUrl:t.makeUrl({route:"Search",seller:a.last(i)})}}},{code:r.apiErrors.itemDisabledImageRedirect,handler:function e(t,i){return{redirectUrl:t.makeUrl({route:"Search",pageType:"photo",keywordName:a.last(i)})}}},{code:r.apiErrors.itemDisabledVectorRedirect,handler:function e(t,i){return{redirectUrl:t.makeUrl({route:"Search",pageType:"vector",keywordName:a.last(i)})}}},{code:r.apiErrors.itemDisabledVideoRedirect,handler:function e(t,i){return{redirectUrl:t.makeUrl({route:"Search",pageType:"video",keywordName:a.last(i)})}}},{code:r.apiErrors.itemRejectedDuplicated,handler:function e(t,i){var r=a.last(i);return{redirectUrl:r.indexOf("/"+t.queryParams.id+"/")===-1?t.makeUrl({route:"FileView",fileUrl:r}):t.makeUrl("404")}}}];e.exports.getErrorParams=function(e,t,i){var r=a.findWhere(s,{code:e|0});return r?r.handler(i,t):null}},1866:function(e,t,i){"use strict";var a=i(1867);var r=i(546);e.exports=r.extend({name:"FileViewInfoLabel",el:false,template:a,serialize:function e(){var t={attributes:this.model.clone(),subscribeLink:this.app.makeUrl("subscribe",{query:{ref:this.model.get("id")}})};if(this.minPrices){var i=this.minPrices.get(this.model.get("type"));t.minPrice=this.app.currency.get("active").exchangeParseAndFormat({source:i.currency,amount:i.amount})}return t}})},1867:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="file-view__label-box"><div class="file-view__label">';if(t.attributes.type==="video"){i+='<p class="file-view__label-text">'+this.tr("To download this video footage, you have to buy a video plan. The prices for stock videos are as low as %s per file.",t.minPrice)+"</p>"}else if(t.attributes.type==="vector"){i+='<p class="file-view__label-text">'+this.tr("To download this vector illustration, you have to buy an image plan. The prices for stock photos and vector images are as low as %s per image.",t.minPrice)+"</p>"}else{i+='<p class="file-view__label-text">'+this.tr("To download this photo, you have to buy an image plan. The prices for stock photos and vector images are as low as %s per image.",t.minPrice)+"</p>"}i+='<div class="file-view__label-nav"><a class="file-view__label-link link-blue" href="'+t.subscribeLink+'">'+this.tr("Our Plans & Prices")+"</a></div></div></div>";return i}},1868:function(e,t,i){"use strict";var a=i(50),r=a.getCategoriesWithUrl;var s=i(556);var n=i(1708);var o=i(546);var l=i(1709);var c=i(999);var u=i(764);var d=i(24);var h=i(571),p=h.formatFilePublicationDate;var f=2;var v=1;var m={image:.4,video:.8};var b=o.extend({name:"FileViewBottomPage",el:false,showPosterBox:false,categoriesInText:true,relatedModesOrder:["portfolio","similar","models","series"],viewMode:"page",isMobileMode:false,events:{"click ._keyword":"onKeywordClick","contextmenu ._keyword":"onKeywordCustomClick","mouseup ._keyword":"onKeywordCustomClick","click ._category":"onCategoryClick","contextmenu ._category":"onCategoryCustomClick","mouseup ._category":"onCategoryCustomClick"},prepareRender:function e(){this.isMobileMode=this.isMobileModeEnabled();if(this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")){this.setMatchMedia(this.render.bind(this))}if(this.related.models.length>0){this.related.series.reset()}var t={"._related":this.createRelatedBlocks()};if(this.showPosterBox){t["._poster-box"]=new c({app:this.app,template:n,model:this.series})}this.setViews(t)},createRelatedBlocks:function e(){var t=this;return this.relatedModesOrder.reduce((function(e,i){if(t.related[i]&&t.related[i].length>0){e.push(t.createRelatedView({relatedMode:i,collection:t.related[i],title:t.getRelatedFilesTitle(i,i==="similar"?t.model.get("type"):undefined)}))}return e}),[])},createRelatedView:function e(t){if(t.collection.length===0){return[]}var i=this.shouldShowMobileView();var a=this.related&&!this.related.series.length&&!this.related.models.length?f*2:f;var r=Object.assign({className:"file-view__related _"+t.relatedMode,app:this.app,model:this.model,viewMode:this.viewMode,isSimilarBtnEnabled:true,displaySeeMoreAsLink:false,displaySeeMoreAsThumb:false,isSeeMoreAsPseudo:true,maxRows:a,scale:i?m[this.model.get("type")==="video"?"video":"image"]:v,lazyLoadOptions:this.app.features.isFeatureOnValue("Lazy File Relates")?{enabled:true,offset:0}:{},isSlidable:!i,sliderParams:{useRangeControl:false,responsive:{0:{slidesToMove:1},768:{slidesToMove:2},1020:{slidesToMove:3}}}},t);return new l(r)},shouldShowMobileView:function e(){return this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")&&this.isMobileMode},getRelatedFilesTitle:function e(t,i){if(i===void 0){i="all"}var a=[{key:"similar",type:"image",label:this.model.get("id")===328593200?this.tr("RU: Similar Royalty-Free Images"):this.tr("Similar Royalty-Free Images")},{key:"similar",type:"vector",label:this.tr("Similar Royalty-Free Vectors")},{key:"similar",type:"video",label:this.tr("Similar Royalty-Free Videos")},{key:"models",type:"all",label:this.model.get("id")===328593200?this.tr("RU: With the Same Model"):this.tr("With the Same Model")},{key:"series",type:"all",label:this.tr("In the Same Series")},{key:"portfolio",type:"all",label:this.tr("More files from the same portfolio")},{key:"categories",type:"all",label:this.tr("Categories")}];var r=a.find((function(e){return e.key===t&&e.type===i}));return r.label+":"},serialize:function e(){return{file:this.prepareFile(),viewMode:this.viewMode,published:p(this.app,this.model.get("published")),categoriesInText:this.categoriesInText,showPosterBox:this.showPosterBox,showInfoText:!(this.model.get("editorial")&&this.model.get("type")!=="image"),classNames:this.classNames,isUpgraded:this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")&&this.isMobileMode,isItemPropEnabled:!this.app.features.isFeatureOnValue("JSON for Linked Data"),isTagsAbove:this.app.features.isFeatureOnValue("File View Tags Above"),additionalLinks:this.getAdditionalLinks()}},prepareFile:function e(){var t=this.model.serialize();t.categories=r(this.app,t.categories);t.tags=this.prepareTags(t.tags);return t},prepareTags:function e(t){if(t===void 0){t={}}return Object.keys(t).map((function(e){return{tag:e,link:t[e],title:d.capitalize(e)}}))},getKeywordDetails:function e(t){var i=t.currentTarget.innerText;var a=this.prepareTags(this.model.get("tags"));var r=a.indexOf(a.find((function(e){return e.title===i})))+1;return{keyword:i,position:r}},onKeywordClick:function e(t){if(t.ctrlKey||t.shiftKey||t.metaKey){this.trackKeywordNewTabClick(t);return}var i=this.getKeywordDetails(t),a=i.keyword,r=i.position;this.app.observer.broadcast("Track:UE:File:KeywordClick",{mode:"page",text:a,position:r})},onKeywordCustomClick:function e(t){if(![s.rightMouse,s.middleMouse].includes(t.which)){return}this.trackKeywordNewTabClick(t)},trackKeywordNewTabClick:function e(t){var i=this.getKeywordDetails(t),a=i.keyword,r=i.position;this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"Keywords",target:{target:"search"},params:{mode:"page",type:"collection",text:a,position:r}})},getCategoryDetails:function e(t){var i=t.currentTarget.innerText;var a=r(this.app,this.model.get("categories"));var s=a.indexOf(a.find((function(e){return e.name===i})))+1;return{category:i,position:s}},getAdditionalLinks:function e(){var t=[];if(this.model.isFreeLicenseAvailable()){t.push({href:this.app.makeUrl("free-collection"),text:this.tr("Free Images")})}if(this.app.features.isFeatureOnValue("JSON for Linked Data")&&this.model.get("type")==="image"){t.push({href:this.app.makeUrl("/",{absolute:true}),text:this.tr("Stock Photos")})}return t},onCategoryClick:function e(t){if(t.ctrlKey||t.shiftKey||t.metaKey){this.trackCategoryNewTabClick(t);return}var i=this.getCategoryDetails(t),a=i.category,r=i.position;this.app.observer.broadcast("Track:UE:File:CategoriesClick",{mode:"page",text:a,position:r})},onCategoryCustomClick:function e(t){if(![s.rightMouse,s.middleMouse].includes(t.which)){return}this.trackCategoryNewTabClick(t)},trackCategoryNewTabClick:function e(t){var i=this.getCategoryDetails(t),a=i.category,r=i.position;this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"Categories",target:{target:"search"},params:{mode:"page",type:"collection",text:a,position:r}})}});Object.assign(b.prototype,u);e.exports=b},1869:function(e,t,i){"use strict";(function(e){function t(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function a(e){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};if(i%2){t(Object(a),true).forEach((function(t){r(e,t,a[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(a))}else{t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}}return e}function r(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}i(1870);i(1714);var s=i(0);var n=i(17);var o=i(4);var l=i(548);var c=i(48);var u=i(73),d=u.apiErrors;var h=i(73),p=h.captchaErrors;var f=i(1515);var v=i(1516);var m=i(546);var b=i(1517);var g=i(547);var _=i(1519);var w=i(549);var y=i(1871);var k=i(1518);var x=i(552);var C=i(555);var S=i(866);var T=i(560);var M=i(557);var P=i(9),L=P.getLogger;var O=i(1520);var E=L(e);var D=".g-recaptcha-response";var F=100;var I=m.extend({name:"PriceTable",el:false,template:f,viewMode:"page",downloadModels:{},downloading:0,refPrefix:"",isDesktopSmall:false,isPinnedButton:true,isTrialButtonEnabled:false,buttonClassNames:"",licenseButtonClassNames:"",fallbackOptions:{icon:"icon-error-transparent",classNames:"price-table-fallback_modal"},events:{"change ._file-size":"onSizeChange","change input[name=fileLicense]":"onLicenseChange","click ._tab":"onSwitcherTabClick","click ._license":"onLicenseClick","click ._download-button":"onDownloadClick","mouseenter ._tooltip-vector":"showVectorTooltip","mouseleave ._tooltip-vector":"hideVectorTooltip","mouseenter ._tooltip-extended":"showExtendedTooltip","mouseleave ._tooltip-extended":"hideExtendedTooltip"},globals:{"resize window":"onWindowResize","scroll window":"onWindowScroll"},initialize:function e(){var t=this;this.userPlansManager=this.userPlansManager||this.app.store.get("UserPlansManager");this.signUpModalAllowed=this.app.features.isFeatureOnValue("Is Signup Modal On Download Allowed");this.priceTable=new y({file:this.file,product:this.userPlansManager.get("preferred")},{app:this.app});this.listenTo(this.file,"change:purchased change:sizeMask change:licensed",this.render);this.on("item.downloaded",this.render);this.listenTo(this.priceTable,"change",this.render);this.listenTo(this.userPlansManager,{change:function e(){return t.priceTable.set({product:t.userPlansManager.get("preferred")})}});this.listenTo(this.app.observer,"Responsive:VideoPreviewMounted",this.togglePin)},prepareRender:function e(){var t=this;this.table=this.priceTable.buildTable(this.file);if(!this.table.body.length||this.file.isBannedForCountry()){this.template=v;return true}if(this.downloading!==0){return false}s.each(this.downloadModels,(function(e,i){if(i!==t.file.get("id")){delete t.downloadModels[i]}}));this.setViews({"._free-license-info":this.getFreeLicenseInfoView()});if(this.shouldEnableTrialButton()){this.setViews({"._trial-button":_.init({app:this.app})})}return true},serialize:function e(){var t=this.priceTable.get("chosen");var i=this.getDownloadModel(t).serialize();var a=this.checkSizeCanBeDownload();var r=this.app.user.isEnterprise();return{table:this.table,file:this.file.serialize(),download:i,searchQuery:this.app.store.get("SearchQuery")?s.pick(this.app.store.get("SearchQuery").attributes,"offset","hash"):undefined,userHasPermissionsToLicense:this.app.user.hasPermissionsTo("enterprise","license"),userHasPermissionsToDownload:this.app.user.hasPermissionsToDownload()||this.file.isLicensed(t),isEnterpriseUser:r,canBeDownload:a,viewMode:this.viewMode,classNames:this.classNames,footerClassNames:this.footerClassNames,licenseButtonClassNames:this.licenseButtonClassNames,buttonClassNames:this.buttonClassNames,captcha:{siteKey:o.client.recaptcha.publicKey},downloadButtonText:this.getDownloadButtonText(),fallback:this.getFallbackOptions(),availableMethods:this.userPlansManager.get("available").length>0,isExtendedAvailable:this.isExtendedAvailable(),isExtendedChosen:this.priceTable.isExtendedLicense(),isFreeLicenseAvailable:this.isFreeAttributateAvailable(),isTrialButtonEnabled:this.shouldEnableTrialButton(),switcher:{id:"license",className:"price-table__switcher switch_small",name:"fileLicense",checked:this.priceTable.isExtendedLicense()},formActionUrl:"/cart/purchase.html"}},clientAfterRender:function e(){var t=this;if(this.file.get("type")==="vector"){this.setNotExistView("vectorTooltip",g,{name:"VectorTooltip",params:l.PriceTableVector,classes:{tooltip_dark:true},content:new m({el:false,template:function e(){return this.tr(c.AIFilesHelpMessage)}})})}if(this.isExtendedAvailable()){this.setNotExistView("extendedTooltip",g,{params:l.ViewInfoEditorial,classes:{tooltip_dark:true},content:new m({template:function e(){return this.tr("Files under the Extended license can be<br /> downloaded using On Demand Downloads<br /> for Extended License only.")}})})}x(this.$el,n.$);this.$("._download-button").each((function(e,i){return C(t.$(i),{color:t.viewMode==="modal"?"#fff":undefined})}));this.setPricePosition();this.sizeChangedCallback();if(this.isPinnedButton){this.setVariablesForHandlePin();this.togglePin()}},shouldEnableTrialButton:function e(){return this.isTrialButtonEnabled&&_.isEnabled(this.app)&&this.file.get("type")!=="video"},setVariablesForHandlePin:function e(){if(this.viewMode!=="page"){this.scrollElement=document.querySelector("._modal-container");this.setScrollElementListener()}this.breakPointEl=document.querySelector("footer");this.element=this.$("._price-table-footer");this.hiddenPinnedClass="price-table__footer_pinned-hidden";this.pinnedClass="price-table__footer_pinned";this.modalExtraSpaceClass="file-view-modal_extra-space"},checkSizeCanBeDownload:function e(t){if(t===void 0){t=this.priceTable.get("chosen")}var i=this.priceTable.get("product");return this.app.user.isLoggedIn()&&(this.app.user.isEnterprise()||this.file.isPurchased(t)||this.file.isLicensed(t)||this.app.user.hasPlans()&&this.app.licensor.checkSizeCanBeDownload(this.file,i,t)&&i.left)},getFallbackOptions:function e(){var t=this.file.isBannedForCountry()?this.app.tr("Not available in your country"):this.app.tr("This image cannot be downloaded under this account");return a({},this.fallbackOptions,{text:t})},getDownloadButtonText:function e(){var t=this.priceTable.get("chosen");if(this.file.isPurchased(t)||this.file.isLicensed(t)){return this.tr("Re-Download_full")}if(this.app.user.isEnterprise()){return this.tr("Download Comp")}var i=[{type:"image",label:this.tr("Download Image")},{type:"vector",label:this.tr("Download Vector")},{type:"video",label:this.tr("Download Video")}];var a=this.getFileTypeOverride(this.file.get("type"),t);var r=i.find((function(e){return e.type===a})),s=r.label;return s},getFileTypeOverride:function e(t,i){return this.file.get("type")==="vector"&&!["vect","el0"].includes(i)?"image":this.file.get("type")},setPricePosition:function e(){var t=this.$("._size-box");var i=parseInt(t.css("marginLeft"),10)+parseInt(t.css("marginRight"),10);var a=t.outerWidth()*t.length+i*(t.length-1);var r=this.$("._price-box");var s=this.$("._download-button");var n=s.length?s.outerWidth():0;var o=0;if(n+r.outerWidth()<=a){o=a-r.outerWidth()}else{o=n}r.css({left:o})},onSizeChange:function e(t){this.setChosenSize(t.currentTarget.value)},onLicenseChange:function e(t){this.priceTable.set({license:t.currentTarget.checked?"extended":"standard"})},onSwitcherTabClick:function e(t){this.priceTable.set({units:t.currentTarget.getAttribute("data-key")})},onLicenseClick:function e(t){t.preventDefault();t.stopPropagation();this.onLicenseBtnClick()},onDownloadClick:function e(t){t.preventDefault();this.resetError();this.app.observer.broadcast("Track:UE:File:DownloadClick",{id:this.file.get("id"),file:this.file,product:this.file.get("free")?0:this.userPlansManager.get("preferred").bit_price,size:this.priceTable.get("chosen"),route:this.app.router.routeName,view:this.name});this.proceedDownloadByScheme()},proceedDownloadByScheme:function e(){var t=this.app.store.get("ModalsManager");if(!t.get("FreeDownloadModal")&&this.isFreeAttributateAvailable()){this.showFreeDownloadModal();return}if(t.get("FreeDownloadModal")){t.hide("FreeDownloadModal")}if(this.app.user.isLoggedIn()){this.proceedDownloadForAuthUser()}else{this.proceedDownloadForGuest()}},proceedDownloadForGuest:function e(){if(this.app.router.routeName!=="Cart"){this.listenToOnce(this.app.observer,"Cart:added",this.doPurchaseAndDownloadForGuest);this.app.observer.fire("Cart:add",{fileId:this.file.get("id")})}else{this.doPurchaseAndDownloadForGuest()}},proceedDownloadForAuthUser:function e(){var t=this.$("._note");if(t.is(":visible")&&!t.hasClass("animation-el-note")&&this.app.user.checkExtendedProduct()){t.addClass("animation-el-note");this.getDownloadButton(this.priceTable.get("chosen")).trigger("loaded")}else{this.doPurchaseAndDownload()}},doPurchaseAndDownloadForGuest:function e(){var t=this;if(!this.signUpModalAllowed){this.doPurchaseAndDownload();return}this.initDownloadChain().then((function(){return t.app.chain.addNextStepDummyRoute((function(){return t.app.chain.execute("Signup",true)}))}));this.app.store.get("ModalsManager").show("SignupModal",{app:this.app}).then((function(){return t.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:t.app.history.first().get("route")+"/download"})})).catch((function(){}))},getDownloadButton:function e(t){var i=this.$('._download-button[value="'+t+'"]');return i.length>0?i:this.$("._download-button")},getDownloadChainName:function e(){return this.file.get("free")&&!this.priceTable.isExtendedLicense()||this.isFreeAttributateAvailable()?"download-free":"download"},injectPurchased:function e(t,i){var a=this;if(i===void 0){i=[]}var r=i[0]&&i[0].error_message;var s=r?{error:r}:true;var n=this.app.config.prices.singlePaySizes&&this.app.config.prices.singlePaySizes[t];if(this.app.features.isFeatureEnabled("Single pay for multiple sizes",1)&&n){n.forEach((function(e){a.file.setPurchase(e,s)}))}else{this.file.setPurchase(t,s)}},initDownloadChain:function e(){return this.app.chain.initChain(this.getDownloadChainName(),{refPrefix:this.refPrefix,fileId:this.file.get("id"),fileType:this.file.get("type")})},createDownloadModel:function e(t,i){var r=this;if(i===void 0){i=this.priceTable.get("chosen")}var s=this.priceTable.get("product");var n=this.table.body.find((function(e){return e.key===i}))||{};var o=n.license||{};var l=function e(){return{source:"item",itemId:t,size:i,license:o.id===2?"extended":"standard",licenseId:o.id,purchased:r.file.isPurchased(i),fileType:r.file.get("type")==="video"?"video":"image",method:s.type==="imagepack"?"bonus":s.type,subscription:s.type==="subscription"?s.id:0,resolution:s.subproduct||"standart",splitCount:s.split_count||0}};var c=new k(l(),a({app:this.app},this.app.user.isEnterprise()?{url:this.getEnterpriseDownloadUrl()}:{}));c.listenTo(this.priceTable,"change",(function(){return c.secureSet(l())}));this.listenTo(c,{"change:link":this.onGetDownloadLink,invalid:this.onInvalidDownload,error:this.onDownloadError});return c},getEnterpriseDownloadUrl:function e(){var t=this.priceTable.get("chosen");return this.file.isPurchased(t)||this.file.isLicensed(t)?"GetDownloadLink":"ComplimentaryDownload"},getDownloadModel:function e(t){var i=this.file.get("id");if(!this.downloadModels[i]){this.downloadModels[i]={}}if(!this.downloadModels[i][t]){this.downloadModels[i][t]=this.createDownloadModel(i,t)}this.downloadModels[i][t].set({"g-recaptcha-response":this.$(D).val()||""});return this.downloadModels[i][t]},downloadPreparationsDone:function e(){if(this.isNeedToRefillPlan()){this.showRefillMembershipModal();return false}return true},doPurchaseAndDownload:function e(){var t=this.priceTable.isExtendedLicense()?"el0":this.priceTable.get("chosen");if(!(this.file.get("free")&&!this.priceTable.isExtendedLicense())&&!this.file.isPurchased(t)&&!this.downloadPreparationsDone()){return}this.downloading+=1;this.getDownloadButton(t).trigger("loading");this.getDownloadModel(t).requestLink()},isExtendedAvailable:function e(){return this.file.get("type")!=="video"&&!this.app.user.isEnterprise()},isNeedToRefillPlan:function e(){var t=this.priceTable.get("product"),i=t.type;if(i!=="membership"){return false}var a=s.chain(this.app.user.serializeUserPlans({type:i})).sortBy("order").first().value();return!(a&&this.app.user.products.findWhere({type:i,id:a.id}).canBePurchased())},getFreeLicenseInfoView:function e(){if(!this.isFreeAttributateAvailable()){return[]}return new b({app:this.app,model:this.file,onDownload:this.proceedDownloadByScheme.bind(this)})},isFreeAttributateAvailable:function e(){var t=this;var i=this.app.licensor.getLicensableSizesForFile(this.file);var a=i.find((function(e){var i=t.app.licensor.getFileSizePrice(e,t.priceTable.get("product"));return e.id===t.priceTable.get("chosen")&&i&&i.cost===0}));return!this.priceTable.isExtendedLicense()&&!this.checkSizeCanBeDownload()&&a},onGetDownloadLink:function e(t,i){var a=this;var r=t.get("size");S.downloadByUrl({app:this.app,link:i,callback:function e(){a.getDownloadButton(r).trigger("loaded");a.downloading-=1;if(a.downloading===0){a.trigger("item.downloaded")}a.app.user.fetch()}});var s=this.file.isLicensed(this.priceTable.get("chosen"));var n=["EnterpriseLicensedDownloads","EnterpriseCompDownloads"].indexOf(this.app.router.routeName)>-1;var o=this.userPlansManager.get("preferred");var l=o.type;if(this.app.user.isEnterprise()&&!s&&!n){this.app.observer.broadcast("Track:UE:File:AddToCart",{id:this.file.get("id"),file:this.file.serialize(),view:this.name})}else if(!this.app.user.isEnterprise()){var c=o.bit_price;if(this.file.get("free")){c="Free";if(this.file.isFreeCurated()){c="FreeCurated";l="membership"}}this.app.observer.broadcast("Track:UE:File:Download",{route:this.app.router.routeName,id:this.file.get("id"),file:this.file,size:t.get("size"),reDownload:this.file.isPurchased(t.get("size")),cost_type:c,view:this.name,plan:this.app.tracking.rewriteProduct(l)})}this.injectPurchased(t.get("size"));this.onDownloadBegins()},onInvalidDownload:function e(t,i){var a=this;this.downloading-=1;if(i.length&&s.some(i,(function(e){return e.error_code===d.haveNoPermissionToSection}))){this.getDownloadButton(t.get("size")).trigger("loaded");new w({app:this.app,title:this.tr("Service Message"),message:s.map(i,(function(e){return e.error_message})).join(" ")}).show();E.warn("DOWNLOAD ERROR: Cannot get download link. Something wrong with arrived data",i);return}var r=s.find(i,(function(e){return s.contains(Object.values(p),+e.error_code)?e:false}));if(r){this.getDownloadButton(t.get("size")).trigger("loaded");this.showError(r.error_code,r.error_message);M.injectScript().then((function(){return M.render(a.$(".g-recaptcha")[0])})).then((function(){return a.sizeChangedCallback()}));return}if(i.length){if(this.app.router.routeName!=="Cart"){this.app.observer.broadcast("Track:UE:File:AddToCart",{id:this.file.get("id"),file:this.file.serialize(),view:this.name})}this.injectPurchased(t.get("size"),i);this.initDownloadChain().then((function(){return a.app.chain.start(i[0])}))}},onDownloadError:function e(t,i){M.reset(this.$(D));if(i.responseJSON&&i.responseJSON.errors){this.onInvalidDownload(t,i.responseJSON.errors);return}E.warn("DOWNLOAD ERROR: Cannot get download link. Server returns error: ",i)},setChosenSize:function e(t,i){this.priceTable.set({chosen:t},i||{})},showRefillMembershipModal:function e(){this.app.store.get("ModalsManager").show("RefillMembershipModal",{app:this.app,type:"notAvailable"}).catch((function(){}))},showFreeDownloadModal:function e(){var t=this;this.app.store.get("ModalsManager").show("FreeDownloadModal",{app:this.app,file:this.file,modalClasses:"modal_free-download",onDownload:function e(){return t.proceedDownloadByScheme()}}).catch((function(){}))},resetError:function e(){this.$("._download-error").text("")},showError:function e(t,i){this.$("._download-error").text(t+"::"+i);this.sizeChangedCallback()},getActiveTableRowData:function e(){return this.table&&this.table.body&&this.table.body.find((function(e){return e.active}))||null},showVectorTooltip:function e(t){t.preventDefault();this.getView("vectorTooltip").show(t)},hideVectorTooltip:function e(t){t.preventDefault();this.getView("vectorTooltip").hide(t)},showExtendedTooltip:function e(t){t.preventDefault();this.getView("extendedTooltip").show(t)},hideExtendedTooltip:function e(t){t.preventDefault();this.getView("extendedTooltip").hide(t)},onWindowResize:s.throttle((function(){if(T.desktopSmall()!==this.isDesktopSmall){this.isDesktopSmall=T.desktopSmall();this.setPricePosition()}this.togglePin()}),F),onLicenseBtnClick:function e(){},onDownloadBegins:function e(){},sizeChangedCallback:function e(){},onWindowScroll:function e(){},togglePin:function e(){}});Object.assign(I.prototype,O);e.exports=I}).call(this,i(5)(e))},1870:function(e,t,i){},1871:function(e,t,i){"use strict";var a=i(2);var r=i(24);var s=i(123);var n=["US","GB","LR","MM"];var o={standard:[{id:"ds",bit:8}],extended:[{id:"ds"}]};e.exports=a.extend({defaults:{file:null,product:null,defaultUnits:true,units:"inch",chosen:"",license:"standard",save:true},makeUniqueEnterprisePriceList:function e(t){var i={};return t.filter((function(e){if(!i[e.id]){i[e.id]=true;return true}return false}))},makeStandardLicensePriceList:function e(t){var i=this;return t.filter((function(e,t,a){var r=a.find((function(t){return t.id===e.id&&t.licenseBit!==e.licenseBit}));return e.licenseBit!==2&&(!r||i.app.licensor.getFileSizePrice(r,i.get("product")).cost>i.app.licensor.getFileSizePrice(e,i.get("product")).cost)}))},buildTable:function e(t){var i=this.app.user.isEnterprise()?this.makeUniqueEnterprisePriceList(this.app.licensor.getLicensableSizesForFile(t,undefined,true)):this.makeStandardLicensePriceList(this.app.licensor.getLicensableSizesForFile(t));this.set({chosen:!this.isExtendedLicense()&&this.get("chosen")||this.getDefaultSize(i)});return{body:this.buildBody(t,i.reverse())}},getDefaultSize:function e(t){var i=this;if(!t.length){return""}var a=t.filter((function(e){return o[i.isExtendedLicense()?"extended":"standard"].some((function(t){return!Object.keys(t).every((function(i){return t[i]===e[i]}))}))}));var r=a.filter((function(e){return e.licenseBit===1})).pop();var s=a.length?a:t;return r?r.id:s[s.length-1].id},buildBody:function e(t,i){var a=this;var r=this.get("chosen");var s=this.get("product");return i.map((function(e){return a.row(t,e,s,r)}))},row:function e(t,i,a,r){var n=this.isExtendedLicense()?this.app.licensor.getLicensableSizesForFile(t).find((function(e){return e.licenseBit===2}))||i:i;var o=this.app.licensor.getLicenseByBit(n.licenseBit);var l=this.getUnits();var c=this.app.user.isEnterprise()?this.makeLicense(t,i):this.makePrice(t,n,a,o);return{key:i.id,indicator:this.makeIndicator(i),label:s.makeSizeLabel(t.attributes,i),extension:i.extension,size:s.makeSize(t,i,l),licenseTitle:this.isExtendedLicense()?this.app.tr("Extended"):"",license:a.bit_price===16&&!a.dummy||this.isExtendedLicense()?this.app.licensor.getLicenseById(2):o,price:c,fileID:t.get("id"),active:i.id===r,isDisabled:this.isExtendedLicense()&&i.id!==r,purchase:!this.app.user.isEnterprise()&&t.getPurchase(n.id)||{},nextUnit:l==="inch"?"cm":"inch"}},makeIndicator:function e(t){return t.labels.short.toLowerCase().replace(/p/,"")},makePrice:function e(t,i,a,s){var n=this.app.licensor.getFileSizePrice(i,a);var o=t.get("free")&&s.id!==2||n&&n.cost===0;var l=a.type==="credits"?this.getPriceKoef(t,this.app.user,i):1;var c=n?r.formatPrice(n.cost):null;var u=l<1?r.formatPrice(n.cost*l):null;var d=this.makePriceLabel(a,c,u,o);var h=o||n>1||n&&n.cost>1||a.type==="credits";return{free:o,value:c,labeled:d,discounted:u,isCustom:h}},makePriceLabel:function e(t,i,a,r){if(r){return this.app.tr("Free")}if(i==null){return"-"}if(t.type==="credits"){var s=a&&a!==i?"<s>"+i+"</s> "+a:i;return this.app.features.isFeatureOnValue("File View Classic")?i:this.app.tr("%s Credits",[s])}if(i===1&&!this.app.features.isFeatureOnValue("File View Classic")){return""}return i!==1?this.app.tr("%s Downloads",[i]):this.app.tr("%s Download",[i])},getPriceKoef:function e(t,i,a){var r=t.get("type")==="vector"?"image":t.get("type");var s=t.get("discount")||0;var n=this.app.user.get("id")?i.get("discounts").items&&i.get("discounts").items[r]&&i.get("discounts").items[r][a.id]:0;n*=100;return a.license==="extended"&&t.get("discount")==="100"?1:1-Math.max(s,n)/100},makeLicense:function e(t,i){var a=t.isLicensed(i.id);return{free:false,isLicensed:a,labeled:a?this.app.tr("Licensed"):this.app.tr("Not Licensed")}},getUnits:function e(){var t=n.indexOf(this.app.config.country)>=0?"inch":"cm";if(this.changed.units){this.secureSet({defaultUnits:false})}if(this.get("defaultUnits")&&this.get("units")!==t){this.secureSet({units:t})}return this.get("units")},isExtendedLicense:function e(){return this.get("license")==="extended"}})},1872:function(e,t,i){"use strict";var a=i(1873);var r=i(1874);var s=i(556);var n=i(546);e.exports=n.extend({name:"Copyright",el:false,template:a,amp:r,events:{click:"onPortfolioClick",contextmenu:"onPortfolioCustomClick",mouseup:"onPortfolioCustomClick"},serialize:function e(){return{file:this.model.serialize(),portfolioLink:this.getPortfolioLink(),avatar:this.model.get("avatar")||this.app.user.avatar.constructor.prototype.defaults.default,isItemPropEnabled:!this.app.features.isFeatureOnValue("JSON for Linked Data")}},getPortfolioLink:function e(){var t={absolute:true};if(this.app.user.isEnterprise()&&this.app.store.get("SearchQuery")){var i=this.app.store.get("SearchQuery").getNonDefaults(["dataSource"]);if(Object.hasOwnProperty.call(i,"dataSource")){t.query={data_source:i.dataSource}}}return this.app.makeUrl({route:"Search",seller:this.model.get("sellerId")},t)},onPortfolioClick:function e(t){if(t.ctrlKey||t.shiftKey||t.metaKey){this.trackPortfolioNewTabClick(t);return}t.preventDefault();this.app.observer.broadcast("Track:UE:Portfolio:Click",{sellerId:this.model.get("sellerId")});this.app.router.redirect(t.currentTarget.href)},onPortfolioCustomClick:function e(t){if(![s.rightMouse,s.middleMouse].includes(t.which)){return}this.trackPortfolioNewTabClick(t)},trackPortfolioNewTabClick:function e(){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"Portfolio",target:{target:"search"},params:{sellerId:this.model.get("sellerId")}})}})},1873:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<a class="file-view__link-content file-view__link-content_rounded info-author" href="'+t.portfolioLink+'"><span class="avatar-box info-author__avatar"><img class="avatar avatar-m" src="'+t.avatar+'" alt="'+i(t.file.sellerName)+'"></span><span class="info-author__text">'+this.tr("By")+" <span";if(t.isItemPropEnabled){a+=' itemprop="author" itemscope itemtype="http://schema.org/Person"'}a+='> <span class="link-blue" itemprop="name">'+i(t.file.sellerName)+'</span> <meta itemprop="url" content="'+i(t.portfolioLink)+'" /> </span></span><span class="hidden" itemprop="provider">Depositphotos</span></a>';return a}},1874:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<a class="file-view__link-content file-view__link-content_rounded info-author" href="'+t.portfolioLink+'"><span class="avatar-box info-author__avatar"><amp-img class="avatar avatar-m" src="'+t.avatar+'" alt="'+i(t.file.sellerName)+'" width="28" height="28" /></span><span class="info-author__text">'+this.tr("By")+this.seo.space+"<span";if(t.isItemPropEnabled){a+=' itemprop="author" itemscope itemtype="http://schema.org/Person"'}a+='><span class="link-blue" itemprop="name">'+i(t.file.sellerName)+'</span><meta itemprop="url" content="'+i(t.portfolioLink)+'" /></span></span><span class="hidden" itemprop="provider">Depositphotos</span></a>';return a}},1875:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}i(1876);var n=i(1877);var o=i(546);var l=i(1596);e.exports=o.extend({name:"FileViewCategories",el:false,template:n,initialize:function e(){this.once("clientAfterRender",this.fetchCollection)},prepareRender:function e(){this.setViews({"._list":new l({app:this.app,collection:this.collection,getLink:this.getLink.bind(this),onItemClickCallback:this.onItemClick.bind(this),onItemContextClickCallback:this.trackNewTabClick.bind(this)})})},serialize:function e(){return{classNames:this.classNames}},getLink:function e(t){return this.app.makeUrl(r({route:"Search"},t.searchParams))},toTracking:function e(){return this.collection.serialize()},onItemClick:function e(t){this.app.observer.broadcast("Track:UE:File:SearchLinksClick",{item:t})},trackNewTabClick:function e(t){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"singlePageCollecion",target:{target:"search"},params:{text:t.get("query"),type:t.get("type"),position:this.collection.indexOf(t)+1}})},fetchCollection:function e(){var t=this;this.collection.fetch().then((function(){if(t.collection.length===0){t.$el.slideUp(300)}t.$el.css("visibility","visible")}))}})},1876:function(e,t,i){},1877:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view__categories"><h2 class="related-item__title '+i(t.classNames)+'">'+this.tr("Image categories:")+'</h2><div class="file-view__categories-list _list"></div></div>';return a}},1878:function(e,t,i){},1879:function(e,t,i){},2383:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<h1 class="file-view__title"><span class="file-view__title-text _title-name" itemprop="name" title="'+i(t.title)+'">'+i(t.title)+this.seo.space+'</span><span class="file-view__title-sep _title-sep">&ndash;</span>';if(t.file.type==="vector"){a+='<span class="file-view__title-text file-view__title-type _title-type"> '+this.tr("Stock Illustration")+" </span>"}else if(t.file.type==="video"){a+=' </span><span class="file-view__title-text file-view__title-type _title-type"> '+this.tr("Stock Footage")+" </span>"}else if(t.file.editorial){a+=' </span><span class="file-view__title-text file-view__title-type _title-type"> '+this.tr("Stock Editorial Photography")+" </span>"}else{if(t.file.id===328593200){a+='<span class="file-view__title-text file-view__title-type _title-type"> '+this.tr("RU: Stock Image")+" </span>"}else{a+='<span class="file-view__title-text file-view__title-type _title-type"> '+this.tr("Stock Image")+" </span>"}}a+="</h1>";return a}},2384:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view__related-wrapper '+i(t.classNames)+'">';if(t.isTagsAbove){if(t.file.tags.length){a+='<div class="file-view__related file-view__related_tags"><h2 class="related-item__title">';if(t.file.type==="video"){a+=""+this.tr("Clip Keywords")}else if(t.file.type==="vector"){a+=""+this.tr("Vector Illustration Keywords")}else if(t.file.editorial){a+=""+this.tr("Editorial Photo Keywords")}else{if(t.file.id===328593200){a+=""+this.tr("RU: Stock Image Keywords")}else{a+=""+this.tr("Stock Image Keywords")}}a+=':</h2><div class="related-item__content related-item__content_keywords">';var r=t.file.tags;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];if(n>0){a+='<span class="related-item__sep">,'+this.seo.space+"</span>"}a+='<a class="related-item__link _keyword" href="'+s.link+'"><span ';if(t.isItemPropEnabled){a+='itemprop="keywords"'}a+=">"+i(s.title)+"</span></a>"}}a+="</div></div>"}}a+='<div class="_related"></div>';if(t.showInfoText){a+='<div class="file-view__related file-view__related_info"><h2 class="related-item__title">';if(t.file.id===328593200){a+=""+this.tr("RU: Usage Information")}else{a+=""+this.tr("Usage Information")}a+='</h2><p class="related-item__info-text">';if(t.file.type==="video"){a+=""+this.tr('Video "%s" can be used for personal and commercial purposes according to the conditions of the purchased Royalty-free license. The video is available for download in high resolution quality up to %sx%s.',[t.file.title,t.file.width,t.file.height])}else if(t.file.type==="vector"){a+=""+this.tr('Vector image "%s" can be used for personal and commercial purposes according to the conditions of the purchased Royalty-free license. The illustration is available for download in high resolution quality up to %sx%s and in EPS file format.',[t.file.title,t.file.width,t.file.height])}else if(t.file.editorial){a+=""+this.tr('Photo "%s" can be used for personal purposes according to the conditions of the purchased Royalty-free license. The image is available for download in high resolution quality up to %sx%s.',[t.file.title,t.file.width,t.file.height])}else{if(t.file.id===328593200&&this.app.lang==="ru"){a+=""+this.tr('RU: Photo "%s" can be used for personal and commercial purposes according to the conditions of the purchased Royalty-free license. The image is available for download in high resolution quality.',[""])}else{a+=""+this.tr('Photo "%s" can be used for personal and commercial purposes according to the conditions of the purchased Royalty-free license. The image is available for download in high resolution quality up to %sx%s.',[t.file.title,t.file.width,t.file.height])}}if(t.isUpgraded&&t.file.type!=="video"){a+="&nbsp;"+this.tr("Upload Date")+": <span>"+i(t.published)+"</span>"}a+="</p></div>"}if(!t.isTagsAbove){if(t.file.tags.length){a+='<div class="file-view__related file-view__related_tags"><h2 class="related-item__title">';if(t.file.type==="video"){a+=""+this.tr("Clip Keywords")}else if(t.file.type==="vector"){a+=""+this.tr("Vector Illustration Keywords")}else if(t.file.editorial){a+=""+this.tr("Editorial Photo Keywords")}else{if(t.file.id===328593200){a+=""+this.tr("RU: Stock Image Keywords")}else{a+=""+this.tr("Stock Image Keywords")}}a+=':</h2><div class="related-item__content related-item__content_keywords">';var l=t.file.tags;if(l){var s,n=-1,c=l.length-1;while(n<c){s=l[n+=1];if(n>0){a+='<span class="related-item__sep">,'+this.seo.space+"</span>"}a+='<a class="related-item__link _keyword" href="'+s.link+'"><span ';if(t.isItemPropEnabled){a+='itemprop="keywords"'}a+=">"+i(s.title)+"</span></a>"}}a+="</div></div>"}}if(t.showPosterBox||t.file.categories.length){a+='<div class="file-view__related file-view__related_categories"><h2 class="related-item__title">';if(t.file.type==="video"){a+=""+this.tr("Buy Stock Footages from Categories")}else if(t.file.type==="vector"){a+=""+this.tr("Buy Vector Illustrations from Categories")}else if(t.file.editorial){a+=""+this.tr("Buy Editorial Photos from Categories")}else{if(t.file.id===328593200){a+=""+this.tr("RU: Buy Stock Photos from Categories")}else{a+=""+this.tr("Buy Stock Photos from Categories")}}a+=':</h2><div class="related-item__content related-item__content_category';if(t.categoriesInText){a+=" related-item__content_category-text"}a+='"><ul class="related-item__list"><li class="related-item__list-item _poster-box"></li>';if(t.additionalLinks&&t.additionalLinks.length){var u=t.additionalLinks;if(u){var d,h=-1,p=u.length-1;while(h<p){d=u[h+=1];a+='<li class="related-item__list-item"><a class="related-item__link _category" href="'+d.href+'"><span>'+d.text+"</span></a></li>"}}}if(t.file.categories.length){var f=t.file.categories;if(f){var v,m=-1,b=f.length-1;while(m<b){v=f[m+=1];a+='<li class="related-item__list-item"><a class="';if(t.categoriesInText){a+="related-item__link"}else{a+="related-item__category"}a+=' _category"';if(!t.categoriesInText){a+='style="background-image: url('+i(this.app.cdnPath)+"_img/categories/"+i(v.alias)+'.jpg)"'}a+=' href="'+v.url+'">';if(v.name){a+="<span";if(!t.categoriesInText){a+=' class="related-item__category-text"'}a+=">"+v.name+"</span>"}a+="</a></li>"}}}a+="</ul></div></div>"}a+="</div>";return a}},2385:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view__info-wrapper"><div class="file-view__info-container"><div class="file-view__info"><div class="file-view__info-line"><span class="file-view__info-name">';if(t.file.type==="video"){a+=""+this.tr("Clip ID")}else if(t.file.type==="vector"){a+=""+this.tr("Vector ID")}else if(t.file.editorial){a+=""+this.tr("Photography ID")}else{if(t.file.id===328593200){a+=""+this.tr("RU: Image ID")}else{a+=""+this.tr("Image ID")}}a+=":"+this.seo.space+'</span><span class="file-view__info-value">'+i(t.file.id)+"</span></div>";if(t.isUpgraded){a+='<div class="file-view__info-line file-view__info-line_copyright _copyright"></div>'}else{a+='<div class="file-view__info-line"><span class="file-view__info-name">';if(t.file.id===328593200){a+=""+this.tr("RU: Copyright")+":"+this.seo.space}else{a+=""+this.tr("Copyright")+":"+this.seo.space}a+='</span><span class="file-view__info-value"><a class="link-blue _portfolio" href="'+t.portfolioLink+'"><span';if(t.isItemPropEnabled){a+=' itemprop="author" itemscope itemtype="http://schema.org/Person"'}a+='><span itemprop="name">'+i(t.file.sellerName)+'</span><meta itemprop="url" content="'+i(t.portfolioLink)+'" /></span></a>'+this.seo.space+'<span class="hidden" itemprop="provider">Depositphotos</span></span></div>'}if(t.shouldShowUploadDate){a+='<div class="file-view__info-line"><span class="file-view__info-name">';if(t.file.id===328593200){a+=""+this.tr("RU: Upload Date")+":"}else{a+=""+this.tr("Upload Date")+":"}a+='</span><span class="file-view__info-value">'+i(t.published)+"</span></div>"}if(t.file.type==="video"){a+='<div class="file-view__info-line"><span class="file-view__info-name">'+this.tr("Length")+":"+this.seo.space+'</span><span class="file-view__info-value">'+i(t.file.mp)+' s</span></div><div class="file-view__info-line"><span class="file-view__info-name">'+this.tr("Aspect Ratio")+":"+this.seo.space+'</span><span class="file-view__info-value">'+i(t.file.ar)+"</span></div>"}if(t.file.editorial){a+='<div class="file-view__info-line file-view__info-line_editorial"><span class="file-view__info-name">'+this.tr("Release Information")+":"+this.seo.space+'</span><span class="file-view__info-value"><span class="file-view__info-editorial-title">'+this.tr("Editorial Use Only.")+this.seo.space+'</span><span class="file-view__info-editorial">'+this.tr("Use of this image in advertising or for promotional purposes is prohibited.")+'<i class="file-view__info-help icon icon-help _editorial-tooltip"></i></span></span></div>'}a+='</div></div><div class="file-view__label-content _label"></div></div>';return a}},2386:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="search-similar-box search-similar-box_round"><button class="file-action-btn file-action-btn_similar _find-similar-btn"></button></div>';return i}},2387:function(e,t,i){"use strict";var a=i(0);var r=i(2388);var s=i(2389);var n=i(2390);var o=i(546);var l=i(764);var c=i(24);var u=i(571);var d=o.extend({name:"FileViewPage",el:false,template:r,amp:s,isMobileMode:false,createDesignEnabled:true,prepareRender:function e(){var t=this;this.isMobileMode=this.isMobileModeEnabled();if(this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")){this.setMatchMedia((function(){t.isMobileMode=t.isMobileModeEnabled();t.$el.toggleClass("file-view-page_mobile",t.isMobileMode)}))}if(this.app.features.isFeatureOnValue("File View Classic")){this.template=n}},serialize:function e(){var t=this.isBroadPageViewEnabled();var i=this.file.serialize();i.videoMeta=u.makeStructuredDataForVideo(this.file);return{file:u.injectFilesSEOMeta(this.app,i),viewMode:"page",createDesignEnabled:this.createDesignEnabled,classNames:c.classNames({"file-view-page_auth":this.app.user.isLoggedIn(),"file-view-page_video":this.file.get("type")==="video","file-view-page_video-huge":this.isHugeVideoEnabled()&&t,"file-view-page_image-huge":this.isHugeImageEnabled()&&t,"file-view-page_w1200":t&&this.isHugeModeAllowed(),"file-view-page_classic":this.app.features.isFeatureOnValue("File View Classic"),"file-view-page_compact-prices":this.app.features.isFeatureOnValue("Price Table Upgrade"),"file-view-page_upgrade":this.app.features.isFeatureOnValue("File View Mobile Design Upgrade"),"file-view-page_mobile":this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")&&this.isMobileMode}),fileViewClasses:c.classNames({"file-view_bg-white":true,"file-view_has-methods":this.hasMethods(),"file-view_classic":this.app.features.isFeatureOnValue("File View Classic")}),similarUrl:this.file.makeRelatedUrl({relatedTo:"similar"}),isItemPropEnabled:!this.app.features.isFeatureOnValue("JSON for Linked Data")}},clientAfterRender:function e(){this.$el.find("._title-name").css({"max-width":this.$el.find("._title").width()-this.$el.find("._title-type").width()-this.$el.find("._title-sep").width()})},hasMethods:function e(){var t=this.app.store.get("UserPlansManager");return t&&!a.isEmpty(t.get("available"))},isHugeVideoEnabled:function e(){return this.file.get("type")==="video"&&this.file.get("hasHugeVideoThumb")},isHugeImageEnabled:function e(){if(!this.app.features.isFeatureOnValue("File View Classic")){return false}return this.file.get("type")==="image"||this.file.get("type")==="vector"},isHugeModeAllowed:function e(){return this.isHugeVideoEnabled()||this.isHugeImageEnabled()},isBroadPageViewEnabled:function e(){return this.app.features.isFeatureOnValue("Broad size file view")}});Object.assign(d.prototype,l);e.exports=d},2388:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view-page '+i(t.classNames)+'" ';if(t.isItemPropEnabled){a+=" itemscope ";if(t.file.type==="video"){a+=' itemtype="http://schema.org/VideoObject"'}else{a+=' itemtype="http://schema.org/ImageObject"'}}a+=">";if(t.isItemPropEnabled){a+='<span itemprop="license" class="hidden">'+this.app.makeUrl("license",{absolute:true})+'</span><span itemprop="acquireLicensePage" class="hidden">'+this.app.makeUrl("license-comparison",{absolute:true})+"</span>";if(t.file.type==="video"){a+='<meta itemprop="name" content="'+i(t.file.videoMeta.name)+'" /><meta itemprop="description" content="'+i(t.file.videoMeta.description)+'" /><meta itemprop="thumbnailUrl" content="'+t.file.videoMeta.thumbnailUrl+'" /><meta itemprop="duration" content="'+i(t.file.videoMeta.duration)+'" /><meta itemprop="contentUrl" content="'+t.file.videoMeta.contentUrl+'" /><meta itemprop="uploadDate" content="'+t.file.videoMeta.uploadDate+'" />'}}a+='<div class="file-view-notice _notice"></div><div class="file-view '+i(t.fileViewClasses)+'"><div class="file-view__title-box _title"></div><div class="file-view__left"><div class="file-view__thumb _file-view-thumb"></div><div class="file-view__links"><div class="file-view__link file-view__find-similar-box _find-similar"></div>';if(t.createDesignEnabled){a+='<div class="file-view__link file-view__design-box _design"></div>'}a+='</div></div><div class="file-view__right"><div class="file-view__info-box _file-view-info"></div><div class="file-view__download-method _download-method-selector"></div><div class="file-view__price-table-wrapper _price-table"></div></div><div class="file-view__bottom-wrapper _file-view-bottom"></div></div></div>';return a}},2389:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view-page '+i(t.classNames)+'" ';if(t.isItemPropEnabled){a+=" itemscope ";if(t.file.type==="video"){a+=' itemtype="http://schema.org/VideoObject"'}else{a+=' itemtype="http://schema.org/ImageObject"'}}a+=">";if(t.isItemPropEnabled){a+='<span itemprop="license" class="hidden">'+this.app.makeUrl("license",{absolute:true})+'</span><span itemprop="acquireLicensePage" class="hidden">'+this.app.makeUrl("license-comparison",{absolute:true})+"</span>";if(t.file.type==="video"){a+='<meta itemprop="name" content="'+i(t.file.videoMeta.name)+'" /><meta itemprop="description" content="'+i(t.file.videoMeta.description)+'" /><meta itemprop="thumbnailUrl" content="'+t.file.videoMeta.thumbnailUrl+'" /><meta itemprop="duration" content="'+i(t.file.videoMeta.duration)+'" /><meta itemprop="contentUrl" content="'+t.file.videoMeta.contentUrl+'" /><meta itemprop="uploadDate" content="'+t.file.videoMeta.uploadDate+'" />'}}a+='<div class="file-view-notice _notice"></div><div class="file-view '+i(t.fileViewClasses)+'"><div class="file-view__title-box _title"></div><div class="file-view__left"><div class="file-view__thumb _file-view-thumb"></div><div class="file-view__links"><div class="file-view__link file-view__link_top _copyright"></div>';if(t.file.editorial){a+='<div class="file-view__link _editorial"></div>'}a+='</div></div><div class="file-view__right"><div class="file-view__download-method _download-method-selector"></div><div class="file-view__price-table-wrapper _price-table"></div></div><div class="file-view__bottom-wrapper _file-view-bottom"></div></div></div>';return a}},2390:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="file-view-page '+i(t.classNames)+'"';if(t.isItemPropEnabled){a+=" itemscope ";if(t.file.type==="video"){a+=' itemtype="http://schema.org/VideoObject"'}else{a+='itemtype="http://schema.org/ImageObject" '}}a+=">";if(t.isItemPropEnabled){a+='<span itemprop="license" class="hidden">'+this.app.makeUrl("license",{absolute:true})+'</span><span itemprop="acquireLicensePage" class="hidden">'+this.app.makeUrl("license-comparison",{absolute:true})+"</span>";if(t.file.type==="video"){a+='<meta itemprop="name" content="'+i(t.file.videoMeta.name)+'" /><meta itemprop="description" content="'+i(t.file.videoMeta.description)+'" /><meta itemprop="thumbnailUrl" content="'+t.file.videoMeta.thumbnailUrl+'" /><meta itemprop="duration" content="'+i(t.file.videoMeta.duration)+'" /><meta itemprop="contentUrl" content="'+t.file.videoMeta.contentUrl+'" /><meta itemprop="uploadDate" content="'+t.file.videoMeta.uploadDate+'" />'}}a+='<div class="file-view-notice _notice"></div><div class="file-view '+i(t.fileViewClasses)+'"><div class="file-view__title-box _title"></div><div class="file-view__left"><div class="file-view__thumb _file-view-thumb"></div><div class="file-view__links"><div class="file-view__link file-view__link_similar _find-similar"></div>';if(t.createDesignEnabled){a+='<div class="file-view__link file-view__link_design _design"></div>'}a+='</div></div><div class="file-view__right"><div class="file-view__download-method _download-method-selector"></div><div class="file-view__price-table-wrapper _price-table"></div></div><div class="file-view__bottom-wrapper _file-view-bottom"></div></div></div>';return a}},2391:function(e,t,i){"use strict";var a=i(0);var r=i(560);var s=i(1595);var n=40;var o=10;e.exports=s.extend({globals:{"resize window":"onWindowResize","scroll window":"onWindowScroll"},clientAfterRender:function e(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}s.prototype.clientAfterRender.apply(this,i);this.initFloatingPoster()},onWindowResize:function e(){this.processPosterOnResize()},onWindowScroll:function e(){this.processPoster()},initFloatingPoster:function e(){this.$poster=Backbone.$("._plan-poster");this.$posterSocket=Backbone.$("._label");this.$posterAttachment=Backbone.$("._price-table");this.processPoster()},processPoster:function e(){if(r.mobileMode()){this.unShiftPoster();return}if(this.isPosterSocketBelowScreen()){this.shiftPoster()}else{this.unShiftPoster()}},processPosterOnResize:a.throttle((function(){this.processPoster()}),o),isPosterSocketBelowScreen:function e(){var t=this.$posterSocket[0].getBoundingClientRect(),i=t.top,a=t.height;return i+a/2>window.innerHeight},isSocketPositionChanged:function e(){return this.$poster.css("top")!=="-"+this.calcPosterTop()+"px"},shiftPoster:function e(){if(!this.isSocketPositionChanged()&&this.$poster.hasClass("_pinned")){return}this.$poster.css({top:"-"+this.calcPosterTop()+"px"}).addClass("_pinned")},unShiftPoster:function e(){this.$("._plan-poster").removeAttr("style").removeClass("_pinned")},calcPosterTop:function e(){var t=this.$posterAttachment[0].getBoundingClientRect(),i=t.bottom;var a=this.$posterSocket[0].getBoundingClientRect(),r=a.top;return r-i-n}})},2392:function(e,t,i){"use strict";var a=i(2393);var r=i(548);var s=i(869);var n=i(546);var o=i(547);e.exports=n.extend({name:"EditorialMark",el:false,template:a,events:{"mouseenter ._editorial-tooltip":"showEditorialTooltip","mouseleave ._editorial-tooltip":"hideEditorialTooltip"},clientAfterRender:function e(){this.setNotExistView("editorialTooltip",o,{params:r.ViewInfoEditorial,content:new n({el:false,template:s,serialize:function e(){return{extendedMessage:true}}})})},showEditorialTooltip:function e(t){t.stopPropagation();this.getView("editorialTooltip").show(t)},hideEditorialTooltip:function e(t){t.stopPropagation();this.getView("editorialTooltip").hide(t)}})},2393:function(e,t,i){"use strict";e.exports=function e(t){var i='<span class="file-view__link-content file-view__link-content_rounded editorial-mark"><span class="editorial-mark__content _editorial-tooltip"><i class="icon icon-editorial-pencil"></i><span class="editorial-mark__text">'+this.tr("Editorial Use Only")+'</span> <i class="icon icon-help"></i></span></span>';return i}},2394:function(e,t,i){},494:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(0);var o=i(2383);var l=i(2384);var c=i(2385);var u=i(2386);var d=i(1859);var h=i(1860);var p=i(546);var f=i(581);var v=i(615);var m=i(582);var b=i(711);var g=i(689);var _=i(2387);var w=i(1703);var y=i(1706);var k=i(1595);var x=i(1866);var C=i(1868);var S=i(2391);var T=i(1574);var M=i(1563);var P=i(1869);var L=i(1715);var O=i(1872);var E=i(2392);var D=i(1717);var F=i(901);var I=i(1875);var z=i(24);i(1878);i(2394);i(1879);i(1684);i(1579);i(1685);i(776);e.exports=h.extend({prepareRender:function e(){var t=this;if(this.file.validationError||!n.isEmpty(this.file.validationError)){return}this.setViews({"":[new p({app:this.app,tagName:"div",name:"wrapper",className:this.getWrapperClassNames(),views:{"":[new f({app:this.app,views:{"._search-bar":new b({app:this.app}),"._user-bar":new g({app:this.app})}}),new v({views:{"._content":new _({app:this.app,file:this.file,createDesignEnabled:this.shouldShowCreateDesign(),views:{"._file-view-thumb":new w({app:this.app,model:this.file,showDownloadButtonInZoomMode:!this.app.user.isLoggedIn(),zoomDownloadCallback:this.zoomDownloadCallback.bind(this),shouldShowFileId:this.app.features.isFeatureOnValue("File View Mobile Design Upgrade"),views:{"._thumb-find-similar":this.getFindSimilarThumbView()}}),"._copyright":this.getCopyrightView(),"._find-similar":this.getFindSimilarView(),"._design":this.getCreateDesignView(),"._editorial":this.getEditorialView(),"._title":new y({app:this.app,template:o,model:this.file}),"._file-view-info":this.getInfoView(),"._download-method-selector":new T({app:this.app,viewMode:"page",shouldBeShown:function e(){return!t.file.isBannedForCountry()}}),"._price-table":this.getPriceTableView({app:this.app,file:this.file,fallbackOptions:{icon:"icon-error-grey-transparent",classNames:"price-table-fallback_page"},onLicenseBtnClick:this.openLicenseWizardModal.bind(this),buttonClassNames:"button-pill button-bold button-large-padding",onDownloadBegins:function e(){return t.app.observer.fire("ToTopButton:Scroll")}}),"._file-view-bottom":this.getBottomView()}})}}),new m({app:this.app})]}})]})},getFindSimilarView:function e(){if(this.file.isBannedForCountry()){return[]}var t=this.file.get("type");return new L({app:this.app,file:this.file,classNames:"file-view__link-content_rounded",iconClassNames:z.classNames({"icon-see-more-videos-dark":t==="video","icon-see-more-images-dark":t!=="video"})})},getFindSimilarThumbView:function e(){if(this.file.isBannedForCountry()){return[]}return new L({app:this.app,template:u,file:this.file,classNames:z.classNames({"button-similar-video":this.file.get("type")==="video","button-thick-icon":true})})},getCreateDesignView:function e(){if(this.file.isBannedForCountry()||!this.shouldShowCreateDesign()){return[]}return new D({app:this.app,template:d,model:this.file,classNames:"create-design_page file-view__link-content_rounded",iconClassNames:"icon-create-design-dark icon-create-design-only-brush"})},getPriceTableView:function e(t){if(this.app.features.isFeatureOnValue("Price Table Upgrade")){return new P(r({},t,{classNames:z.classNames({"price-table_white":true,"price-table_one-size":this.app.features.isFeatureEnabled("Single pay for multiple sizes",1)}),footerClassNames:z.classNames({"price-table__footer_es":this.app.user.isEnterprise(),"price-table__footer_video":this.file.get("type")==="video"}),licenseButtonClassNames:"button-xxl button-watery button-bold"}))}return new M(r({},t,{classNames:z.classNames({"price-table-classic_white":true,"price-table-classic_white-solid":true,"price-table-classic_one-size":this.app.features.isFeatureEnabled("Single pay for multiple sizes",1)}),footerClassNames:z.classNames({"price-table-classic__footer":this.isClassicPriceTable,"price-table-classic__footer_es":this.app.user.isEnterprise()&&this.isClassicPriceTable}),licenseButtonClassNames:"button-watery button-bold"}))},getInfoView:function e(){if(this.app.features.isFeatureOnValue("File View Classic")){return[]}return new k({model:this.file,app:this.app,viewMode:this.viewMode})},getCopyrightView:function e(){if(!this.app.features.isFeatureOnValue("File View Classic")){return[]}return new O({app:this.app,model:this.file})},getEditorialView:function e(){if(!this.file.get("editorial")){return[]}return new E({app:this.app})},getBottomView:function e(){var t=[new S({template:c,model:this.file,app:this.app,viewMode:this.viewMode,views:{"._label":this.getLabelView(),"._copyright":this.getCopyrightView()}})];if(this.shouldShowSearchCategories()){t.push(new I({app:this.app,collection:this.relatedSearches,classNames:"related-item__title_bold"}))}t.push(new C({app:this.app,template:l,model:this.file,related:this.related,series:this.series,classNames:"file-view__related-wrapper_bold-titles file-view__related-wrapper_rounded-keywords"}));return t},getLabelView:function e(){if(this.shouldShowBanner()){return new F({app:this.app,model:this.banner})}if(this.shouldShowAdvertising()){return new x({app:this.app,model:this.file,minPrices:this.minPrices})}return[]},getWrapperClassNames:function e(){return z.classNames({wrapper:true,"wrapper_file-view":true,wrapper_push:this.app.features.isFeatureOnValue("File View Mobile Design Upgrade")})},zoomDownloadCallback:function e(t){this.findView("PriceTable").onDownloadClick(t)},useThumbMaxSize:function e(){return this.file.get("type")!=="video"&&this.app.features.isFeatureOnValue("File View Classic")&&this.app.features.isFeatureOnValue("Max size file view")},isBroadFileViewEnabled:function e(){return this.app.features.isFeatureOnValue("Broad size file view")&&this.app.features.isFeatureOnValue("File View Classic")&&this.file.get("type")!=="video"},getFileThumbForMeta:function e(){if(this.isBroadFileViewEnabled()){return this.file.makeThumb("large")}if(this.useThumbMaxSize()){return this.file.makeThumb("max")}return this.file.makeThumb("huge")}})},550:function(e,t,i){"use strict";(function(e){var t=i(0);var a=i(566);var r=i(9),s=r.getLogger;var n=s(e);var o=3e4;var l="100";var c=["003","004","005","007","012","015","041","043","057","062","078","093","117","0R0","0R1","0R3"];e.exports={parse:function e(i,a,r){var s=this;if(a===void 0){a=[]}if(r===void 0){r={}}if(!i){return n.error("App is required for errors parser.")}var o=a.map((function(e){return s.parseError(i,s.prepareError(e))}));return this.format(t.flatten(o),r)},format:function e(i,a){if(i===void 0){i=[]}if(a===void 0){a={}}if(a.associate){var r={};t.each(i,(function(e){r[e.field]=e.message}));return r}return i},prepareError:function e(t){var i=t.error_code,a=i===void 0?"":i,r=t.error_message,s=r===void 0?"":r,n=t.error_data,l=n===void 0?{}:n;var c=l.validationCode;if(a===o){var u=s.split(":"),d=u[0],h=u[1];return{code:d,message:h,validationCode:c}}return{code:a,message:s,validationCode:c}},parseError:function e(i,r){var s=a.get(r.code);var n=a.get("default").message(i,r.code,r.message);var o={code:r.code,field:a.get("default").field,message:n};if(!s){return[o]}if(s.code===l){if(!r.validationCode){return[o]}var c=t(s.errors).findWhere({validationCode:r.validationCode});if(c){return[{code:r.code,field:c.field,message:c.message?c.message(i):n}]}return[o]}return s.errors.map((function(e){return{code:s.code,field:e.field,message:e.message?e.message(i):n}}))},filterOwn:function e(i,r,s){if(i===void 0){i={}}if(r===void 0){r=[]}if(s===void 0){s={global:false}}if(s.global){r.push(a.get("default").field)}return t.pick(t.clone(i),r)},isPaymentFailureError:function e(i){return t.contains(c,i)},getErrorsMessage:function e(t,i,a){if(i===void 0){i=[]}if(a===void 0){a={}}var r=a,s=r.separator,n=s===void 0?". ":s;return this.parse(t,i).map((function(e){return e.message})).join(n)}}}).call(this,i(5)(e))},551:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(23);var o=i(546);var l=i(640);var c=i(554);var u=i(550);var d=i(555);e.exports=o.extend(c).extend({name:"BaseProduct",el:false,serializeParams:{},showRebillHandlers:false,originalEvents:{"mouseenter ._help":"showHelpTooltip","mouseleave ._help":"hideHelpTooltip","mouseenter ._info":"showInfoTooltip","mouseleave ._info":"hideInfoTooltip","click ._force-rebill":"handleForceRebillClick"},additionalEvents:{},countries:[],userGroupInfo:undefined,showRebillDiscount:true,initialize:function e(){if(this.showRebillHandlers){Object.assign(this,l)}this.statuses={ended:this.tr("Ended"),blocked:this.tr("Blocked"),expired:this.tr("Expired"),pending:this.tr("Pending"),rejected:this.tr("Rejected"),waitingRebill:this.tr("Waiting for Rebill")}},events:function e(){return Object.assign({},this.originalEvents,this.additionalEvents)},prepareRender:function e(){if(this.showRebillHandlers){this.initRebillProduct()}},serialize:function e(){var t=this.app.user.serialize();var i=Object.assign({},this.product);return r({user:t,product:i,rebill:r({showDiscount:this.showRebillDiscount},this.getRebillInfo()),actionBtn:this.getActionBtnInfo(),needToShowHelpTooltip:this.needToShowHelpTooltip(),labels:{base:this.getBaseLabel(),left:this.getLeftLabel(),expires:this.getExpiresLabel(),status:this.getStatusLabel(),splitCount:this.getSplitCountLabel(),renew:this.getRenewLabel(),daysLeft:this.getDaysLeft(),license:this.getLicenseLabel(),licenseType:this.getLicenseTypeLabel(),curated:this.getCuratedLabel(),trial:this.getTrialLabel()},content:this.getProductContent()},this.getAdditionalSerializeParams())},getActionBtnInfo:function e(){var t=this.getRebillInfo();var i=this.product,a=i.type,r=i.status;var s=a==="membership"&&r==="active";var n=s?this.tr("Buy Downloads"):this.tr("Buy More");if(t.waiting||t.forceRequested){n=this.tr("Force Rebill")}var o="";if(t.forceRequested){o="disabled"}else if(t.waiting&&!t.editable){o="hidden"}else if(t.waiting&&t.editable){o="_force-rebill"}else if(s){o="_buy-more"}return{text:n,className:o}},getAdditionalSerializeParams:function e(){return r({},this.serializeParams)},getProductContent:function e(t){if(t===void 0){t=this.product}var i={type:t.type,title:this.getBaseLabel(t),info:[{key:"left",value:this.getLeftLabel(t)}],action:this.tr("Buy More")};if(t.type!=="membership"&&t.type!=="subscription"){i.info.push({key:"expires",value:this.getExpiresLabel(t)})}if(t.type!=="membership"&&t.split_count>0){i.info.push({key:"splitCount",value:this.getSplitCountLabel(t)})}return i},getRebillInfo:function e(){return{waiting:this.product.rebill&&this.product.rebill.waiting,editable:this.product.rebill&&this.product.rebill.editable,forceRequested:this.rebillManager&&this.rebillManager.force&&this.rebillManager.synced}},getStatusLabel:function e(t){if(t===void 0){t=this.product}var i=t,a=i.status;var r=this.getRebillInfo(),s=r.waiting;if(s){a="waitingRebill"}var n=this.statuses[a];return n?this.tr("Status")+": <b>"+n+"</b>":""},getBaseLabel:function e(t){if(t===void 0){t=this.product}return this.tr(t.baseLabel)},getLeftLabel:function e(t){if(t===void 0){t=this.product}var i=n.productLeftLabels.find((function(e){return e.type===t.type})),a=i.label;return this.tr(a,t.left)},getSplitCountLabel:function e(t){if(t===void 0){t=this.product}var i=n.productSplitCountLabels.find((function(e){return e.type===t.type}));return i?this.tr(i.label):""},getTrialLabel:function e(t){if(t===void 0){t=this.product}if(!t.hasTrial){return""}var i=t,a=i.trial;var r=[a.count,a.period,t.prices.start];var s=this.app.store.get("TaxHelper").isTaxEnabled()?"("+this.tr("plus %s",this.app.store.get("TaxHelper").get("name"))+")":"";var n=t.period===360?this.tr("%s images Free for %s days, then %s /year",r):this.tr("%s images Free for %s days, then %s /month",r);return s?n+" "+s:n},initForceRebillModel:function e(){var t=this;d(this.$("._force-rebill"));this.initRebillManager();this.rebillManager.force=true;this.listenTo(this.rebillManager,{request:function e(){return t.$("._force-rebill").trigger("loading")},sync:this.handleForceRebillSync.bind(this),error:this.handleForceRebillError.bind(this)})},handleForceRebillSync:function e(t,i){this.$("._force-rebill").trigger("loaded");if(i&&!i.errors){this.app.observer.fire("Notification",{type:"success",description:this.tr("Rebill requested successfully.")});this.el.querySelector("._force-rebill").classList.add("disabled");this.el.querySelector("._waiting-rebill").classList.add("product-item__cell_waiting-rebill_sent")}},handleForceRebillError:function e(t,i){var a=i.errors,r=a===void 0?[]:a;var s=u.getErrorsMessage(this.app,r);if(s){var n=this.$("._waiting-rebill");this.fieldIncorrect(n,{errorHolder:n,errorMessage:s})}},handleForceRebillClick:function e(t){t.preventDefault();if(!this.rebillManager){this.initForceRebillModel()}this.rebillManager.save({productId:this.model.id,productType:this.model.get("type"),rebillState:true})},initRebillProduct:function e(){},getExpiresLabel:function e(){},getRenewLabel:function e(){},getDaysLeft:function e(){},getCuratedLabel:function e(){},getLicenseLabel:function e(){},getLicenseTypeLabel:function e(){},needToShowHelpTooltip:function e(){},showHelpTooltip:function e(){},hideHelpTooltip:function e(){},showInfoTooltip:function e(){},hideInfoTooltip:function e(){}})},557:function(e,t,i){"use strict";(function(e){var a=i(4);var r=i(31);var s=[];var n=function e(t){if(!t||!t.length){return undefined}var i=t.attr("id").split("g-recaptcha-response-");return i[1]?i[1]:undefined};var o=function t(i){if(!e.browser||!window.grecaptcha){return}var a=n(i);try{grecaptcha.reset(a)}catch(r){}};t.reset=o;t.injectScript=function(){return new Promise((function(t,i){if(!e.browser){i()}else if(window.grecaptcha){t()}else if(s.length===0){s.push(t);window.onloadRecaptchaCallback=function(){s.forEach((function(e){return e()}));s=[]};r({id:"recaptcha",async:true,src:a.client.recaptcha.apiUrl+"?onload=onloadRecaptchaCallback&render=explicit"})}else{s.push(t)}}))};t.render=function(e){return new Promise((function(t,i){if(e){try{grecaptcha.render(e);t()}catch(a){i(a)}}else{i()}}))}}).call(this,i(16))},564:function(e,t,i){"use strict";i(594);var a=i(595);var r=i(556);var s=i(546);e.exports=s.extend({name:"LanguageSelector",el:false,template:a,events:{"click ._link":"onLinkClick","contextmenu ._link":"onCustomLinkClick","mouseup ._link":"onCustomLinkClick"},serialize:function e(){var t=this.app.getLanguages();var i=Math.ceil(t.filter((function(e){return e.active})).length/2);return{activeLang:this.app.lang,locales:[t.slice(0,i),t.slice(i)]}},onLinkClick:function e(t){if(t.ctrlKey||t.shiftKey||t.metaKey){this.trackNewTabClick(t);return}t.preventDefault();this.app.observer.broadcast("Track:UE:Language:Change");this.app.router.redirect(t.currentTarget.href)},onCustomLinkClick:function e(t){if(![r.rightMouse,r.middleMouse].includes(t.which)){return}this.trackNewTabClick(t)},trackNewTabClick:function e(t){this.app.observer.broadcast("Track:UE:Language:ChangeInNewTab",{source:this.name})}})},565:function(e,t,i){"use strict";var a=i(2);var r=i(639);var s=a.extend({getQueryParams:function e(){return this.pick(Object.keys(this.defaults))},parse:function e(t){this.handleErrors(t);return{}}});Object.assign(s.prototype,r);e.exports=s},566:function(e,t,i){"use strict";var a="global";var r=[{code:"default",field:a,message:function e(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++){a[r-1]=arguments[r]}return t.translator.tr("Error: %s (%s).",a)+" "+t.translator.tr('Please contact our <a href="%s" class="%s">support service</a> or your card issuer.',[t.makeUrl("contact_us"),"link-blue"])}},{code:"014",errors:[{field:"pan"}]},{code:"041",errors:[{field:a,message:function e(t){return t.translator.tr("The card is blocked. Please use a different card or contact your card issuer.")}}]},{code:"043",errors:[{field:a,message:function e(t){return t.translator.tr("The card is blocked. Please use a different card or contact your card issuer.")}}]},{code:"051",errors:[{field:a,message:function e(t){return t.translator.tr("The card has insufficient funds. Please use a different card or contact your card issuer.")}}]},{code:"054",errors:[{field:a,message:function e(t){return t.translator.tr("The card is expired. Please use a different card or contact your card issuer.")}}]},{code:"057",errors:[{field:a,message:function e(t){return t.translator.tr("It is possible that your online payment option is disabled. Please check with your "+"card issuer to solve the problem.")}}]},{code:"061",errors:[{field:a,message:function e(t){return t.translator.tr("Exceeds withdrawal amount limit")}}]},{code:"063",errors:[{field:a,message:function e(t){return t.translator.tr("Security violation")}}]},{code:"065",errors:[{field:a,message:function e(t){return t.translator.tr("Activity count limit for card exceeded. Please contact your card issuer.")}}]},{code:"093",errors:[{field:a}]},{code:"100",errors:[{validationCode:"01",field:"pan",message:function e(t){return t.translator.tr("Invalid Credit Card Number")}},{validationCode:"02",field:"cvv",message:function e(t){return t.translator.tr("Invalid Security Code")}},{validationCode:"03",field:"expiryMonth",message:function e(t){return t.translator.tr("Please check the Expiration Date")}},{validationCode:"04",field:"expiryYear",message:function e(t){return t.translator.tr("Please check the Expiration Date")}}]},{code:"105",errors:[{field:"address",message:function e(t){return t.translator.tr("Please check Street Address")}}]},{code:"106",errors:[{field:"zip",message:function e(t){return t.translator.tr("Invalid Zip/Postal Code")}}]},{code:"114",errors:[{field:"zip",message:function e(t){return t.translator.tr("Please check Zip/Postal Code")}},{field:"address",message:function e(t){return t.translator.tr("Please check Street Address")}},{field:"expiryMonth",message:function e(t){return t.translator.tr("Please check the Expiration Date")}}]},{code:"115",errors:[{field:"pan",message:function e(t){return t.translator.tr("Invalid Credit Card Number")}}]},{code:"117",errors:[{field:"pan"}]},{code:"118",errors:[{field:a,message:function e(t){return t.translator.tr("Currency Type Not Accepted")}}]},{code:"129",errors:[{field:"expiryMonth"}]},{code:"140",errors:[{field:"expiryMonth"}]},{code:"141",errors:[{field:"expiryMonth"}]},{code:"991",errors:[{field:a,message:function e(t){return t.translator.tr("The card is blocked. Please use a different card or contact your card issuer.")}}]},{code:"992",errors:[{field:a,message:function e(t){return t.translator.tr('Your IP blocked. Please contact our <a href="%s" class="%s">support service</a> \n\t\t\t\t\tto resolve this problem.',[t.makeUrl("contact_us"),"link-blue"])}}]},{code:"54002",errors:[{field:a,message:function e(t){return t.translator.tr("Looks like you signed up for a free trial before. You can purchase the plan to continue.")}}]},{code:"63002",errors:[{field:"pan"}]},{code:"0N7",errors:[{field:"cvv",message:function e(t){return t.translator.tr("Invalid Security Code")}}]},{code:"100111",errors:[{field:a}]}];e.exports.get=function(e){return r.find((function(t){return t.code===""+e}))}},567:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(0);var o=i(3);var l=i(4);var c=i(548);var u=i(566);var d=i(48);var h=i(73),p=h.captchaErrors;var f=i(619);var v=i(626);var m=i(627);var b=i(546);var g=i(547);var _=i(113);var w=i(554);var y=i(550);var k=i(557);var x=n.range(1,13);var C=".g-recaptcha-response";i(628);i(629);i(630);var S=b.extend({name:"MerchantCardManager",el:false,template:f,useSaved:false,useSavedState:false,classNames:"",expireFields:["expiryMonth","expiryYear","expiry"],events:{"focusin input":"onFieldFocusIn","focusin select":"onFieldFocusIn",'focusin [name="expiryMonth"]':"onExpiryFocusIn",'focusin [name="expiryYear"]':"onExpiryFocusIn","mouseenter ._lock":"onLockMouseEnter","mouseleave ._lock":"onLockMouseLeave","mouseenter ._card-helper":"onCardHelperMouseEnter","mouseleave ._card-helper":"onCardHelperMouseLeave","input ._cardPan":"onCardPanInput","change ._cardPan":"onCardChange","change ._expiryMonth":"onSelectChange","change ._expiryYear":"onSelectChange","input ._cvv":"onRegularFieldChange","focusin ._field":"handleUpdateFieldFocus","focusout ._field":"handleUpdateFieldFocus","change ._field":"onUpdateField","keyup ._field":"onUpdateField","input ._field":"onUpdateField","paste ._field":"onUpdateField","input ._masked-exp":"handleMaskedExpirationInput"},initialize:function e(t){this.setCardModel(t)},serialize:function e(){var t=this.model.serialize();return{useSaved:this.useSaved,useSavedState:this.useSavedState,attributes:r({},t,{number:this.model.getNumberLabel(t.pan,false),cvv:this.useSavedState?this.model.mask.cvv:t.labels.cvv}),expiration:{months:x,years:this.model.getExpirationYears()},classNames:this.classNames,captcha:{siteKey:l.client.recaptcha.publicKey}}},clientAfterRender:function e(){this.enableTooltips();this.focusOn()},getActiveCard:function e(){return this.model},getCaptchaValue:function e(){var t=this.$(C);return t.length?t.val():""},enableTooltips:function e(){this.setNotExistView("cardLock",g,{params:c.MerchantFormLock,content:new b({el:false,template:v})});this.setNotExistView("cardHelper",g,{params:c.MerchantManagerCard,content:new b({el:false,template:m,app:this.app})})},focusOn:function e(){this.$("._cardPan").focus()},setCardModel:function e(t){this.model=t.model||new _({expiryMonth:x[0],expiryYear:+o().format("YY")},{app:this.app});this.listenTo(this.model,{invalid:this.onModelInvalid,error:this.onModelError,change:this.onModelChangeCallback})},onModelInvalid:function e(t,i){var a=this;n.each(i,(function(e,t){return a.markError(t,e)}))},onModelError:function e(t,i){var a=this;var r=y.parse(this.app,i.errors,{associate:true});r=y.filterOwn(r,Object.keys(t.defaults),{global:true});if(this.$(C).length){this.resetCaptcha()}n.each(r,(function(e,t){var s=i.errors[Object.keys(r).indexOf(t)].error_code;a.markError(t,e,s)}))},handleMaskedExpirationInput:function e(t){var i=t.currentTarget.value;var a=i.replace(/[/\s]/g,"");var r=a.length>=2;var s=r?a.replace(/^(\d{0,2})(\d{0,2})$/g,"$1/$2"):a;var n=s.split("/"),o=n[0],l=n[1];this.model.set({expiryMonth:o,expiryYear:l});this.$(t.currentTarget).val(s);var c=s.length===a.length?1:s.length-a.length+(r?1:0);var u=i.lastIndexOf(a[a.length-1])+c;t.currentTarget.setSelectionRange(u,u)},markError:function e(t,i,a){if(Object.values(p).includes(a)&&!this.$(C).length){this.showCaptcha()}else if(this.expireFields.includes(t)){this.markExpiryFieldsError(i)}else if(t===u.get("default").field||!t){this.fieldIncorrect(this.$("._errorHolder"),{errorMessage:i})}else{this.fieldIncorrect(this.$("[name="+t+"]").parent(),{errorMessage:i,errorHolder:this.getFieldErrorHolder(t)})}},markExpiryFieldsError:function e(t){if(t===void 0){t=this.tr(d.InvalidExpirationDate)}this.fieldIncorrect(this.$('[name="expiryMonth"]').parent(),{errorMessage:t});this.fieldIncorrect(this.$('[name="expiryYear"]').parent());this.fieldIncorrect(this.$('[name="expiry"]').parent())},getFieldErrorHolder:function e(t){var i=["pan","expiry","cvv"];var a=this.$("._fields-group-error");if(i.includes(t)&&a.length){return a}return undefined},validate:function e(){if(this.useSaved&&this.useSavedState){return true}if(this.model.get("number")){this.model.set({number:this.model.prepareNumberForSet()})}if(this.$(C).length&&!this.$(C).val()){this.fieldIncorrect(this.$("._captcha").parent(),{errorMessage:"Please check the ReCaptcha check box."});return false}return this.model.isValid(true)},resetErrors:function e(){var t=this;this.fieldReset(this.$("._errorHolder"));n.each(this.$("input, select, ._captcha"),(function(e){return t.fieldReset(t.$(e).parent())}))},showCaptcha:function e(){var t=this;k.injectScript().then((function(){return k.render(t.$("._captcha")[0])}))},resetCaptcha:function e(){k.reset(this.$(C))},resetCaptchaError:function e(){this.fieldReset(this.$("._captcha").parent())},onFieldFocusIn:function e(t){this.fieldReset(this.$("._errorHolder"));this.fieldReset(this.$(t.currentTarget).parent(),{errorHolder:this.getFieldErrorHolder(t.currentTarget.getAttribute("name"))})},onExpiryFocusIn:function e(){this.fieldReset(this.$('[name="expiryMonth"]').parent());this.fieldReset(this.$('[name="expiryYear"]').parent())},onLockMouseEnter:function e(t){this.getView("cardLock").show(t)},onLockMouseLeave:function e(t){this.getView("cardLock").hide(t)},onCardHelperMouseEnter:function e(t){this.getView("cardHelper").show(t)},onCardHelperMouseLeave:function e(t){this.getView("cardHelper").hide(t)},onCardPanInput:function e(t){var i=this.model.prepareNumberForSet(t.currentTarget.value);this.model.set({pan:i,number:i});Backbone.$(t.currentTarget).val(this.model.getNumberLabel(i,false))},onRegularFieldChange:function e(t){this.model.set(t.currentTarget.name,t.currentTarget.value)},onSelectChange:function e(t){this.model.set(t.currentTarget.name,parseInt(t.currentTarget.value,10))},onModelChangeCallback:function e(){},onCardChange:function e(){}});Object.assign(S.prototype,w);e.exports=S},568:function(e,t,i){"use strict";var a=i(641);var r=i(546);e.exports=r.extend({name:"Card",el:false,template:a,mode:"view",size:"medium",initialize:function e(){this.listenTo(this.model,"change",this.render)},serialize:function e(){var t=this.model.serialize();t.labels.cvv=t.labels.cvv||this.model.mask.cvv;return{model:t,classes:this.createCardClasses(),numberLength:this.model.prepareNumberForSet(t.number).length}},createCardClasses:function e(){var t="card-box_size-"+this.size[0].toLowerCase();if(this.mode==="edit"){t+=" card-box_edit"}var i=this.model.getTypeFromNumber();var a=this.model.get("paymentTokenType");if(i){t+=" card-box_type-"+i.replace(/_/g,"-")}else if(a&&a!=="raw"){t+=" card-box_type-"+a.replace(/_/g,"-")}return t}})},569:function(e,t,i){"use strict";var a=r(i(553));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,i,a,r,s,n){try{var o=e[s](n);var l=o.value}catch(c){i(c);return}if(o.done){t(l)}else{Promise.resolve(l).then(a,r)}}function n(e){return function(){var t=this,i=arguments;return new Promise((function(a,r){var n=e.apply(t,i);function o(e){s(n,a,r,o,l,"next",e)}function l(e){s(n,a,r,o,l,"throw",e)}o(undefined)}))}}i(644);var o=i(0);var l=i(645);var c=i(558);var u=i(567);var d=i(622);var h=i(646);var p=i(113);var f=i(550);e.exports=c.extend({name:"MerchantForm",template:l,classNames:"",savedCards:[],useSaved:false,initialize:function e(t){var i=this;this.formId=t.formId||this.cid;this.model=t.model||new p(t.modelAttrs||{},{app:this.app});this.listenTo(this.model,{request:this.onModelRequest,sync:this.onModelSyncSuccess,invalid:this.onModelInvalid,error:this.onModelError});this.setViews({"._merchant-card-manager":new(this.useSaved?d:u)({app:this.app,model:this.model,savedCards:this.savedCards,onModelChangeCallback:function e(){return i.onCardChangeCallback.apply(i,arguments)}})})},serialize:function e(){return{formId:this.formId,classNames:this.classNames}},prepareSubmit:function e(){var t=this.getView("._merchant-card-manager");if(!t){return}this.model.set({captcha:t.getCaptchaValue()});t.resetErrors()},validate:function e(){return this.getView("._merchant-card-manager").validate()},submit:function(){var e=n(a.default.mark((function e(t){return a.default.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:if(t===void 0){t=true}if(!t){i.next=4;break}i.next=4;return this.confirmSubmit();case 4:this.onStartFormSubmit();this.model.save({},{success:this.onSaveSuccess.bind(this)});case 6:case"end":return i.stop()}}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),confirmSubmit:function e(){return this.setNotExistView("ConfirmationModal",h).show()},markError:function e(){var t;(t=this.getView("._merchant-card-manager")).markError.apply(t,arguments)},onSaveSuccess:function e(t,i){if(!t.validationError&&!i.errors){this.onSuccessFormSubmit(t,i)}},onModelRequest:function e(){this.getView("._merchant-card-manager").resetCaptchaError()},onModelSyncSuccess:function e(t,i){this.onFinishFormSubmit();if(i.errors){this.getView("._merchant-card-manager").resetCaptcha()}},onModelInvalid:function e(t,i){this.checkForExternalErrors(t,i)},onModelError:function e(t,i){this.onFinishFormSubmit();var a=f.parse(this.app,i.errors,{associate:true});this.checkForExternalErrors(t,a)},checkForExternalErrors:function e(t,i){var a=o.omit(i,Object.keys(t.defaults));if(!o.isEmpty(a)){this.onModelExternalError(a)}},onCardChangeCallback:function e(){},onModelExternalError:function e(){},onStartFormSubmit:function e(){},onFinishFormSubmit:function e(){},onSuccessFormSubmit:function e(){}})},570:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="installment-rebill-info"><span>'+this.tr("You have purchased a one-year plan with monthly billing. This means, you opted for a plan which offers a discounted monthly price for a one year commitment.")+"</span><br><br><span>"+this.tr("You can turn off the Auto-Renewal during the last month of your annual commitment. This will prevent the plan from renewing for another one-year commitment.")+"</span><br><br><span>"+this.tr("If you’re looking to cancel your annual plan early, please contact us and we can explore your options.")+"</span></div>";return i}},575:function(e,t,i){},578:function(e,t,i){"use strict";var a=i(0);var r=i(546);var s=i(28);var n=i(11);var o=10;var l="none";var c=100;var u=300;var d=16;e.exports=r.extend({name:"Tabs",el:false,schema:[],subSchema:[],preventDefaultAction:false,urlLessTabs:false,menuUnderline:false,classNames:"",active:"",subActive:"",serializeData:{},events:{"click ._tab":"onTabClick","mouseenter ._tab":"onTabMouseEnter","mouseleave ._tab":"onTabMouseLeave","touchend ._scroll":"onScrollTouchEnd","click ._nav-left":"onNavLeftClick","click ._nav-right":"onNavRightClick"},globals:{"resize window":"onWindowResize"},initialize:function e(){this.schema=new s(a.result(this,"schema"));this.defineActiveTab();this.subSchema=new s(a.result(this,"subSchema"));this.prepareSubTabs();this.listenTo(this.schema,"change update",this.render)},serialize:function e(){return Object.assign({},{classNames:this.classNames,urlLessTabs:this.urlLessTabs,scheme:this.getEnabled().map((function(e){return e.serialize()})),subScheme:this.subSchema.serialize(),isRendered:this.isRendered},this.serializeData)},clientAfterRender:function e(){if(this.menuUnderline){this.setDefaultMenuUnderline()}if(this.isScrollPositionSet){this.setScrollPosition();this.$("._scroll").removeClass("invisible")}this.updateNavigation();this.isRendered=true},onWindowResize:a.throttle((function(){if(this.menuUnderline){this.setDefaultMenuUnderline()}if(this.isScrollPositionSet){this.setScrollPosition()}this.updateNavigation()}),o),onTabClick:function e(t){var i=t.currentTarget.dataset.key;var a=this.schema.findWhere({key:i});if(a&&a.get("onClick")){a.get("onClick").call(null,t);return}var r;if(this.preventDefaultAction||a&&a.get("toggler")||a&&a.get("active")||a&&a.get("isDefault")===true&&this.schema.findWhere({toggler:true,active:true})){t.preventDefault()}if(a&&a.get("toggler")&&a.get("active")){i=this.schema.findWhere({isDefault:true}).get("key");r=a.get("key")}if(a&&a.get("target")!=="_blank"){this.setActiveTab(i,r)}},onTabMouseEnter:function e(t){if(!this.menuUnderline){return}var i=this.$(t.currentTarget);var a=i.offset().left-this.$el.offset().left;this.menuUnderlinePosition(a,i.outerWidth())},onTabMouseLeave:function e(){if(this.schema.where({active:true}).length>0){var t=this.schema.findWhere({pseudoActive:true});if(t){t.set({pseudoActive:false})}}if(this.menuUnderline){this.setDefaultMenuUnderline()}},onScrollTouchEnd:function e(){this.updateNavigation()},onNavLeftClick:function e(){var t=this;var i=this.$("._scroll").scrollLeft();this.$("._scroll").animate({scrollLeft:Math.max(i-c,0)},u,(function(){return t.updateNavigation()}))},onNavRightClick:function e(){var t=this;var i=this.$("._scroll").scrollLeft();this.$("._scroll").animate({scrollLeft:i+c},u,(function(){return t.updateNavigation()}))},updateNavigation:function e(){var t=this.$("._scroll");if(t.length===0){return}var i=this.$("._tab:last");var a=i.offset().left+i.width()-d;this.$("._nav-left").toggleClass("active",t.scrollLeft()>d);this.$("._nav-right").toggleClass("active",a>t.width())},setDefaultMenuUnderline:function e(){var t=this.$("._tab-active");var i=t.offset().left-this.$el.offset().left;this.menuUnderlinePosition(i,t.outerWidth())},menuUnderlinePosition:function e(t,i){this.$("._menu-underline").css({left:t,width:i}).removeClass("hidden")},setScrollPosition:function e(){var t=this.$("._active");if(t.length===0){return}var i=t.offset().left;if(i+t.outerWidth()>window.innerWidth){this.$("._scroll").scrollLeft(i)}},defineActiveTab:function e(){var t=this;this.schema.each((function(e){var i=e.get("active")!=null?e.get("active"):t.defineTabActivityByProperty(e);if(t.active===l){i=false}e.set({url:t.app.makeUrl(e.get("urlKey")||e.get("key")||""),active:i!=null?i:t.defineTabByUrl(e),enabled:a.isUndefined(e.get("enabled"))||e.get("enabled")===true||a.isFunction(e.get("enabled"))&&e.get("enabled")(t.app.user)})}));if(this.shouldForceSetActive()){var i=this.schema.findWhere({isDefault:true})||this.schema.first();if(i){this.setActiveTab(i.get("key"),undefined,{silent:true})}}},shouldForceSetActive:function e(){return this.active!==l&&(!this.getActiveTab()||!this.getActiveTab().get("enabled"))},prepareSubTabs:function e(){var t=this;this.subSchema.each((function(e){return e.set({url:t.app.makeUrl(e.get("urlKey")||e.get("key")||""),active:e.get("key")===t.subActive,enabled:a.isUndefined(e.get("enabled"))||e.get("enabled")===true||a.isFunction(e.get("enabled"))&&e.get("enabled")(t.app.user)})}))},defineTabActivityByProperty:function e(t){return this.active&&this.active.length?t.get("key")===this.active:null},defineTabByUrl:function e(t){var i=this.app.makeUrl(t.get("key"));return!!i&&(this.app.parsedUrl.pathname===i||!t.get("isDefault")&&n.isBelongTo(i+"/",this.app.parsedUrl.pathname+"/"))},reset:function e(t){this.setActiveTab(t||this.schema.first().get("key"))},setActiveTab:function e(t,i,a){if(this.schema.findWhere({key:t}).get("active")){return}if(this.getActiveTab()){this.getActiveTab().set({active:false})}this.schema.findWhere({key:t}).set({active:true});if(i){this.schema.findWhere({key:i}).set({pseudoActive:true})}if(!a||!a.silent){this.changeTabCallback(this.getActiveTab())}},getActiveTab:function e(){return this.schema.findWhere({active:true})},getActiveTabIndex:function e(){return this.schema.indexOf(this.getActiveTab())},getEnabled:function e(){return this.schema.where({enabled:true})},changeTabCallback:function e(){}})},580:function(e,t,i){"use strict";var a=i(0);var r=i(631);var s=i(2);var n=i(28);var o=i(663);e.exports=s.extend({url:"Series",defaults:r.seriesModelDefault,getQueryParams:function e(){return a.extend({},a.pick(this.attributes,"name","lang","random"),{limit:this.get("alone")?1:this.get("limit")})},parse:function e(t){var i=this.get("elements")?this.get("elements").reset(t.elements||[],{parse:true}):new n(t.elements||[],{app:this.app,model:o,parse:true});return a.extend({},t,{elements:i})},toJSON:function e(){var t=a.omit(this.attributes,"elements");t.elements=[];if(this.get("elements")){this.get("elements").each((function(e){t.elements.push(e.toJSON())}))}if(this.get("grid")){t.grid=this.makeGrid()}return t},makeGrid:function e(){var t=this.get("grid");var i=[];var r=[];a.each(a.range(t.rows),(function(e){var s=[];a.each(a.range(t.columns),(function(i){var n=e+":"+i;if(a.indexOf(r,n)>-1){return}var o={};if(t.spans&&t.spans[n]){a.extend(o,t.spans[n]);a.each(a.range(1,t.spans[n].colspan||1),(function(t){r.push(e+":"+(i+t))}));a.each(a.range(1,t.spans[n].rowspan||1),(function(s){r.push(e+s+":"+i);a.each(a.range(1,t.spans[n].colspan||1),(function(t){r.push(e+s+":"+(i+t))}))}))}s.push(o)}));if(s.length){i.push(s)}}));return i},getFirstImage:function e(){var t=this.get("elements").first();if(!t){return null}var i=t.get("resource");if(!i){return null}return(i.get("src")||{}).jpg},getImagesList:function e(t){if(t===void 0){t="name"}var i={};var a=this.get("elements");if(a){a.each((function(e){var a=e.get("resource");if(a){i[e.get(t)]=(a.get("src")||{}).jpg}}))}return i}})},581:function(e,t,i){"use strict";(function(t){i(583);i(584);var a=i(0);var r=i(548).LanguagesSelector;var s=i(585);var n=i(586);var o=i(587);var l=i(588);var c=i(589);var u=i(546);var d=i(547);var h=i(576);var p=i(590);var f=i(564);var v=i(596);var m=i(560);i(739);i(599);var b=10;e.exports=u.extend({name:"Header",el:false,template:function e(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}if(this.mobileMode){return l.apply(this,i)}return this.app.user.isEnterprise()&&!this.fixedTemplate?o.apply(this,i):s.apply(this,i)},amp:n,bigLogo:false,whiteLogo:false,headerPageName:false,headerLite:false,headerFixedWidth:false,headerSearchBarCenter:false,headerSearchBarOpen:false,headerWithoutSearchBar:false,headerWithoutSignUpButton:false,headerLanding:false,mobileMode:false,fixedTemplate:false,isPinnedDesktop:false,isPinnedMobile:true,isMobileMenuVisible:false,scrollY:null,isFlyingSandwichAllowed:null,events:{"click ._langs":"onLangsClick","click ._btn-menu":"onBtnMenuClick","click ._menu":"onMenuClick","click ._btn-search":"onBtnSearchClick","click ._btn-custom-menu":"onBtnCustomMenuClick"},globals:{"resize window":"onWindowResize","scroll window":"onWindowScroll"},initialize:function e(){this.showLocales=this.app.langsEnabled()&&this.app.getLanguages().filter((function(e){return e.active})).length>1;this.listenTo(this.app.observer,{"SearchBar:Back":this.observeSearchBarBack,"Responsive:MobileMenuOpenStart":this.onSidebarOpenStart,"Responsive:MobileMenuOpenEnd":this.onSidebarOpenEnd,"Responsive:MobileMenuCloseStart":this.onSidebarCloseStart,"Responsive:MobileMenuCloseEnd":this.onSidebarCloseEnd})},prepareRender:function e(){this.isMobileSize=t.browser?m.mobileMode():this.mobileMode;this.mobileMode=this.app.device.isMobile||this.isMobileSize;this.setView("._phones-list",new p({app:this.app,dropdownAllowed:!this.app.ampEnabled}));this.setView("._livechat",new h({app:this.app,template:c}));this.setView("._test-cc",new v({app:this.app}))},serialize:function e(){return{showLocales:this.showLocales,hideAuth:this.hideAuth,bigLogo:this.bigLogo,whiteLogo:this.whiteLogo,mobileMode:this.mobileMode,activeLang:this.app.lang,headerPageName:this.headerPageName,headerLite:this.headerLite,headerLanding:this.headerLanding,headerFixedWidth:this.headerFixedWidth,headerSearchBarCenter:this.headerSearchBarCenter,headerSearchBarOpen:this.headerSearchBarOpen,headerWithoutSearchBar:this.headerWithoutSearchBar,headerTitle:this.headerTitle,headerModifiers:this.headerModifiers,headerMobileModifiers:this.headerMobileModifiers,isPinnedDesktop:this.isPinnedDesktop,isPinnedMobile:this.isPinnedMobile,isMobileMenuVisible:this.isMobileMenuVisible,topLinks:{photos:this.app.makeUrl("stock-photography",{protocol:this.app.parsedUrl.protocol}),vectors:this.app.makeUrl("stock-vectors",{protocol:this.app.parsedUrl.protocol}),editorials:this.app.makeUrl("editorial-photography",{protocol:this.app.parsedUrl.protocol}),videos:this.app.makeUrl("stock-videos",{protocol:this.app.parsedUrl.protocol})},subscribeLink:this.app.makeUrl("subscribe",{backURL:true}),enterpriseLink:this.app.makeUrl("enterprise"),isItemPropEnabled:this.isItemPropEnabled()}},clientAfterRender:function e(){if(this.showLocales){this.setNotExistView("languages",d,{params:r,content:new f({app:this.app})})}this.isFlyingSandwichAllowed=this.isMenuButtonOnTop()},isItemPropEnabled:function e(){return!this.app.features.isFeatureOnValue("JSON for Linked Data")},cleanup:function e(){this.undelegateEvents()},toggleLanguagesToolTip:function e(t){this.getView("languages").toggle(t)},onWindowResize:a.throttle((function(){var e=m.mobileMode();if(e&&this.showLocales&&this.getView("languages").opened){this.toggleLanguagesToolTip()}if(e!==this.mobileMode||e!==this.isMobileSize){this.mobileMode=e;this.isMobileSize=e;this.render()}}),b),onWindowScroll:function e(t){this.isFlyingSandwichAllowed=this.isMenuButtonOnTop()},onLangsClick:function e(t){if(this.showLocales){this.toggleLanguagesToolTip(t)}},onBtnMenuClick:function e(){this.app.observer.fire("Responsive:ToggleMobileMenu",{cid:this.cid})},onMenuClick:function e(t){t.preventDefault();t.stopPropagation()},onBtnSearchClick:function e(){this.$("._search-bar").attr("hidden",false);this.$("._btn-menu").toggleClass("hidden",true);this.getView("._search-bar").focusOnInput()},onBtnCustomMenuClick:function e(){this.$("._user-bar-mobile").removeClass("hidden")},observeSearchBarBack:function e(){this.$("._search-bar").attr("hidden",true);this.$("._btn-menu").toggleClass("hidden",false)},onSidebarOpenStart:function e(){if(!this.isFlyingSandwichAllowed){return}this.$("._btn-menu").addClass("hidden");Backbone.$("._sidebar-close").addClass("hidden");this.placeFakeSandwich(true)},isMenuButtonOnTop:function e(){var t=this.el.querySelector("._btn-menu");return t&&t.getBoundingClientRect().y===0},onSidebarOpenEnd:function e(){if(!this.isFlyingSandwichAllowed){return}this.removeFakeSandwich();Backbone.$("._sidebar-close").removeClass("hidden")},onSidebarCloseStart:function e(){if(!this.isFlyingSandwichAllowed){return}this.placeFakeSandwich(false);Backbone.$("._sidebar-close").addClass("hidden")},onSidebarCloseEnd:function e(){if(!this.isFlyingSandwichAllowed){return}this.$("._btn-menu").removeClass("hidden");Backbone.$("._sidebar-close").removeClass("hidden");this.removeFakeSandwich()},placeFakeSandwich:function e(t){var i=Backbone.$('<i class="header-mobile__btn header-mobile__btn_menu header-mobile__btn_menu-fake _fake-sandwich"></i>');i.toggleClass("active",!t);Backbone.$("body").append(i);setTimeout((function(){return i.toggleClass("active",t)}),0)},removeFakeSandwich:function e(){Backbone.$("._fake-sandwich").remove()}})}).call(this,i(16))},582:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(23),o=n.trusteRIds;var l=i(600);var c=i(601);var u=i(733);var d=i(546);var h=i(576);var p=i(602);var f=i(605);var v=i(572);var m=i(571);var b=i(11);var g=i(740),_=g.getSpecifications,w=g.isSpecified;i(612);i(613);var y=function e(t,i){if(!t.isExternalResource&&b.urlsAreEqual(i.parsedUrl.pathname,t.url)){t.classname=((t.classname||"")+" footer__link_active").trim()}return t};var k=function e(t){return t.content===true||t.content&&t.content.length>0};var x=function e(t,i){var a=!i||!i.length?Object.values(t):i.map((function(e){return t[e]}));return a.filter(w)};var C=function e(t,i){return Object.values(t).filter((function(e){return!i.includes(e.key)&&w(e)}))};var S=function e(t){return t.filter((function(e){return w(e)&&k(e)}))};var T=function e(t){if(t.user.isLoggedIn()){return[v.serializeContactPhone(t)]}var i=v.getContact(t);var a=v.getContact(t,{byLang:true});if(i.number===a.number){return[v.serialize(i,t)]}return[v.serialize(i,t),v.serialize(a,t)]};var M=function e(t,i){return{links:{about:{label:t.tr("About Us"),url:t.makeUrl("about")},subscribe:{label:t.tr("Our Plans &amp; Prices"),url:t.makeUrl("subscribe",{backURL:true})},enterprise:{label:t.tr("Enterprise Solution"),url:t.makeUrl("enterprise"),target:"_blank"},faq:{key:"faq",label:t.tr("Frequently Asked Questions"),url:t.makeUrl("faq")},blog:{label:t.tr("Depositphotos Blog"),url:t.makeUrl("blog"),target:"_blank",isSpecified:t.features.isFeatureOnValue("Is Blog Allowed"),isExternalResource:true},referral:{label:t.tr("Referral Program"),url:t.makeUrl("referral")},affiliate:{label:t.tr("Affiliate Program"),url:t.makeUrl("partners")},api:{label:t.tr("API Program"),url:t.makeUrl("api-program")},careers:{label:t.tr("Careers"),url:t.makeUrl("careers")},newest:{label:t.tr("Newest Images"),url:t.makeUrl({route:"Search",sorting:"newest"}),classname:"_newest"},free:{label:t.tr("Free Pictures"),url:t.makeUrl("free-images")},contributor:{label:t.tr("Become a Contributor"),noindex:i.isHtmlOnly,nofollow:i.isAmpOnly,shouldRenderAsPseudoLink:i.isHtmlOnly,pseudo:i.isAuthUserOnly?"examination":"contributor",url:i.isAuthUserOnly?t.makeUrl("examination"):t.makeUrl("signup",{protocol:"https:",query:{type:"seller"},backURL:true}),classname:"_become-contributor"},sell:{label:t.tr("Sell Stock Photos"),url:t.makeUrl("seller-price")},documents:{key:"documents",label:t.tr("All Documents"),shouldRenderAsPseudoLink:i.isHtmlOnly,nofollow:i.isAmpOnly,pseudo:"documents",url:t.makeUrl("legal-information")}},apps:{ios:{key:"ios",url:t.makeUrl("link_ios_app"),label:t.tr("Available on the"),classname:"cmp-app-store",isSpecified:!i.isChinaIP},android:{key:"android",url:t.makeUrl("link_gplay_app"),label:t.tr("Available on the"),classname:"cmp-google-play",isSpecified:!i.isChinaIP}},contacts:{phone:{key:"phone",phoneNumbers:T(t)},chat:{key:"live-chat",isSpecified:i.isHtmlOnly&&!i.isChinaIP},contact:{key:"contact",label:t.tr("Contact Us"),url:t.makeUrl("contact_us")},feedback:{key:"feedback",label:t.tr("Give Feedback"),isSpecified:i.isHtmlOnly},icp:{key:"icp",label:"沪ICP备18025064号",url:t.makeUrl("icpUrl"),isSpecified:i.isChinaIP}},legal:{requisites:r({key:"requisites"},t.store.get("Address")&&t.store.get("Address").get("fullAddress")?t.store.get("Address").serialize():{},{isSpecified:i.isRegularUserOnly}),terms:{key:"terms",label:t.tr("Terms of Use"),url:t.makeUrl("terms-of-use")},privacy:{key:"privacy",label:t.tr("Privacy Policy"),url:t.makeUrl("privacy-policy")}},socials:{facebook:{key:"facebook",url:t.makeUrl("facebookAccount"),label:"Facebook",classname:"button-social-facebook",isSpecified:!i.isChinaIP},twitter:{key:"twitter",url:t.makeUrl("twitterAccount"),label:"Twitter",classname:"button-social-twitter",isSpecified:!i.isChinaIP},vk:{key:"vk",url:t.makeUrl("vkAccount"),label:"VK",classname:"button-social-vk",isSpecified:i.isRuLang}},misc:{truste:{key:"truste",label:t.tr("TRUSTe online privacy certification"),url:t.makeUrl("truste",{query:o.find((function(e){return e.key===t.lang})).query}),isSpecified:!i.isChinaIP},bbb:{key:"bbb",label:t.tr("Depositphotos Inc. BBB Business Review"),url:t.makeUrl("bbb"),isSpecified:!i.isChinaIP},bird:{key:"bird",shouldRenderAsPseudoLink:i.isHtmlOnly,isSpecified:t.features.isFeatureOnValue("Is Bird in Flight Allowed")}}}};var P={regular:function e(t,i,a){return S([{key:"menu",title:t.tr("Depositphotos"),content:C(i.links,["faq","documents"]).map((function(e){return y(e,t)}))},{key:"lang",title:t.tr("Site Language"),content:true,isSpecified:!a.isChinaIP},{key:"legal",title:t.tr("Legal Information"),content:[x(i.links,["faq","documents"]).map((function(e){return y(e,t)}))]},{key:"misc",content:x(i.misc,["bird"])},{key:"contact",title:t.tr("Contact & Support"),titleClassName:a.isChinaIP?"footer__title_active":"",content:x(i.contacts)},{key:"social",title:t.tr("Follow Us"),content:x(i.socials),isSpecified:!a.isChinaIP},{key:"app",content:x(i.apps),isSpecified:!a.isChinaIP},{key:"copy",content:true}])},enterprise:function e(t,i,a){return S([{key:"lang",title:t.tr("Site Language"),content:true,isSpecified:!a.isChinaIP},{key:"contact",title:t.tr("Contact & Support"),titleClassName:a.isChinaIP?"footer__title_active":"",content:x(i.contacts)},{key:"logo",content:true},{key:"copy",content:true}])},lite:function e(t,i,a){return S([{key:"lang",title:t.tr("Site Language"),content:true,isSpecified:!a.isChinaIP},{key:"contact",title:t.tr("Contact & Support"),titleClassName:a.isChinaIP?"footer__title_active":"",content:x(i.contacts,["phone","chat","contact","icp"])},{key:"legal",title:t.tr("Legal Information"),content:[x(i.legal,["terms","privacy"])]},{key:"copy",content:true}])},payment:function e(t,i,a){return S([{key:"lang",title:t.tr("Site Language"),content:true,isSpecified:!a.isChinaIP},{key:"legal",title:t.tr("Legal Information"),content:a.isRegularUserOnly?[x(i.legal,["requisites"]),x(i.legal,["terms","privacy"])]:[x(i.legal,["terms","privacy"])]},{key:"contact",title:t.tr("Contact & Support"),titleClassName:a.isChinaIP?"footer__title_active":"",content:C(i.contacts,["feedback"])},{key:"copy",content:true}])}};e.exports=d.extend({name:"Footer",el:false,template:l,events:{"click ._feedback":"handleFeedbackClick","click ._become-contributor":"handleContributorClick","click ._newest":"handleNewestClick","click ._title":"handleTitleClick","mouseover [data-seolink]":"transformLink"},initialize:function e(){if(!this.builder||!P[this.builder]){this.builder=this.app.user.isEnterprise()?"enterprise":"regular"}},prepareRender:function e(){this.setViews({"._livechat":new h({app:this.app,className:"cmp-livechat-white",template:c}),"._langs-box":new p({app:this.app,type:this.app.user.isEnterprise()?"dropdown":"list"})})},serialize:function e(){var t=_(this.app);var i=M(this.app,t);var a={regular:"footer_regular",enterprise:"footer_es footer_single-column",lite:"footer_lite",payment:"footer_payment"};var r=P[this.builder]?P[this.builder](this.app,i,t):[];var s=u({footer_cn:t.isChinaIP,"footer_without-misc":!r.some((function(e){var t=e.key;return t==="misc"}))});return{columns:r,shouldUseAMP:this.app.ampEnabled,classname:(a[this.builder]+" "+s).trim(),birdInFlightData:this.getBirdInFlightData(),copyright:this.tr("&copy; 2009-%s. Depositphotos, Inc. USA. All Rights Reserved.",(new Date).getFullYear())}},clientAfterRender:function e(){this.setNotExistView("feedbackForm",f,{app:this.app})},handleContributorClick:function e(t){var i=this;if(this.app.user.isLoggedIn()){return}t.stopPropagation();t.preventDefault();this.app.chain.initChain("signup",{type:"seller"}).then((function(){return i.app.chain.start({type:"seller"})}))},handleNewestClick:function e(t){this.app.observer.broadcast("Track:UE:Footer:LinkClick",{position:this.$(t.currentTarget).parent().index()+1,text:t.currentTarget.innerText,type:"searchlink"})},handleTitleClick:function e(t){this.$(t.currentTarget).toggleClass("footer__title_active")},getBirdInFlightData:function e(){if(this.app.features.isFeatureOnValue("Is Bird in Flight Allowed")){return{active:true,type:"site",link:this.app.makeUrl("birdinflight")}}return{}},handleFeedbackClick:function e(t){t.preventDefault();t.stopPropagation();this.getView("feedbackForm").show()},transformLink:function e(t){m.transformToGeneratedLink(this.app,t.currentTarget)}})},583:function(e,t,i){},584:function(e,t,i){},585:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<header class="header';if(t.isPinnedDesktop){a+=" _pinner"}if(t.headerLite){a+=" header_lite"}if(t.headerLanding){a+=" header_landing"}if(t.headerFixedWidth){a+=" header_fixed-width"}if(t.headerSearchBarOpen){a+=" header_search"}if(t.headerWithoutSearchBar){a+=" header_without-search-bar"}if(t.headerPageName){a+=" header_page-"+i(t.headerPageName)}if(t.headerModifiers){a+=" "+i(t.headerModifiers)}a+='"><section class="_test-cc"></section><section class="header__line-top header__line-top_full"><ul class="header__top-left header__list">';if(t.headerLite){a+='<li class="header__list-item"><div class="_phones-list"></div></li>'}else{a+='<li class="header__list-item"><a href="'+t.topLinks.photos+'" class="header__top-link header__top-link_first link-white"><span>'+this.tr("Photos")+'</span></a></li><li class="header__list-item"><a href="'+t.topLinks.vectors+'" class="header__top-link link-white"><span>'+this.tr("Vectors")+'</span></a></li><li class="header__list-item"><a href="'+t.topLinks.editorials+'" class="header__top-link link-white"><span>'+this.tr("Editorial")+'</span></a></li><li class="header__list-item"><a href="'+t.topLinks.videos+'" class="header__top-link header__top-link_last link-white"><span>'+this.tr("Videos")+"</span></a></li>"}if(t.showLocales){a+='<li class="header__list-item"><i class="header__top-separator"></i><span class="header__top-langs _langs"><i class="header__top-langs-box icon icon-flag icon-flag-'+i(t.activeLang)+'"></i><i class="arrow arrow-white arrow-bottom header__top-langs-arrow"></i></span></li>'}a+='</ul><div class="header__top-right"><noindex><ul class="header__list"><li class="header__list-item';if(t.headerLite){a+=" header__top-right-link_last"}a+='"><a class="header__top-right-link _livechat"></a></li><li class="header__list-item"><i class="header__top-right-separator hidden"></i><a href="'+t.enterpriseLink+'" class="header__top-right-link link-white hidden">'+this.tr("Enterprise")+"</a></li>";if(!t.headerLite){a+='<li class="header__list-item header__top-right-link_last"><i class="header__top-right-separator"></i><a href="'+t.subscribeLink+'" class="header__top-right-link link-white">'+this.tr("Our Plans &amp; Prices")+"</a></li>"}a+="</ul></noindex></div></section>";if(t.isPinnedDesktop){a+='<section class="header__pinned _header-pinned"><div class="header__pinned-left"><a class="header__pinned-logo-box header__pinned-logo-box_big" href="'+this.app.makeUrl("/")+'"><i class="header__pinned-logo icon icon-logo-big"></i></a></div><div class="header__pinned-right _user-bar-pinned"></div></section>'}a+='<section class="header__line-middle"><div class="header__line-middle-box"><div class="header__cell-box"><div class="header__cell header__cell-logo"';if(t.isItemPropEnabled){a+=' itemtype="http://schema.org/Organization" itemscope'}a+='><a class="header__logo-link';if(t.bigLogo){a+=" header__logo-link_big"}a+=" ";if(t.whiteLogo){a+=" header__logo-link_white"}a+='" href="'+this.app.makeUrl("/")+'"';if(t.isItemPropEnabled){a+=' itemprop="url"'}a+='><img class="header__logo-image" src="'+this.app.cdnPath+"_img/";if(t.bigLogo){a+="index/"}a+='depositphotos-logo.png" alt="'+this.tr("Depositphotos Stock Photos")+'"';if(t.isItemPropEnabled){a+=' itemprop="logo"'}a+=" onload=\"trackFMP('logoReady');\" /><script>trackFMP('logoReady');<\/script></a></div></div>";if(t.headerTitle){a+='<div class="header__cell header__cell-title">'+this.tr(t.headerTitle)+"</div>"}if(!t.headerWithoutSearchBar){a+='<div class="header__cell header__cell-search-bar ';if(t.headerSearchBarCenter){a+="header__cell-search-bar_center"}if(t.headerPageName){a+=" search-bar-"+i(t.headerPageName)}a+=' _search-bar"></div>'}if(!t.hideAuth){a+='<div class="header__cell header__cell-user _user-bar"></div>'}a+="</div></section></header>";return a}},586:function(e,t,i){"use strict";e.exports=function e(t){var i='<header class="header-mobile"><i class="header-mobile__btn header-mobile__btn_menu _btn-menu" on="tap:main-menu-sidebar" role="button" tabindex="0"></i><div class="header-mobile__main-box" id="header-overlay"><div class="header-mobile__logo-box"';if(t.isItemPropEnabled){i+=' itemtype="http://schema.org/Organization" itemscope'}i+='><a class="header-mobile__logo-link" href="'+this.app.makeUrl("/")+'"';if(t.isItemPropEnabled){i+='  itemprop="url"'}i+='><amp-img width="204" height="36" class="header-mobile__logo-image" src="'+this.app.cdnPath+'_img/depositphotos-logo.png" alt="'+this.tr("Depositphotos Stock Photos")+'"';if(t.isItemPropEnabled){i+='  itemprop="logo" '}i+="/></a></div>";if(!t.headerWithoutSearchBar){i+='<i role="button" tabindex="0" class="header-mobile__btn header-mobile__btn_search _btn-search" on="tap:header-overlay.hide, search-bar.show"></i>'}i+="</div>";if(!t.headerWithoutSearchBar){i+='<div class="header-mobile__search-box _search-bar" id="search-bar" hidden></div>'}i+='<div class="header-mobile__filters-box _search-filters"></div></header>';return i}},587:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<header class="header';if(t.headerLite){a+=" header_lite"}if(t.headerFixedWidth){a+=" header_fixed-width"}if(t.headerSearchBarOpen){a+=" header_search"}if(t.headerWithoutSearchBar){a+=" header_without-search-bar"}if(t.headerPageName){a+=" header_page-"+i(t.headerPageName)}if(t.headerModifiers){a+=" "+i(t.headerModifiers)}a+='"><section class="_test-cc"></section><section class="header__line-top header__line-top_full"><nav class="header__top-left"><div class="header__top-phones _phones-list"></div>';if(t.showLocales){a+='<i class="header__top-separator"></i><span class="header__top-langs _langs"><i class="header__top-langs-box icon icon-flag icon-flag-'+i(t.activeLang)+'"></i><i class="arrow arrow-white arrow-bottom header__top-langs-arrow"></i></span>'}a+='</nav><div class="header__top-right"><a class="header__top-right-link header__top-right-link_last _livechat"></a></div></section><section class="header__line-middle"><div class="header__line-middle-box"><div class="header__cell-box"><div class="header__cell header__cell-logo"';if(t.isItemPropEnabled){a+=' itemtype="http://schema.org/Organization" itemscope'}a+='><a class="header__logo-link';if(t.bigLogo){a+=" header__logo-link_big"}if(t.whiteLogo){a+=" header__logo-link_white"}a+='" href="'+this.app.makeUrl("/")+'"';if(t.isItemPropEnabled){a+=' itemprop="url"'}a+='><img class="header__logo-image" src="'+this.app.cdnPath+"_img/";if(t.bigLogo){a+="index/"}a+='depositphotos-logo.png" alt="'+this.tr("Depositphotos Stock Photos")+'" ';if(t.isItemPropEnabled){a+='itemprop="logo"'}a+=" /></a></div></div>";if(t.headerTitle){a+='<div class="header__cell header__cell-title">'+this.tr(t.headerTitle)+"</div>"}if(!t.headerWithoutSearchBar){a+='<div class="header__cell header__cell-search-bar ';if(t.headerSearchBarCenter){a+="header__cell-search-bar_center"}if(t.headerPageName){a+=" search-bar-"+i(t.headerPageName)}a+=' _search-bar"></div>'}a+='<div class="header__cell header__cell-user _user-bar"></div></div></section></header>';return a}},588:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<header class="header-mobile';if(t.headerSearchBarOpen){a+=" header-mobile_search"}if(t.isPinnedMobile&&t.mobileMode){a+=" pinned"}if(t.headerMobileModifiers){a+=" "+i(t.headerMobileModifiers)}a+='"><i class="header-mobile__btn header-mobile__btn_menu _btn-menu';if(t.isMobileMenuVisible){a+=" active"}a+='"></i><div class="header-mobile__main-box"><div class="header-mobile__logo-box"';if(t.isItemPropEnabled){a+=' itemtype="http://schema.org/Organization" itemscope'}a+='><a class="header-mobile__logo-link" href="'+this.app.makeUrl("/")+'"';if(t.isItemPropEnabled){a+=' itemprop="url"'}a+='><img class="header-mobile__logo-image" src="'+this.app.cdnPath+'_img/depositphotos-logo.png" alt="'+this.tr("Depositphotos Stock Photos")+'"';if(t.isItemPropEnabled){a+=' itemprop="logo"'}a+="/></a>";if(t.headerTitle){a+='<div class="header-mobile__title">'+this.tr(t.headerTitle)+"</div>"}a+="</div>";if(!t.headerWithoutSearchBar){a+='<i class="header-mobile__btn header-mobile__btn_search _btn-search"></i>'}a+="</div>";if(!t.headerWithoutSearchBar){a+='<div class="header-mobile__search-box _search-bar" hidden></div>'}a+='<div class="header-mobile__filters-box _search-filters"></div></header>';return a}},589:function(e,t,i){"use strict";e.exports=function e(t){var i='<span class="cmp-livechat cmp-livechat-white cmp-livechat-';if(t.online){i+="online"}else{i+="offline"}i+='">'+this.tr("Live Chat")+"</span>";return i}},590:function(e,t,i){"use strict";i(591);var a=i(548).LanguagesSelector;var r=i(592);var s=i(593);var n=i(546);var o=i(572);var l=i(547);e.exports=n.extend({name:"PhonesList",el:false,template:s,dropdownAllowed:true,events:{"click ._phones-dropdown":"onPhonesClick"},initialize:function e(){this.phoneNumbers=this.getPhoneNumbers();this.phoneNumbersInDropdown=this.isPhoneNumbersInDropdown()},getPhoneNumbers:function e(){var t=this;var i=o.getContact(this.app);var a=i.additionalNumbers?[i.number].concat(i.additionalNumbers):[i.number];return a.map((function(e){return o.serialize(e,t.app)}))},serialize:function e(){return{phoneNumbers:this.phoneNumbers,phoneNumbersInDropdown:this.phoneNumbersInDropdown}},isPhoneNumbersInDropdown:function e(){return this.dropdownAllowed&&this.phoneNumbers.length>1},clientAfterRender:function e(){var t=this;if(this.phoneNumbersInDropdown){this.setNotExistView("phonesSelector",l,{params:a,content:new n({el:false,template:r,phoneNumbers:function(){return t.phoneNumbers}(),serialize:function e(){return{phoneNumbers:this.phoneNumbers}}})})}},onPhonesClick:function e(t){this.getView("phonesSelector").toggle(t)}})},591:function(e,t,i){},592:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<ul class="phones-list">';var r=t.phoneNumbers;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<li class="phones-list__item"><a class="phones-list__link" href="tel:'+i(s)+'">'+i(s)+"</a></li>"}}a+="</ul>";return a}},593:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a="<div>";if(t.phoneNumbersInDropdown){a+='<a class="phones-link _phones-dropdown">'+t.phoneNumbers[0]+'<i class="arrow arrow-white arrow-bottom phones-link__arrow"></i></a>'}else{var r=t.phoneNumbers;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<a class="phones-link" href="tel:'+i(s)+'">'+i(s)+"</a>"}}}a+="</div>";return a}},594:function(e,t,i){},595:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="langs-list">';var r=t.locales;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<div class="langs-list__column">';var l=s;if(l){var c,u=-1,d=l.length-1;while(u<d){c=l[u+=1];if(c.active===true){if(t.activeLang===c.key){a+='<span class="langs-list__item langs-list__item_active"><i class="langs-list__item-icon icon icon-flag icon-flag-'+i(c.key)+'"></i><span class="langs-list__item-name">'+i(c.name)+"</span></span>"}else{a+='<a href="'+c.url+'" class="langs-list__item _link"><i class="langs-list__item-icon icon icon-flag icon-flag-'+i(c.key)+'"></i><span class="langs-list__item-name">'+i(c.name)+"</span></a>"}}}}a+="</div>"}}a+="</div>";return a}},596:function(e,t,i){"use strict";(function(e){i(597);var t=i(75);var a=i(598);var r=i(546);var s=i(9),n=s.getLogger;var o=n(e);var l="Override country ip";var c=500;e.exports=r.extend({name:"TestCCBar",el:false,template:a,events:{"click ._close":"onCloseClick"},prepareRender:function e(){return!!(this.app.features.isFeatureOnValue(l)&&this.getActiveLocale())},serialize:function e(){return{activeLocale:this.getActiveLocale()}},getActiveLocale:function e(){return this.app.features.get(l).get("value")},close:function e(t){this.$el.slideUp(c,t)},disableFeature:function e(){var t=this;return new Promise((function(e,i){t.app.features.sync(null,t.app.features,{url:"EditFeature",getQueryParams:{name:l,value:0},success:function t(i){return e(i.cookieName)},error:function e(t){return i(t)}})}))},removeCookie:function e(i){t.remove(i)},onCloseClick:function e(){var t=this;this.disableFeature().then((function(e){return t.close((function(){t.removeCookie(e);window.location.reload()}))})).catch((function(e){return o.warn("Some error while disabling feature.",e)}))}})}).call(this,i(5)(e))},597:function(e,t,i){},598:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="testcc-bar _bar"><span class="testcc-bar__text">Override country ip mode. Current locale: '+i(t.activeLocale)+'</span><i class="testcc-bar__close icon icon-close-cross icon-close-cross-white icon-close-cross-small _close"></i></div>';return a}},599:function(e,t){e.exports="/_img/index/depositphotos-logo.png?b646c0dee312da3da3e3f67cd7e7b07f"},600:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<footer class="footer '+i(t.classname)+'"><div class="footer__container"><div class="footer__columns">';var r=t.columns;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];if(s.key==="menu"){a+='<section class="footer__column footer__column_dp">';if(s.title){if(t.shouldUseAMP){a+='<h5 role="group" tabindex="0" class="footer__title" [class]="footerMenuActive ? \'footer__title footer__title_active\' : \'footer__title\'" on="tap:AMP.setState({ footerMenuActive: !footerMenuActive })">'+s.title+"</h5>"}else{a+='<h5 class="footer__title _title">'+s.title+"</h5>"}}a+='<ul class="footer__list">';var l=s.content;if(l){var c,u=-1,d=l.length-1;while(u<d){c=l[u+=1];a+='<li class="footer__list-item">';if(c.noindex){a+="<noindex>"}if(c.shouldRenderAsPseudoLink){a+='<span class="footer__link';if(c.classname){a+=" "+i(c.classname)}a+='" data-seolink="'+i(c.pseudo)+'">'+c.label+"</span>"}else{a+='<a class="footer__link';if(c.classname){a+=" "+i(c.classname)}a+='" href="'+c.url+'" ';if(c.target){a+=' target="'+c.target+'"'}a+=" ";if(c.nofollow){a+=' rel="nofollow"'}a+=">"+c.label+"</a>"}if(c.noindex){a+="</noindex>"}a+="</li>"}}a+="</ul></section>"}else if(s.key==="lang"){a+='<section class="footer__column footer__column_lang">';if(s.title){a+='<h5 class="footer__title">'+s.title+"</h5>"}a+='<div class="_langs-box"></div></section>'}else if(s.key==="legal"){a+='<section class="footer__column';if(s.modifier){a+=" "+i(s.modifier)}else{a+=" footer__column_legal"}a+='">';if(s.title){if(t.shouldUseAMP){a+='<h5 role="group" tabindex="0" class="footer__title" [class]="footerLegalActive ? \'footer__title footer__title_active\' : \'footer__title\'" on="tap:AMP.setState({ footerLegalActive: !footerLegalActive })">'+s.title+"</h5>"}else{a+='<h5 class="footer__title _title">'+s.title+"</h5>"}}var h=s.content;if(h){var p,f=-1,v=h.length-1;while(f<v){p=h[f+=1];a+='<ul class="footer__list">';var m=p;if(m){var c,b=-1,g=m.length-1;while(b<g){c=m[b+=1];if(c.key==="requisites"){a+='<li class="footer__list-item footer__list-item_cmp footer__address"><span class="footer__requisites">'+i(c.company)+'</span><span class="footer__requisites"><span class="footer__requisites-title">'+this.tr("Address")+":</span> "+i(c.fullAddress)+"</span>";if(c.vat){a+='<span class="footer__requisites"><span class="footer__requisites-title">'+this.tr("VAT Number/TAX ID")+":</span> "+c.vat+"</span>"}a+="</li>"}else if(c.key==="faq"){a+='<li class="footer__list-item">';if(c.noindex){a+="<noindex>"}if(c.shouldRenderAsPseudoLink){a+='<span class="footer__link';if(c.classname){a+=" "+i(c.classname)}a+='" data-seolink="'+i(c.pseudo)+'">'+c.label+"</span>"}else{a+='<a class="footer__link';if(c.classname){a+=" "+i(c.classname)}a+='" href="'+c.url+'" ';if(c.target){a+=' target="'+c.target+'"'}a+=" ";if(c.nofollow){a+=' rel="nofollow"'}a+=">"+c.label+"</a>"}if(c.noindex){a+="</noindex>"}a+="</li>"}else if(c.key==="documents"){a+='<li class="footer__list-item">';if(c.noindex){a+="<noindex>"}if(c.shouldRenderAsPseudoLink){a+='<span class="footer__link';if(c.classname){a+=" "+i(c.classname)}a+='" data-seolink="'+i(c.pseudo)+'">'+c.label+"</span>"}else{a+='<a class="footer__link';if(c.classname){a+=" "+i(c.classname)}a+='" href="'+c.url+'" ';if(c.target){a+=' target="'+c.target+'"'}a+=" ";if(c.nofollow){a+=' rel="nofollow"'}a+=">"+c.label+"</a>"}if(c.noindex){a+="</noindex>"}a+="</li>"}else if(c.key==="terms"){a+='<li class="footer__list-item">';if(c.noindex){a+="<noindex>"}if(c.shouldRenderAsPseudoLink){a+='<span class="footer__link';if(c.classname){a+=" "+i(c.classname)}a+='" data-seolink="'+i(c.pseudo)+'">'+c.label+"</span>"}else{a+='<a class="footer__link';if(c.classname){a+=" "+i(c.classname)}a+='" href="'+c.url+'" ';if(c.target){a+=' target="'+c.target+'"'}a+=" ";if(c.nofollow){a+=' rel="nofollow"'}a+=">"+c.label+"</a>"}if(c.noindex){a+="</noindex>"}a+="</li>"}else if(c.key==="privacy"){a+='<li class="footer__list-item">';if(c.noindex){a+="<noindex>"}if(c.shouldRenderAsPseudoLink){a+='<span class="footer__link';if(c.classname){a+=" "+i(c.classname)}a+='" data-seolink="'+i(c.pseudo)+'">'+c.label+"</span>"}else{a+='<a class="footer__link';if(c.classname){a+=" "+i(c.classname)}a+='" href="'+c.url+'" ';if(c.target){a+=' target="'+c.target+'"'}a+=" ";if(c.nofollow){a+=' rel="nofollow"'}a+=">"+c.label+"</a>"}if(c.noindex){a+="</noindex>"}a+="</li>"}}}a+="</ul>"}}a+="</section>"}else if(s.key==="contact"){a+='<section class="footer__column footer__column_contact">';if(s.title){if(t.shouldUseAMP){a+='<h5 role="group" tabindex="0" class="footer__title" [class]="footerContactsActive ? \'footer__title footer__title_active\' : \'footer__title\'" on="tap:AMP.setState({ footerContactsActive: !footerContactsActive })">'+s.title+"</h5>"}else{a+='<h5 class="footer__title _title '+i(s.titleClassName)+'">'+s.title+"</h5>"}}a+='<ul class="footer__list">';var _=s.content;if(_){var c,w=-1,y=_.length-1;while(w<y){c=_[w+=1];if(c.key==="phone"){a+='<li class="footer__list-item footer__phone"><i class="footer__phone-icon icon icon-phone-small"></i><span>';var k=c.phoneNumbers;if(k){var x,C=-1,S=k.length-1;while(C<S){x=k[C+=1];a+='<a class="footer__phone-link" href="tel:'+i(x)+'">'+i(x)+"</a>"}}a+="</span></li>"}else if(c.key==="live-chat"){a+='<li class="footer__list-item footer__list-item_cmp"><span class="footer__link _livechat"></span></li>'}else if(c.key==="contact"){a+='<li class="footer__list-item footer__list-item_cmp"><a class="footer__link cmp-contact-us" href="'+c.url+'"><i class="cmp-contact-us__icon"></i>'+c.label+"</a></li>"}else if(c.key==="feedback"){a+='<li class="footer__list-item footer__list-item_cmp"><a class="footer__link cmp-feedback _feedback"><i class="cmp-feedback__icon"></i>'+c.label+"</a></li>"}else if(c.key==="icp"){a+='<li class="footer__list-item footer__list-item_cmp"><a class="footer__link" target="_blank" rel="nofollow" href="'+c.url+'">'+c.label+"</a></li>"}}}a+="</ul></section>"}else if(s.key==="social"){a+='<section class="footer__column footer__column_social">';if(s.title){a+='<h5 class="footer__title footer__title_regular">'+s.title+"</h5>"}a+='<ul class="footer__list footer__list_line';if(s.content.length>2){a+=" footer__list_compact"}a+='">';var T=s.content;if(T){var c,M=-1,P=T.length-1;while(M<P){c=T[M+=1];a+='<li class="footer__list-item"><a class="footer__social-btn button-social-dark '+i(c.classname)+'" href="'+c.url+'" rel="nofollow noopener" target="_blank">'+i(c.label)+"</a></li>"}}a+="</ul></section>"}else if(s.key==="misc"){a+='<section class="footer__column footer__column_misc"><ul class="footer__list">';var L=s.content;if(L){var c,O=-1,E=L.length-1;while(O<E){c=L[O+=1];if(c.key==="bbb"){a+='<li class="footer__list-item footer__list-item_cmp"><a class="footer__btn cmp-bbb" href="'+c.url+'" rel="nofollow noopener" target="_blank" title="'+c.label+'"></a></li>'}else if(c.key==="truste"){a+='<li class="footer__list-item footer__list-item_cmp"><a class="footer__btn cmp-truste" href="'+c.url+'" rel="nofollow" target="_blank" title="'+c.label+'"><img class="cpm-truste__img" src="'+this.app.cdnPath+'_img/truste-icon.png" alt="TRUSTe Privacy" /><span class="cpm-truste__text">'+this.tr("Certified Privacy")+"</span></a></li>"}else if(c.key==="bird"){a+='<li class="footer__list-item footer__list-item_cmp">';if(t.birdInFlightData.type==="prize"){a+='<span class="footer__btn cmp-bird-and-flight-prize _pseudolink" data-seolink="bird-in-flight-prize">'+this.tr("International award for an innovative approach to telling a story through a photograph")+"</span>"}else if(c.shouldRenderAsPseudoLink){a+='<span class="footer__btn cmp-bird-and-flight _pseudolink" data-seolink="bird-in-flight"><span class="footer__bird-and-flight-text"><b>'+this.tr("Bird In Flight")+"</b> - "+this.tr("The Photo Magazine")+"</span></span>"}else{a+='<a class="footer__btn cmp-bird-and-flight" href="'+t.birdInFlightData.link+'" target="_blank"><span class="footer__bird-and-flight-text"><b>'+this.tr("Bird In Flight")+"</b> - "+this.tr("The Photo Magazine")+"</span></a>"}a+="</li>"}}}a+="</ul></section>"}else if(s.key==="app"){a+='<section class="footer__column footer__column_app">';var D=s.content;if(D){var c,F=-1,I=D.length-1;while(F<I){c=D[F+=1];a+='<a class="footer__btn footer__btn_app cmp-hover-trigger" href="'+c.url+'" rel="nofollow noopener" target="_blank"><span class="'+i(c.classname)+'">'+c.label+"</span></a>"}}a+="</section>"}else if(s.key==="logo"){a+='<section class="footer__logo-box"><i class="footer__logo"></i><i class="footer__sep"></i></section>'}else if(s.key==="copy"){a+='<section class="footer__copy"><p class="footer__copy-text">'+t.copyright+"</p></section>"}}}a+="</div></div></footer>";return a}},601:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<a class="cmp-livechat cmp-livechat-';if(t.online){a+="online"}else{a+="offline"}a+=" "+i(t.className)+'">'+this.tr("Live Chat")+"</a>";return a}},602:function(e,t,i){"use strict";i(603);var a=i(548).LanguagesSelectorFooter;var r=i(556);var s=i(604);var n=i(546);var o=i(547);var l=i(564);var c=i(571);var u=12;var d=function e(t){t.value=t.key;return t};var h=function e(t){t.value=t.url.replace(/amp.html$/,"html");return t};e.exports=n.extend({name:"LangsBox",el:false,type:"list",template:s,events:{"click ._langs":"onLangsClick","click ._lang-link":"onLangLinkClick","change ._select":"onSelectChange","contextmenu ._lang-link":"onCustomLangLinkClick","mouseup ._lang-link":"onCustomLangLinkClick","mouseover ._pseudolink":"transformLink"},initialize:function e(){this.locales=this.app.getLanguages().filter((function(e){return e.active}));this.showLocales=this.app.langsEnabled()&&this.locales.length>1},serialize:function e(){var t=this;return{type:this.type,activeLang:this.app.lang,activeLangName:this.locales.find((function(e){return e.key===t.app.lang})).name,transformLangsEnabled:c.imitateLangLinksEnabled(this.app),locales:this.showLocales?this.makeLocalesList():[],isMobileDevice:this.app.device.isMobile,ampDirectiveOn:this.app.ampEnabled?"change:AMP.navigateTo(url=event.value)":""}},makeLocalesList:function e(){var t=this.app.ampEnabled?h:d;var i=this.locales.map(t);return[i.slice(0,u),i.slice(u)]},clientAfterRender:function e(){if(this.showLocales){this.setNotExistView("languages",o,{params:a,content:new l({app:this.app})})}},onLangsClick:function e(t){if(this.showLocales){this.toggleLanguagesToolTip(t)}},onLangLinkClick:function e(t){if(t.ctrlKey||t.shiftKey||t.metaKey){this.trackNewTabClick(t);return}this.trackLangChange()},onSelectChange:function e(t){var i=this.locales.find((function(e){return e.key===t.currentTarget.value}))||{},a=i.url;if(!a){return}this.trackLangChange();this.app.router.redirect(a)},onCustomLangLinkClick:function e(t){if(![r.rightMouse,r.middleMouse].includes(t.which)){return}this.trackNewTabClick(t)},trackLangChange:function e(){this.app.observer.broadcast("Track:UE:Language:Change")},trackNewTabClick:function e(){this.app.observer.broadcast("Track:UE:Language:ChangeInNewTab",{source:"LanguageSelector"})},toggleLanguagesToolTip:function e(t){this.getView("languages").toggle(t)},transformLink:function e(t){c.transformToGeneratedLink(this.app,t.currentTarget)}})},603:function(e,t,i){},604:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="langs-box">';if(t.type==="dropdown"){a+='<span class="langs-box__dropdown arrow-selector _langs"><i class="langs-box__dropdown-icon icon icon-flag icon-flag-'+i(t.activeLang)+'"></i>'+i(t.activeLangName)+'<i class="langs-box__dropdown-arrow arrow arrow-gray-dark arrow-bottom"></i></span>'}else{var r=t.locales;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<ul class="langs-box__list">';var l=s;if(l){var c,u=-1,d=l.length-1;while(u<d){c=l[u+=1];a+='<li class="langs-box__list-item">';if(c.key===t.activeLang){a+='<span class="langs-box__link langs-box__link_active">'+i(c.name)+"</span>"}else if(t.transformLangsEnabled){a+='<span class="langs-box__link _lang-link _pseudolink" data-seolink="lang" data-seolink-langkey="'+i(c.key)+'">'+i(c.name)+"</span>"}else{a+='<a class="langs-box__link _lang-link" href="'+c.url+'">'+i(c.name)+"</a>"}a+="</li>"}}a+="</ul>"}}}a+='<div class="langs-box__select-box"><i class="icon icon-flag icon-flag-'+i(t.activeLang)+'"></i><span class="langs-box__select-name">'+i(t.activeLangName)+'</span><i class="langs-box__select-arrow arrow arrow-gray arrow-top"></i><i class="langs-box__select-arrow arrow arrow-gray arrow-bottom"></i><select class="langs-box__select';if(t.isMobileDevice){a+=" langs-box__select_mobile"}a+=' _select"';if(t.ampDirectiveOn){a+=' on="'+t.ampDirectiveOn+'"'}a+=">";var h=t.locales;if(h){var p,f=-1,v=h.length-1;while(f<v){p=h[f+=1];var m=p;if(m){var c,b=-1,g=m.length-1;while(b<g){c=m[b+=1];a+='<option value="'+c.value+'"';if(c.key===t.activeLang){a+=" selected"}a+=">"+i(c.name)+"</option>"}}}}a+="</select></div></div>";return a}},605:function(e,t,i){"use strict";var a=i(48);var r=i(549);var s=i(606);e.exports=r.extend({name:"Feedback",initialize:function e(){var t=this;this.title=a.FeedbackFormTitle;this.body=function(){return new s({app:t.app,handleModelRequest:t.onFormRequest.bind(t),handleModelResponse:t.onFormResponse.bind(t),handleModelError:t.onFormError.bind(t)})};this.footer=[{label:a.CancelBtn,hide:true},{label:a.SendBtn,hide:false,color:"blue",selector:"_submit",defaultAction:true,callback:"onFormSubmit"}];for(var i=arguments.length,n=new Array(i),o=0;o<i;o++){n[o]=arguments[o]}r.prototype.initialize.apply(this,n)},onFormRequest:function e(){this.$("._submit").trigger("loading")},onFormSubmit:function e(){this.findView("FeedbackForm").onSubmit()},onFormResponse:function e(t,i){this.$("._submit").trigger("loaded");if(i&&!i.errors){this.hide()}},onFormError:function e(){this.$("._submit").trigger("loaded")}})},606:function(e,t,i){"use strict";i(607);var a=i(608);var r=i(558);var s=i(609);var n=i(610);var o=i(577);e.exports=r.extend({name:"FeedbackForm",el:false,template:a,initialize:function e(){this.model=new s({name:this.app.user.getFullName(),email:this.app.user.get("email"),userAgent:navigator?navigator.userAgent:"",screen:window.screen?window.screen.width+"x"+window.screen.height:"",url:this.app.url,cookies:navigator&&navigator.cookieEnabled?"yes":"no"},{app:this.app});for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}r.prototype.initialize.apply(this,i)},prepareRender:function e(){var t=this;this.setViews({"._rate-component":new n({valueSelected:function e(i){t.model.set({rate:i});t.fieldReset(t.$("label.rate-box"))}}),"._phone-number":new o({required:true,app:this.app})})},serialize:function e(){return{isUserLoggedIn:this.app.user.isLoggedIn()}},prepareSubmit:function e(){this.model.set({phone:this.getView("._phone-number").getCompiledPhoneNumber()})},handleModelInvalid:function e(t,i){var a=this;if(i===void 0){i={}}if(!Object.keys(i).length){return}Object.keys(i).forEach((function(e){var t=i[e]instanceof Array?i[e][0]:i[e];var r=a.$("[name="+e+"]");if(e==="rate"){r=a.$("._rate-component")}a.fieldIncorrect(r.parent(),{errorMessage:t})}))}})},607:function(e,t,i){},608:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="feedback-form"><p class="feedback-form__text">'+this.tr("Your feedback is very important, please tell us what you think!")+'</p><label class="feedback-form__field field-box rate-box"><span class="rate-label">'+this.tr("What do you think about our site?")+'</span><span class="rate-value _rate-component"></span></label>';if(!t.isUserLoggedIn){i+='<p class="feedback-form__title">'+this.tr("Contact Information")+':</p><label class="feedback-form__field field-box field-box_light field-box_rounded field-box_large input-box input-box-xl"><input class="input input-xl _field empty" type="text" name="email" maxlength="64" /><span class="field-box__title">'+this.tr("E-mail")+'</span></label><label class="feedback-form__field field-box field-box_light field-box_rounded field-box_large input-box input-box-xl _phone-number"><input class="input input-xl _field empty" type="tel" name="phone" maxlength="64" /><span class="field-box__title">'+this.tr("Phone")+'</span></label><label class="feedback-form__field field-box field-box_light field-box_rounded field-box_large input-box input-box-xl"><input class="input input-xl _field empty" type="text" name="name" maxlength="64" /><span class="field-box__title">'+this.tr("Name")+"</span></label>"}i+='<label class="feedback-form__field field-box field-box_light field-box_rounded field-box_large input-box input-box-xl"><input class="input input-xl _field empty" type="text" name="info" maxlength="100" /><span class="field-box__title">'+this.tr("How did you hear about us")+'</span></label><p class="feedback-form__title">'+this.tr("Please enter your feedback in the field below")+':</p><label class="feedback-form__field field-box field-box_light field-box_rounded field-box_large textarea-box textarea-box-xl"><textarea class="textarea textarea-xl textarea-resize-v _field empty" name="feedback"></textarea><span class="field-box__title">'+this.tr("Your message to recipient of the e-mail")+"</span></label></div>";return i}},609:function(e,t,i){"use strict";var a=i(2);e.exports=a.extend({url:"FeedbackForm",defaults:{rate:0,email:"",phone:"",name:"",info:"",feedback:"",userAgent:"",screen:"",url:"",cookies:""},validation:{name:{required:true,msg:true},rate:{min:1,max:5,msg:true},email:{required:true,pattern:"email",minLength:3,maxLength:128,msg:true},info:{required:true,msg:true},feedback:{required:true,msg:true}}})},610:function(e,t,i){"use strict";function a(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var r=i(0);var s=i(611);var n=i(546);var o=function(e){a(t,e);function t(t){var i={};r.extend(i,{el:false,items:5,value:0,events:{"mouseover ._rate-item":"onMouseOver","mouseout ._rate-item":"onMouseOut","click ._rate-item":"onItemClick","click ._rate-decrease":"decreaseValue","click ._rate-increase":"increaseValue"},template:s,valueSelected:r.noop},t);return e.call(this,i)||this}var i=t.prototype;i.onMouseOver=function e(t){this.activate(this.$(t.currentTarget).index())};i.onMouseOut=function e(){this.activate()};i.onItemClick=function e(t){this.setValue(this.$(t.currentTarget).index())};i.decreaseValue=function e(){if(this.value>0){this.setValue(this.value-1);this.activate()}};i.increaseValue=function e(){if(this.value<this.items){this.setValue(this.value+1);this.activate()}};i.setValue=function e(t,i){if(t<0||t>this.items){return false}this.value=t;if(!i){this.valueSelected(this.value)}return this.value};i.activate=function e(t){var i=t||this.value;this.$el.find("._rate-item").removeClass("active").filter(":lt("+i+")").addClass("active")};i.serialize=function e(){return{items:this.items}};return t}(n);e.exports=o},611:function(e,t,i){"use strict";e.exports=function e(t){var i='<span class="rate-component"><span class="rate-component__decrease _rate-decrease"></span>';while(t.items>0){i+='<i class="icon icon-star rate-component__item _rate-item"></i>';t.items--}i+='<span class="rate-component__increase _rate-increase"></span></span>';return i}},612:function(e,t,i){},613:function(e,t){e.exports="/_img/truste-icon.png?30686b867753315f0fda64d28a0ec5bb"},615:function(e,t,i){"use strict";i(616);var a=i(617);var r=i(546);e.exports=r.extend({name:"Content",tagName:"section",className:"content",template:a,vAlign:null,bgColor:null,customClassNames:"",getVAlign:function e(){return{middle:"content-container_valign-middle",bottom:"content-container_valign-bottom"}[this.vAlign]||""},getClassNames:function e(){return(this.getVAlign()+" "+this.customClassNames).trim().replace(/\s+/g," ")},serialize:function e(){return{customClassNames:this.getClassNames(),bgColor:this.bgColor}}})},616:function(e,t,i){},617:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="_content content-container';if(t.customClassNames){a+=" "+i(t.customClassNames)}a+='"';if(t.bgColor){a+=' style="background-color: #'+i(t.bgColor)+'"'}a+="></div>";return a}},618:function(e,t,i){"use strict";var a=i(0);var r=i(3);var s=i(23);var n=i(551);e.exports=n.extend({name:"Membership",showRefillModalOnClick:true,originalEvents:Object.assign({},n.prototype.originalEvents,{click:"onClick","click ._buy-more":"onBuyMoreClick"}),onClick:function e(t){if(this.$el.hasClass("_buy-more")&&this.showRefillModalOnClick){t.preventDefault();this.showRefillMembershipModal()}},onBuyMoreClick:function e(t){t.preventDefault();if(this.showRefillModalOnClick){this.showRefillMembershipModal()}},showRefillMembershipModal:function e(){this.app.store.get("ModalsManager").show("RefillMembershipModal",{app:this.app,type:"buyMore"}).catch((function(){}))},getCuratedLabel:function e(t){if(t===void 0){t=this.product}if(t.basic){return this.tr("Downloads from the Free Collection: <b>Unlimited</b>")}if(t.curated){return this.tr("Downloads from the Curated Collection: <b>Unlimited</b>")}return""},getRenewLabel:function e(t){if(t===void 0){t=this.product}if(!t.count){return""}var i=r.duration(r.unix(t.renewal).valueOf());var n=i.days()>0?"moreThanDay":"lessThanDay";var o=n==="lessThanDay"?[i.hours(),i.minutes()]:Math.round(i.asDays());var l=a.findWhere(s.productRenewLabels,{type:t.type,renewal:n});if(!l||!l.label){return""}return this.tr(l.label.trim(),o)},getLeftLabel:function e(t){if(t===void 0){t=this.product}if(!t.count&&!t.left){return""}if(t.curated){return this.tr("Downloads from the Main Collection: <b>%s</b>",t.left)}return n.prototype.getLeftLabel.call(this,t)},getProductContent:function e(t){var i;if(t===void 0){t=this.product}for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++){r[s-1]=arguments[s]}var o=(i=n.prototype.getProductContent).call.apply(i,[this,t].concat(r));o.action=this.tr("Buy Downloads");if(t.curated){o.info.push({key:"curated",value:this.getCuratedLabel(t)})}o.info.push({key:"renew",value:this.getRenewLabel(t)});return o}})},619:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="merchant-manager';if(t.useSavedState){a+=" merchant-manager_saved"}a+=" "+i(t.classNames)+'"><div class="merchant-manager_fields">';if(t.useSaved){a+='<div class="merchant-manager__item merchant-manager__item_saved"><label class="merchant-manager__field merchant-manager__field_saved checkbox-box checkbox-box-m"><input class="checkbox _use-saved-cards" type="checkbox"';if(t.useSavedState){a+=' checked="checked"'}a+='><i class="icon icon-checkbox icon-checkbox-m"></i><span class="checkbox-text">'+this.tr("Use my saved cards")+"</span></label></div>"}a+='<div class="merchant-manager__item"><span class="merchant-manager__field-title">'+this.tr("Credit Card Number")+"</span>";if(t.useSavedState){if(t.savedCards.list.length>1){a+='<label class="merchant-manager__field merchant-manager__field_number-select select-box select-box-m"><i class="arrow arrow-black arrow-bottom"></i><i class="merchant-manager__icon-lock field-box__right-elem icon icon-lock-green _lock"></i><select class="select select-m _selected-card" name="number">';var r=t.savedCards.list;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<option value="'+i(s.id)+'"';if(t.savedCards.active.id===s.id){a+=" selected"}a+=">"+i(s.labels.number)+"</option>"}}a+="</select></label>"}else{a+='<label class="merchant-manager__field merchant-manager__field_number_disabled field-box input-box input-box-m"><i class="merchant-manager__icon-lock field-box__right-elem icon icon-lock-green _lock"></i><input type="hidden" name="cardId" value="'+i(t.savedCards.active.id)+'" /><input class="input input-m _cardNumber" type="text" name="number" maxlength="27" disabled value="'+i(t.savedCards.active.labels.number)+'" autofocus autocomplete="cc-number" /></label>'}}else{a+='<label class="merchant-manager__field merchant-manager__field_number field-box input-box input-box-m"><i class="merchant-manager__icon-lock field-box__right-elem icon icon-lock-green _lock"></i><input type="hidden" name="cardId" value="'+i(t.attributes.cardId)+'" /><input class="input input-m _cardPan" type="text" name="pan" maxlength="27" value="'+i(t.attributes.labels.number)+'" autofocus placeholder="'+this.tr("Credit Card Number")+'" autocomplete="cc-number" /></label>'}a+='</div><div class="merchant-manager__item merchant-manager__item_exp"><span class="merchant-manager__field-title">'+this.tr("Expiration Date")+'</span><span class="merchant-manager__field-title merchant-manager__field-title_alt">'+this.tr("Expiration Date")+", "+this.tr("CVV / CVC")+'</span><div class="merchant-manager__field merchant-manager__field_exp field-box select-box select-box-m"><select class="select select-m _expiryMonth" name="expiryMonth"';if(t.useSavedState){a+=" disabled"}a+=' autocomplete="cc-exp-month">';var l=t.expiration.months;if(l){var c,u=-1,d=l.length-1;while(u<d){c=l[u+=1];a+='<option value="'+i(c)+'"';if(t.attributes.expiryMonth===c){a+=" selected"}a+=">"+i(c)+"</option>"}}a+='</select><i class="arrow arrow-black arrow-bottom"></i></div><span class="merchant-manager__exp-sep">/</span><div class="merchant-manager__field merchant-manager__field_exp field-box select-box select-box-m"><select class="select select-m _expiryYear" name="expiryYear"';if(t.useSavedState){a+=" disabled"}a+=' autocomplete="cc-exp-year">';var h=t.expiration.years;if(h){var p,f=-1,v=h.length-1;while(f<v){p=h[f+=1];a+='<option value="'+i(p)+'"';if(t.attributes.expiryYear===p){a+=" selected"}a+=">20"+i(p)+"</option>"}}a+='</select><i class="arrow arrow-black arrow-bottom"></i></div><input type="text" class="invisible" autocomplete="cc-exp"></div><div class="merchant-manager__item merchant-manager__item_cvv"><span class="merchant-manager__field-title">'+this.tr("CVV / CVC")+'</span><label class="merchant-manager__field merchant-manager__field_cvv field-box input-box input-box-m"><input class="input input-m _cvv" type="password" name="cvv" maxlength="4"value="';if(t.useSavedState){a+="***"}a+='"placeholder="'+this.tr("CVV / CVC")+'"';if(t.useSavedState){a+=" disabled"}a+=' autocomplete="cc-csc" /><i class="merchant-manager__icon-card icon icon-card field-box__right-elem _card-helper"></i><i class="merchant-manager__icon-help icon icon-help _card-helper"></i></label></div><div class="merchant-manager__item"><div class="g-recaptcha _captcha" data-sitekey="'+i(t.captcha.siteKey)+'"></div></div><div class="merchant-manager__item _errorHolder"><div class="field-box"></div></div></div></div>';return a}},620:function(e,t,i){"use strict";var a=i(621);e.exports={init3ds:function e(t){var i=this;var r=t.app,s=t.html;a.subscribe({client:this.webSocketClient,path:"api/payments/connectUser",payload:{userId:r.user.get("id")},onInit:function e(){return i.on3dsInit(s)},onInitSuccess:function e(t){i.webSocketClient=t;i.on3dsInitSuccess(s,i.webSocketClient)},onInitError:function e(){return i.on3dsInitError(s)},onConnect:function e(){return i.on3dsConnect(s)},onSuccess:function e(){return i.on3dsSuccess.apply(i,arguments)},onError:function e(t){return i.on3dsError(t)}})},open3dsBlankWindow:function e(t){if(t===void 0){t=""}var i=window.open("","3dsWindow");if(i!=null){i.document.write(t);i.window.onload()}else{this.open3dsSameWindow(t)}},open3dsSameWindow:function e(t){window.document.write(t);window.onload()},on3dsInit:function e(){},on3dsInitSuccess:function e(){},on3dsInitError:function e(){},on3dsConnect:function e(){},on3dsSuccess:function e(){},on3dsError:function e(){}}},621:function(e,t,i){"use strict";(function(e){var a=i(4);var r=i(17);var s=i(9),n=s.getLogger;var o=n(e);var l=function e(){return new Promise((function(e,t){return r.ajax({url:a.client.websocket.clientUrl,dataType:"script",success:function i(){var a=window.ActionheroClient?window.ActionheroClient:window.ActionheroWebsocketClient;var r=new a({strategy:"online, timeout, disconnect"});r.on("error",(function(e){o.error("WebSocket Error",e.stack)}));r.connect((function(i){return i?t(i):e(r)}))},error:function e(i){return t(i)},async:true})}))};var c=function e(t){var i=t.message,a=t.onSuccess,r=t.onError;if(i.success){a({message:i})}else if(i.error!=null){r({code:i.error.code,message:i.error.desc})}};t.subscribe=function(e){if(e===void 0){e={}}var t=e,i=t.client,a=t.path,r=a===void 0?"":a,s=t.payload,n=s===void 0?{}:s,o=t.onInitSuccess,u=o===void 0?function(){}:o,d=t.onInitError,h=d===void 0?function(){}:d,p=t.onInit,f=p===void 0?function(){}:p,v=t.onConnect,m=v===void 0?function(){}:v,b=t.onDisconnect,g=b===void 0?function(){}:b,_=t.onSuccess,w=_===void 0?function(){}:_,y=t.onError,k=y===void 0?function(){}:y,x=t.processMessage,C=x===void 0?c:x;var S=function e(t){t.on("message",(function(e){return C({message:e.message||e,onSuccess:w,onError:k})}));t.on("disconnected",g);t.action(r,n,m)};if(i){S(i)}else{l().then((function(e){u(e);S(e)})).catch(h).finally(f)}}}).call(this,i(5)(e))},622:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(3);var o=i(567);e.exports=o.extend({name:"MerchantMultiCardManager",savedCards:[],useSaved:true,useSavedState:true,classNames:"",events:r({},o.prototype.events,{"change ._selected-card":"onSelectedCardChange","change ._use-saved-cards":"handleUseSavedStateChange",'change [name="saved"]':"handleUseSavedStateChange","click ._other-cards":"handleOtherCardsClick"}),globals:{click:"handleBodyClick"},initialize:function e(t){this.setCardModel(t);this.setInitPosition()},serialize:function e(){return r({},o.prototype.serialize.call(this),{savedCards:{list:this.savedCards.serialize(),active:this.model.serialize()},switcher:{saved:{tag:"span",name:"saved",checked:this.useSavedState,className:"switcher_small"}}})},setInitPosition:function e(){var t;if(this.model&&this.savedCards.get(this.model.get("id"))){t=this.savedCards.get(this.model.get("id"))}else{t=this.savedCards.first()}this.setSavedModel(t)},setSavedModel:function e(t){this.model.set(Object.assign({},t.attributes));this.render()},resetModel:function e(){this.model.resetToDefaults();if(this.$("._expiryMonth").length&&this.$("._expiryYear").length){this.model.set({expiryMonth:1,expiryYear:+n().format("YY")})}},onSelectedCardChange:function e(t){var i=this.savedCards.get(t.currentTarget.value);this.setSavedModel(i);this.onCardSwitchCallback(i)},handleUseSavedStateChange:function e(t){this.useSavedState=t.currentTarget.checked;if(this.useSavedState){this.setSavedModel(this.savedCards.first());this.onCardSwitchCallback(this.savedCards.first())}else{this.resetModel();this.onCardSwitchCallback()}this.render();this.onUseSavedCards(this.useSavedState)},handleOtherCardsClick:function e(){this.$("._cards-list").removeClass("hidden")},handleBodyClick:function e(t){var i=this.$("._cards-list");var a=this.$("._other-cards");if(i.length&&a.length&&!i[0].contains(t.target)&&!a[0].contains(t.target)){i.addClass("hidden")}},onCardSwitchCallback:function e(){},onUseSavedCards:function e(){},onCardChange:function e(){}})},623:function(e,t,i){"use strict";var a=i(0);var r=i(23);var s=i(548);var n=i(48);var o=i(3);var l=i(551);var c=i(546);var u=i(654);var d=i(657);var h=i(547);e.exports=l.extend({name:"Subscription",periods:[30,90,180,360],prepareRender:function e(){l.prototype.prepareRender.call(this);this.removeView("helpTooltip");this.removeView("infoTooltip");if(this.needToShowHelpTooltip()){this.setView("helpTooltip",new h({params:s.Product,content:this.getHelpTooltipContent()}))}this.setView("infoTooltip",new h({params:s.ProductInfo,content:this.getInfoTooltipContent()}))},serialize:function e(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}var r=l.prototype.serialize.apply(this,i);if(this.product.installment.enabled){r.labels.installmentProgress=this.getInstallmentProgressLabel()}return r},getProductContent:function e(t){var i;if(t===void 0){t=this.product}for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++){r[s-1]=arguments[s]}var n=(i=l.prototype.getProductContent).call.apply(i,[this,t].concat(r));if(t.curated){n.info.push({key:"curated",value:this.getCuratedLabel(t)})}n.info.push({key:"renew",value:this.getRenewLabel(t)});return n},getCuratedLabel:function e(t){if(t===void 0){t=this.product}if(!t.curated){return""}var i=this.app.store.get("Stats");var a=i&&i.serialize().thousandsCuratedItems;return a?this.tr("Unlimited downloads from premium collection of %sk images",a):this.tr("Downloads from the Curated Collection: <b>Unlimited</b>")},getInstallmentProgressLabel:function e(){return this.tr("Payment: <b>%s of %s</b>",[this.product.installment.currentPeriod,this.product.installment.periodsCount])},needToShowHelpTooltip:function e(){return!this.app.user.get("isSubaccount")||this.app.user.get("isSubaccount")&&this.product.owner},getSplitCountLabel:function e(t){if(t===void 0){t=this.product}var i=t.split_count>0&&t.split_count<=10?"custom":"unlimit";var a=r.productSplitCountLabels.find((function(e){return e.type===t.type&&e.value===i})),s=a.label;return this.tr(s,t.split_count)},getLeftLabel:function e(t){if(t===void 0){t=this.product}if(t.curated){return""}var i=t.buy_period===1?"daily":"default";var a=t.rebill_started===0?[t.left,t.count]:[0,0];var r={default:this.tr("Downloads left this month: <b>%s of %s</b>",a),daily:this.tr("Downloads left today: <b>%s of %s</b>",a)};return r[i]||r.default},getHelpTooltipContent:function e(t){if(t===void 0){t=this.product}return t.rebill_started===0?new u({app:this.app,product:this.product}):new d({app:this.app,product:this.product})},getInfoTooltipContent:function e(t){if(t===void 0){t=this.product}if(t.rebill_started===0){return new c({el:false,app:this.app,template:function e(){return this.tr(n.DaysLeft)}})}return new d({app:this.app,product:this.product})},getRenewLabel:function e(t){if(t===void 0){t=this.product}var i=o.duration(o.unix(t.renewal).valueOf());var s;var n="default";var l=i.days()>0?"moreThanDay":"lessThanDay";if(t.buy_period===1){n="daily";l="lessThanDay"}if(t.rebill_started===1){s=l==="lessThanDay"?[0,0]:0}else{s=l==="lessThanDay"?[i.hours(),i.minutes()]:Math.round(i.asDays())}var c=a.findWhere(r.productRenewLabels,{type:t.type,period:n,renewal:l});if(!c||!c.label){return""}return this.tr(c.label.trim(),s)},getDaysLeft:function e(t){if(t===void 0){t=this.product}if(t.status!=="active"){return 0}if(t.rebill_started===1){return 1}var i=t.installment.enabled?t.installment.expires:t.expires;return Math.round(o.unix(i).diff(o(),"d",true))||1},showHelpTooltip:function e(t){t.preventDefault();this.getView("helpTooltip").show(t)},hideHelpTooltip:function e(t){t.preventDefault();this.getView("helpTooltip").hide(t)},showInfoTooltip:function e(t){t.preventDefault();this.getView("infoTooltip").show(t)},hideInfoTooltip:function e(t){t.preventDefault();this.getView("infoTooltip").hide(t)}})},624:function(e,t,i){"use strict";var a=i(23);var r=i(551);e.exports=r.extend({name:"OnDemand",getSplitCountLabel:function e(t){if(t===void 0){t=this.product}var i=t.split_count>0&&t.split_count<=10?"custom":"unlimit";var r=a.productSplitCountLabels.find((function(e){return e.type===t.type&&e.value===i})),s=r.label;return this.tr(s,t.split_count)},getRebillTitle:function e(){return this.model.get("rebill").get("count")>0?this.tr("Auto-renewal <br />on %s downloads",this.model.get("rebill").get("count")):""},getExpiresLabel:function e(t){if(t===void 0){t=this.product}var i=60*60*24;var r=t.expires<i?"today":"default";var s=Math.floor(t.expires/i);var n=a.productExpiresLabels.find((function(e){return e.type===t.type&&e.period===r})),o=n.label;return this.tr(o,s)}})},625:function(e,t,i){"use strict";var a=i(23);var r=i(3);var s=i(551);e.exports=s.extend({name:"Credits",getRebillTitle:function e(){return this.model.get("rebill").get("count")>0?this.tr("Auto-renewal <br />on %s credits",this.model.get("rebill").get("count")):""},getExpiresLabel:function e(t){if(t===void 0){t=this.product}var i=r.unix(t.expires).diff(r(),"d");var s=i<1?"today":"default";var n=a.productExpiresLabels.find((function(e){return e.type===t.type&&e.period===s})),o=n.label;return this.tr(o,i)}})},626:function(e,t,i){"use strict";e.exports=function e(t){var i="<div>"+this.tr("The information transfer is secured and verified by SSL 256 bit certificate issued by  Comodo. Web site fully satisfies the security standards of Visa and Mastercard (PCI compliance). Security is also confirmed by TRUSTe.")+"</div>";return i}},627:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="tooltip-cvv-info"><p class="tooltip__pg">'+this.tr("The security code for Visa, MasterCard, JCB and Discover credit cards consists of 3 digits printed on the back of your credit card.")+'</p><img class="tooltip-cvv-info__img" src="'+this.app.cdnPath+'_img/cvv-example-1.jpg" /><p class="tooltip__pg">'+this.tr("The security code for the American Express card consists of 4 digits printed on the front of your credit card.")+'</p><img class="tooltip-cvv-info__img" src="'+this.app.cdnPath+'_img/cvv-example-2.jpg" /></div>';return i}},628:function(e,t){e.exports="/_img/cvv-example-1.jpg?72fab4c1683e6578b8c039aeeec8b46e"},629:function(e,t){e.exports="/_img/cvv-example-2.jpg?5d4bf852898e0081bfb6860d1454862c"},630:function(e,t,i){},631:function(e,t,i){"use strict";var a=i(0);var r=["ContentTypeIndexPhotos","ContentTypeIndexVectors","ContentTypeIndexEditorial","ContentTypeIndexVideos"];var s={photo:["landingPhotos"],vector:["landingVectors"],editorial:["landingEditorial"],video:["landingVideos1","landingVideos2"]};var n={index:["indexMainSlider"].concat(r),photo:["landingPhotosMain"],vector:["landingVectorsMain"],editorial:["landingEditorialMain"],video:["landingVideosMain"],dribbble:["dribbble"].concat(r),vecteezy:["vecteezy"].concat(r),picjumbo:["picjumbo"].concat(r),dealjumbo:["dealjumbo"].concat(r),mockupworld:["mockupworld"].concat(r),pixelbuddha:["pixelbuddha"].concat(r),sendpulse:["sendpulse"].concat(r)};a.each(s,(function(e,t){n[t]=n[t].concat(e)}));e.exports.seriesModelDefault={name:null,alone:false,random:false,slider:false,elements:null,limit:0};e.exports.seriesElementModelDefault={title:null,resource:null};e.exports.series=[{name:"indexMainSlider",alone:true,random:true,className:"series-box_poster"},{name:"landingPhotosMain",alone:true,random:true,className:"series-box_typed-poster"},{name:"landingVectorsMain",alone:true,random:true,className:"series-box_typed-poster"},{name:"landingEditorialMain",alone:true,random:true,className:"series-box_typed-poster"},{name:"landingVideosMain",alone:true,random:true,className:"series-box_typed-poster series-box_typed-poster_video"},{name:"dribbble",alone:true},{name:"vecteezy",alone:true},{name:"picjumbo",alone:true},{name:"dealjumbo",alone:true},{name:"mockupworld",alone:true},{name:"pixelbuddha",alone:true},{name:"sendpulse",alone:true},{name:"ContentTypeIndexPhotos"},{name:"ContentTypeIndexVectors"},{name:"ContentTypeIndexEditorial"},{name:"ContentTypeIndexVideos"},{name:"landingPhotos",grid:{rows:3,columns:4,spans:{"0:0":{rowspan:2},"1:1":{colspan:2}}}},{name:"landingVectors",grid:{rows:3,columns:4,spans:{"1:1":{colspan:2}}}},{name:"landingEditorial",grid:{rows:3,columns:4,spans:{"0:0":{rowspan:2},"0:3":{rowspan:2},"1:1":{colspan:2}}}},{name:"landingVideos1",grid:{rows:1,columns:3,spans:{"0:0":{className:"series-table__link_third"},"0:1":{className:"series-table__link_third"},"0:2":{className:"series-table__link_third"}}}},{name:"landingVideos2",grid:{rows:2,columns:4,spans:{"0:1":{colspan:2}}}},{name:"landingCuratedCollectionPhoto",grid:{rows:4,columns:4,spans:{"0:0":{colspan:2},"0:2":{rowspan:2},"1:0":{rowspan:2},"2:1":{colspan:2},"2:3":{rowspan:2},"3:0":{colspan:2}}}},{name:"landingCuratedCollectionVector",grid:{rows:4,columns:4,spans:{"0:1":{rowspan:2},"0:2":{colspan:2},"1:3":{rowspan:2},"2:0":{rowspan:2},"2:1":{colspan:2},"3:2":{colspan:2}}}},{name:"landingCuratedCollectionEditorial",grid:{rows:4,columns:4,spans:{"0:0":{rowspan:2},"0:2":{colspan:2},"1:1":{colspan:2},"1:3":{rowspan:2},"2:1":{rowspan:2},"3:2":{colspan:2}}}},{name:"curatedCollectionPoster",alone:true,className:"series-box_link"},{name:"curatedCollectionPosterMedium",alone:true},{name:"AboutUs",slider:true}];e.exports.seriesByPages=n;e.exports.customPageGridSeries=s},632:function(e,t,i){"use strict";var a=i(2);e.exports=a.extend({url:function e(){return this.force?"ForceRebill":"Rebill"},isHttps:true,force:false,defaults:{cardId:null,productId:null,productType:null,rebillState:null},validation:{cardId:{required:false,pattern:"number"},productId:{required:true,pattern:"number"},productType:{required:true},rebillState:{required:true,boolean:true}}})},633:function(e,t,i){},634:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(563);var o=i(666);e.exports=n.extend({name:"LoginModal",showTitle:false,roundCloseButton:true,destroyOnHide:true,modalClasses:"modal_login modal_with-poster",modalAttrs:"tabindex=0",bodyClasses:"modal__body_login",footer:[],initialize:function e(){this.body=[new o(r({app:this.app,backgroundSeriesName:"LogIn"},this.formOptions))];for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}n.prototype.initialize.apply(this,i)}})},635:function(e,t,i){"use strict";var a=r(i(553));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,i,a,r,s,n){try{var o=e[s](n);var l=o.value}catch(c){i(c);return}if(o.done){t(l)}else{Promise.resolve(l).then(a,r)}}function n(e){return function(){var t=this,i=arguments;return new Promise((function(a,r){var n=e.apply(t,i);function o(e){s(n,a,r,o,l,"next",e)}function l(e){s(n,a,r,o,l,"throw",e)}o(undefined)}))}}var o=i(0);var l=i(643);var c=i(546);var u=i(568);var d=i(113);var h=i(569);var p=i(550);var f=i(620);var v=i(552);var m=i(555);var b=i(636);var g=600;var _=c.extend(f).extend({name:"CardEditor",el:false,template:l,opened:false,countries:[],userGroupInfo:undefined,savedCards:[],events:{"click ._close":"onCloseClick","click ._submit":"onSubmitClick"},initialize:function e(){if(!this.model){this.model=new d({},{app:this.app})}this.virtual=new d(this.model.toJSON(),{app:this.app})},prepareRender:function e(){var t=this.getMerchantForm();this.setViews({"._card":new u({app:this.app,model:this.virtual,mode:"edit",size:"large"}),"._form":[new c({tagName:"i",className:"card-editor__sep"}),t]})},getMerchantForm:function e(){return new h({app:this.app,classNames:"merchant-form_compact",model:new d({id:this.model.get("id"),expiryMonth:this.model.get("expiryMonth"),expiryYear:this.model.get("expiryYear"),billingName:this.model.get("billingName")},{app:this.app}),useSaved:this.savedCards.length,savedCards:this.savedCards,formId:this.cid,onStartFormSubmit:this.onStartMerchantSubmit.bind(this),onFinishFormSubmit:this.onFinishMerchantSubmit.bind(this),onSuccessFormSubmit:this.onSuccessMerchantSubmit.bind(this),onCardChangeCallback:this.onMerchantModelChangeCallback.bind(this),onModelExternalError:this.onMerchantExternalError.bind(this)})},serialize:function e(){return{formId:this.cid}},clientAfterRender:function e(){v(this.$el,Backbone.$);m(this.$("._submit"))},onCloseClick:function e(){this.close()},onSubmitClick:function e(t){t.preventDefault();this.submitMerchantForm()},open:function(){var e=n(a.default.mark((function e(){var t=this;return a.default.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:if(!this.isOpened()){i.next=5;break}i.next=3;return new Promise((function(e){return t.$el.stop().show().animate({marginTop:0},g,e)}));case 3:i.next=10;break;case 5:i.next=7;return this.render().promise();case 7:i.next=9;return new Promise((function(e){return t.$el.show().animate({marginTop:0},g,e)}));case 9:this.onFinishOpeningAnimation();case 10:this.opened=true;case 11:case"end":return i.stop()}}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),close:function(){var e=n(a.default.mark((function e(){var t=this;var i;return a.default.wrap((function e(a){while(1){switch(a.prev=a.next){case 0:i=this.getView("._billing-address-editor");if(!i){a.next=4;break}a.next=4;return i.toggle(false);case 4:a.next=6;return new Promise((function(e){return t.$el.stop().animate({marginTop:"-"+t.$el.outerHeight()},g,e)}));case 6:this.opened=false;this.onClose();this.remove();case 9:case"end":return a.stop()}}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),isOpened:function e(){return this.opened},submitMerchantForm:function e(){this.findView("MerchantForm").$el.trigger("submit")},onFinishOpeningAnimation:function e(){var t=this.$el.offset().top-(document.documentElement.clientHeight-this.$el.height())/2;Backbone.$("html, body").animate({scrollTop:t+"px"},g)},onStartMerchantSubmit:function e(){this.$("._submit").trigger("loading")},onFinishMerchantSubmit:function e(){this.$("._submit").trigger("loaded")},onSuccessMerchantSubmit:function e(t,i){var a=this;if(i===void 0){i={}}if(i.errors){return}if(i.data&&i.data.is3dsTransaction){this.init3ds({app:this.app,html:i.data.html})}else{this.close().then((function(){return a.onCardEditSuccess(t)}))}},on3dsInit:function e(){this.$("._submit").trigger("loading")},on3dsInitSuccess:function e(t){this.open3dsBlankWindow(t)},on3dsInitError:function e(t){this.open3dsSameWindow(t)},on3dsSuccess:function e(t){var i=this;var a=t.message;this.$("._submit").trigger("loaded");var r=this.findView("MerchantForm").model.set({id:a.cardId});this.close().then((function(){return i.onCardEditSuccess(r)}))},on3dsError:function e(t){var i=t.code,a=t.message;this.$("._submit").trigger("loaded");this.findView("MerchantForm").markError(undefined,a,i)},onMerchantModelChangeCallback:function e(t){this.virtual.set(t.toJSON())},onMerchantExternalError:function(){var e=n(a.default.mark((function e(t){return a.default.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:if(t===void 0){t={}}if(!o.isEmpty(t)){i.next=3;break}return i.abrupt("return");case 3:if(!o.size(p.filterOwn(t,Object.keys(this.app.user)))){i.next=7;break}i.next=6;return this.showAddressEditor();case 6:this.getView("._billing-address-editor").showErrors(this.app.user,t);case 7:case"end":return i.stop()}}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onBillingAddressEditorSave:function e(){this.getView("._billing-address-editor").toggle(false)},onCardEditSuccess:function e(){},onClose:function e(){}});Object.assign(_.prototype,b);e.exports=_},636:function(e,t,i){"use strict";var a=r(i(553));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,i,a,r,s,n){try{var o=e[s](n);var l=o.value}catch(c){i(c);return}if(o.done){t(l)}else{Promise.resolve(l).then(a,r)}}function n(e){return function(){var t=this,i=arguments;return new Promise((function(a,r){var n=e.apply(t,i);function o(e){s(n,a,r,o,l,"next",e)}function l(e){s(n,a,r,o,l,"throw",e)}o(undefined)}))}}var o=i(637);e.exports={showAddressEditor:function(){var e=n(a.default.mark((function e(){var t=this;return a.default.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:this.setNotExistView("._billing-address-editor",o,{app:this.app,togglingMethod:"simple",countries:this.countries,userGroupInfo:this.userGroupInfo,onCloseCallback:function e(){return t.$("._inner").toggle(true)},onSaveSuccessCallback:this.onBillingAddressEditorSave.bind(this)});i.next=3;return this.toggleBillingAddressEditor(true);case 3:case"end":return i.stop()}}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggleBillingAddressEditor:function e(t){this.$("._inner").toggle(!t);return this.getView("._billing-address-editor").toggle(t)}}},637:function(e,t,i){"use strict";var a=r(i(553));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,i,a,r,s,n){try{var o=e[s](n);var l=o.value}catch(c){i(c);return}if(o.done){t(l)}else{Promise.resolve(l).then(a,r)}}function n(e){return function(){var t=this,i=arguments;return new Promise((function(a,r){var n=e.apply(t,i);function o(e){s(n,a,r,o,l,"next",e)}function l(e){s(n,a,r,o,l,"throw",e)}o(undefined)}))}}var o=i(0);var l=i(17);var c=i(115);var u=i(647);var d=i(546);var h=i(577);var p=i(24);var f=i(552);var v=i(555);var m=i(554);var b=i(550);var g=800;var _=d.extend({name:"BillingAddressEditor",el:false,template:u,countries:[],togglingMethod:"slide",togglingInProgress:false,opened:false,events:{"change [data-capitalize]":"onCapitalizeEvent","keyup [data-capitalize]":"onCapitalizeEvent","input [data-capitalize]":"onCapitalizeEvent","paste [data-capitalize]":"onCapitalizeEvent","click ._close-btn":"onCloseClick","focusin input":"onFieldFocusIn","focusin select":"onFieldFocusIn","submit ._form":"onSubmit"},initialize:function e(){this.listenTo(this.app.user,"invalid",this.showErrors);this.setViews({"._phone":new h({app:this.app,phone:this.app.user.get("phone")})})},serialize:function e(){var t=(this.userGroupInfo?this.userGroupInfo:this.app.user).toProfileJSON();var i=this.countries.length&&this.countries.findWhere({code:t.country}).serialize();return{countries:o.isFunction(this.countries.serialize)?this.countries.serialize():[],userCountry:(i||{}).title,userInfo:o.extend({fullName:t.firstName||t.lastName?t.firstName+"&nbsp;"+t.lastName:t.fullName},t)}},clientAfterRender:function e(){f(this.$el,l.$);v(this.$('[type="submit"]'))},open:function(){var e=n(a.default.mark((function e(){var t=this;return a.default.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:i.next=2;return this.render().promise();case 2:if(!(this.togglingMethod==="slide")){i.next=6;break}this.togglingInProgress=true;i.next=6;return new Promise((function(e){return t.$("._form").css({marginTop:"-500px"}).animate({marginTop:0},g,e)}));case 6:this.togglingInProgress=false;this.opened=true;case 8:case"end":return i.stop()}}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),close:function(){var e=n(a.default.mark((function e(){var t=this;return a.default.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:if(!(this.togglingMethod==="slide")){i.next=6;break}this.togglingInProgress=true;i.next=4;return new Promise((function(e){return t.$("._form").stop().animate({marginTop:"-500px"},g,e)}));case 4:i.next=7;break;case 6:this.$el.remove();case 7:this.togglingInProgress=false;this.opened=false;this.onCloseCallback();case 10:case"end":return i.stop()}}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggle:function(){var e=n(a.default.mark((function e(t){var i;return a.default.wrap((function e(a){while(1){switch(a.prev=a.next){case 0:i=t!=null?t:!this.opened;if(!i){a.next=6;break}a.next=4;return this.open();case 4:a.next=8;break;case 6:a.next=8;return this.close();case 8:case"end":return a.stop()}}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),showErrors:function e(t,i){var a=this;o.each(this.$("label:not(.field-box_correct) input"),(function(e){return a.fieldReset(a.$(e).parent())}));o.each(b.filterOwn(i,o.keys(t.defaults)),(function(e,t){return a.fieldIncorrect(a.$("[name="+t+"]").parent(),{errorMessage:e})}))},handleErrors:function e(t,i){var a={};o.each(i.errors,(function(e){var t=c[e.error_code]||c.byDefault;if(typeof a[t]==="undefined"){a[t]=[]}a[t].push(e.error_message)}));this.showErrors(t,a)},onSubmit:function e(t){t.preventDefault();t.stopPropagation();var i=p.serializeForm(this.$el.find("._form"));this.$('[type="submit"]').trigger("loading");this.app.user.save(i,{parse:false,success:this.onFormSaveSuccess.bind(this)})},onFormSaveSuccess:function e(t,i){this.$('[type="submit"]').trigger("loaded");if(i.errors){this.handleErrors(t,i);this.onSaveErrorCallback()}else{this.onSaveSuccessCallback()}},onFieldFocusIn:function e(t){this.fieldReset(this.$(t.currentTarget).parent())},onCloseClick:function e(){this.toggle(false)},onCloseCallback:o.noop,onSaveSuccessCallback:o.noop,onSaveErrorCallback:o.noop});o.extend(_.prototype,m);e.exports=_},638:function(e,t,i){"use strict";var a=i(3);var r=i(548);var s=i(701);var n=i(650);var o=i(547);var l=i(546);e.exports=o.extend({name:"ProductRebillDiscountTooltip",params:r.RebillProductDiscount,prepareContent:function e(){var t=this;this.content=new l({template:n,serialize:function e(){return{product:t.model.serialize(),expiresDate:a.unix(t.model.get("expires")).format(s.statisticsDays)}}})}})},639:function(e,t,i){"use strict";var a=i(0);e.exports={handleErrors:function e(t){if(!t){return}var i=this.getResponseErrors(t);if(a.size(i)){this.validationError=i;this.trigger("invalid",this,i,{validationError:i})}},getResponseErrors:function e(t){var i=this;var r={};if(!t||!t.errors||!this.errorsMap){return null}a.each(t.errors,(function(e){var t=i.errorsMap[e.error_code]||i.errorsMap.byDefault;if(!r[t]){r[t]=[]}r[t].push(e.error_code+":"+e.error_message)}));return r}}},640:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(0);var o=i(77);var l=i(568);var c=i(632);var u=i(642);var d=i(648);var h=i(649);var p=i(638);var f=i(651);var v=i(652);var m=i(550);var b=i(549);var g=500;e.exports={additionalEvents:{"mouseenter ._rebill-help":"showRebillHelpTooltip","mouseleave ._rebill-help":"hideRebillHelpTooltip","mouseenter ._rebill-discount":"showRebillDiscountTooltip","mouseleave ._rebill-discount":"hideRebillDiscountTooltip",'change [name="rebill-checkbox"]':"handleRebillCheckboxChange","click ._switcher-disabled":"handleDisabledSwitcherClick","click ._settings":"handleSettingsClick","click ._card":"handleCardClick"},initRebillProduct:function e(){if(this.shouldShowCard()&&this.getRebillCard()){this.setView("._card",new l({app:this.app,model:this.getRebillCard(),mode:"view",size:"small"}))}if(this.shouldEnableRebill()){this.removeView("rebillTooltip");var t=new d({app:this.app,model:this.model});if(this.model.get("type")==="subscription"&&this.model.isInstallment()){t=new h({app:this.app})}this.setView("rebillTooltip",t)}if(this.model.get("rebill").get("discount")){this.removeView("rebillDiscountTooltip");this.setView("rebillDiscountTooltip",new p({app:this.app,model:this.model}))}else if(this.getView("rebillTooltip")){this.getView("rebillTooltip").params.templatePosition="rt"}},initRebillManager:function e(){if(!this.rebillManager){this.rebillManager=new c({app:this.app})}},initProductCardEditor:function e(t){var i=this;var a=t==="enable"?this.app.store.get("CreditCards").first():this.getRebillCard();return this.setView("._editor",new u({app:this.app,model:a,countries:this.countries,userGroupInfo:this.userGroupInfo,onClose:this.onEditorClose.bind(this),onCardEditSuccess:function e(a){return i.processRebill(t,a)}}))},getAdditionalSerializeParams:function e(){return r({},this.serializeParams,{isRebillEnabled:this.shouldEnableRebill(),rebillTitle:n.result(this,"getRebillTitle")||this.tr("Auto-Renewal"),product:this.model.serialize(),switcher:this.getRebillSwitcherData(),isSettingsOpened:this.isSettingsOpened,shouldShowCard:this.shouldShowCard()})},getRebillSwitcherData:function e(){var t=this.model.get("rebill");return{checked:t&&t.get("enabled"),disabled:!t||!t.get("editable"),className:"product-item__switcher switcher_red",name:"rebill-checkbox"}},getRebillCard:function e(){var t=this.model.get("rebill");return t!=null?t.getRebillCard():null},enableRebill:function e(){if(!this.shouldEnableRebill()){this.initProductCardEditor("enable").open()}},updateRebillCard:function e(){var t=this.getRebillCard();if(t&&t.get("paymentTokenType")==="apple_pay"||!this.shouldEnableRebill()){return}this.initProductCardEditor("update").open()},disableRebill:function e(){var t=this;if(this.shouldEnableRebill()){this.insertView("AutoRenewalModal",new f({app:this.app,onHideCallback:function e(){return t.onRebillDisablingCancel()}})).show().then((function(){return t.processRebill("disable",t.getRebillCard())}))}else if(this.shouldShowCardEditor()){this.getView("._editor").close()}},processRebill:function e(t,i){var a=this;if(t==="enable"){this.saveRebillState(i,true).then((function(e){return a.onProductRebillChange({result:e,card:i,visibility:true})}))}else if(t==="update"){this.saveRebillState(i,true).then((function(e){return a.onProductRebillChange({result:e,card:i,visibility:true})}))}else if(t==="disable"){this.saveRebillState(i,false).then((function(e){return a.onProductRebillChange({result:e,card:i,visibility:false})})).catch((function(){return a.onRebillDisablingCancel()}))}},redirectToDisable:function e(t){var i=t.type;if(!i){return}this.app.router.redirect(this.app.makeUrl({route:"Autorenewal",step:"status",type:i,transactionId:this.model.get("id")}))},shouldBePossibleRebill:function e(t,i){var a=t.type,r=t.rebill.purchaseMethod;var s=["subscription"];if(this.app.features.isFeatureOnValue("Cancellation Feedback for Membership")){s.push("membership")}return!s.includes(a)||i||!o.billings.list.includes(r)},saveRebillState:function e(t,i){var a=this;return new Promise((function(e,r){var s=t?+t.get("id"):null;if(!a.shouldBePossibleRebill(a.model.serialize(),i)){var n=a.model.get("type");if(["subscription","membership"].includes(n)){a.redirectToDisable({type:n})}return}a.initRebillManager();a.rebillManager.save({cardId:s,productId:parseInt(a.model.get("id"),10),productType:a.model.get("type"),rebillState:i},{success:function n(o,l){if(!l.errors||!l.errors.length){var c=a.model.get("rebill").get("editable");if(!o.get("rebillState")&&c&&t&&t.get("paymentTokenType")==="apple_pay"){c=false}e({cardId:s,enabled:o.get("rebillState"),editable:c});a.app.observer.broadcast("Track:UE:Autorenewal:Rebill",{status:i})}else{a.showErrorModal(l.errors);r()}}})}))},showErrorModal:function e(t){var i=m.parse(this.app,t);new b({app:this.app,title:this.tr("Error"),message:n.first(i).message}).show()},showUnableAutoRenewalModal:function e(){this.insertView("UnableAutoRenewalModal",new v({app:this.app,rebillInfo:this.model.get("rebill"),product:this.model})).show()},showRebillHelpTooltip:function e(t){this.getView("rebillTooltip").show(t)},hideRebillHelpTooltip:function e(t){this.getView("rebillTooltip").hide(t)},showRebillDiscountTooltip:function e(t){this.getView("rebillDiscountTooltip").show(t)},hideRebillDiscountTooltip:function e(t){this.getView("rebillDiscountTooltip").hide(t)},shouldShowCard:function e(){var t=this.model.get("rebill");return t&&t.get("possible")&&t.get("enabled")&&t.get("editable")},shouldShowCardEditor:function e(){return this.getView("._editor")&&this.getView("._editor").isOpened()},shouldEnableRebill:function e(){var t=this.model.get("rebill");return t&&t.get("possible")&&t.get("enabled")},handleRebillCheckboxChange:function e(t){if(t.currentTarget.checked){this.enableRebill()}else{this.disableRebill()}},handleSettingsClick:function e(){this.toggleSettings()},handleCardClick:function e(){if(this.getView("._editor")){this.getView("._editor").close()}else{this.updateRebillCard()}},onEditorClose:function e(){if(!this.model.get("rebill").get("enabled")){this.$('[name="rebill-checkbox"]').attr({checked:false})}},onRebillDisablingCancel:function e(){this.$('[name="rebill-checkbox"]').click()},handleDisabledSwitcherClick:function e(t){t.preventDefault();var i=this.model.get("rebill");if(i.get("enabled")&&!i.get("editable")){this.showUnableAutoRenewalModal()}},onProductRebillChange:function e(t){var i=t.result,a=t.card,r=t.visibility;this.model.get("rebill").set(i);this.app.store.get("CreditCards").add(a,{merge:true});if(this.getView("._editor")){this.getView("._editor").close()}this.toggleVisibility(r)},toggleSettings:function e(){var t=this;var i=this.$(".product-item__rebill-block, .product-item__card-holder");var a=!this.isSettingsOpened;var r=function e(a){i[a?"slideDown":"slideUp"](g,(function(){i.removeClass("product-item__rebill-block_hidden")}));t.$("._settings .arrow").removeClass("arrow-top, arrow-bottom").addClass(a?"arrow-top":"arrow-bottom");t.$el.toggleClass("product-item__rebill-detailed",a)};if(!a&&this.shouldShowCardEditor()){this.getView("._editor").close().then((function(){return r(a)}))}else{r(a)}this.isSettingsOpened=a},toggleVisibility:function e(t){var i=this;this.$el.slideUp(g,(function(){i.isSettingsOpened=t;i.render().promise().then((function(){i.$el.slideDown(g).addClass("product-item__rebill-detailed")}))}))}}},641:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="card-box '+i(t.classes)+'" data-count-number="'+i(t.numberLength)+'"><i class="card-box__type-icon"></i><span class="card-box__number">';var r=t.model.labels.number;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<span class="card-box__symbol" data-value="'+i(s)+'">'+i(s)+"</span>"}}a+='</span><span class="card-box__expired">';var l=t.model.labels.expire;if(l){var s,c=-1,u=l.length-1;while(c<u){s=l[c+=1];a+='<span class="card-box__symbol card-box__symbol_exp" data-value="'+i(s)+'">'+i(s)+"</span>"}}a+='</span><span class="card-box__valid">valid thru</span><span class="card-box__cvv"></span><span class="card-box__backside"><i class="card-box__magnetic-stripe"></i><span class="card-box__cvc-title">CVV/CVC</span><span class="card-box__cvc-value">'+t.model.labels.cvv+"</span></span></div>";return a}},642:function(e,t,i){"use strict";var a=i(3);var r=i(113);var s=i(635);var n=i(569);e.exports=s.extend({getMerchantForm:function e(){var t=this.model.get("id")?{id:this.model.get("id"),expiryMonth:this.model.get("expiryMonth"),expiryYear:this.model.get("expiryYear"),billingName:this.model.get("billingName")}:{expiryMonth:1,expiryYear:+a().format("YY")};return new n({app:this.app,classNames:"merchant-form_compact",model:new r(t,{app:this.app}),submit:function e(){if(this.getView("._merchant-card-manager").useSavedState){this.onSuccessFormSubmit(this.getView("._merchant-card-manager").getActiveCard());return}for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}n.prototype.submit.apply(this,i)},useSaved:this.app.store.get("CreditCards").length,savedCards:this.app.store.get("CreditCards"),formId:this.cid,onStartFormSubmit:this.onStartMerchantSubmit.bind(this),onFinishFormSubmit:this.onFinishMerchantSubmit.bind(this),onSuccessFormSubmit:this.onSuccessMerchantSubmit.bind(this),onCardChangeCallback:this.onMerchantModelChangeCallback.bind(this),onModelExternalError:this.onMerchantExternalError.bind(this)})},onSuccessMerchantSubmit:function e(t,i){if(i===void 0){i={}}if(i.errors){return}if(i.data&&i.data.is3dsTransaction){this.init3ds({app:this.app,html:i.data.html})}else{this.onCardEditSuccess(t)}},on3dsSuccess:function e(t){var i=t.message;this.$("._submit").trigger("loaded");this.onCardEditSuccess(this.findView("MerchantForm").model.set({id:i.cardId}))}})},643:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="cards-list__editor card-editor"><div class="cards-list__editor_inner _inner"><div class="card-editor__top"><div class="card-editor__left _card"></div><div class="card-editor__right _form"></div></div><div class="card-editor__bottom"><button class="card-editor__button button button-blue button-xl _submit" type="submit" form="'+i(t.formId)+'">'+this.tr("Save Information")+'</button><button class="card-editor__button button button-white button-xl _close">'+this.tr("Cancel")+'</button></div><i class="card-editor__close icon icon-close-cross _close"></i></div><div class="_billing-address-editor"></div></div>';return a}},644:function(e,t,i){},645:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<form id="'+i(t.formId)+'" class="'+i(t.classNames)+' merchant-form"><div class="merhcant-form_inner _merchant-card-manager"></div></form>';return a}},646:function(e,t,i){"use strict";var a=i(48);var r=i(549);e.exports=r.extend({name:"CardConfirmation",initialize:function e(){var t=this;for(var i=arguments.length,s=new Array(i),n=0;n<i;n++){s[n]=arguments[n]}r.prototype.initialize.apply(this,s);this.title=a.CardConfirmation;this.message=this.tr(a.CardConfirmationMessage);this.footer=[{label:a.CancelBtn,hide:true,callback:function e(){return t.def.reject(t)}},{label:a.ConfirmBtn,hide:true,color:"blue",defaultAction:true,callback:function e(){return t.def.resolve(t)}}]}})},647:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="billing-address-editor"><div class="billing-address-editor__wrapper"><form novalidate class="billing-address-form _form" method="POST"><i class="billing-address-form__close-btn icon-close-cross _close-btn"></i><div class="billing-address-form__field field-box input-box input-box-xl"><input data-capitalize class="input input-xl" type="text" name="firstName" value="'+i(t.userInfo.firstName)+'" placeholder="'+this.tr("First Name")+'" /></div><div class="billing-address-form__field field-box input-box input-box-xl"><input data-capitalize class="input input-xl" type="text" name="lastName" value="'+i(t.userInfo.lastName)+'" placeholder="'+this.tr("Last Name")+'" /></div><div class="billing-address-form__field field-box input-box input-box-xl _phone"><input class="input input-xl" type="tel" name="phone" value="'+i(t.userInfo.phone)+'" placeholder="'+this.tr("Phone Number")+'" /></div><div class="billing-address-form__field field-box input-box input-box-xl"><input data-capitalize class="input input-xl" type="text" name="address" value="'+i(t.userInfo.address)+'" placeholder="'+this.tr("Address")+'" /></div><div class="billing-address-form__field field-box input-box input-box-xl billing-address-form__field-city"><input data-capitalize class="input input-xl" type="text" name="city" value="'+i(t.userInfo.city)+'" placeholder="'+this.tr("City")+'" /></div><div class="billing-address-form__field field-box input-box input-box-xl billing-address-form__field-zip"><input class="input input-xl" type="text" name="zip" value="'+i(t.userInfo.zip)+'" placeholder="'+this.tr("Zip/Postal Code")+'" /></div><div class="billing-address-form__field field-box select-box select-box-xl"><select class="select select-xl" name="country">';var r=t.countries;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<option value="'+i(s.code)+'"';if(s.code===t.userInfo.country){a+=" selected"}a+=">"+i(s.title)+"</option>"}}a+='</select><i class="arrow arrow-black arrow-bottom"></i></div><button class="billing-address-form__submit button button-xxl button-blue" type="submit">'+this.tr("Save Information")+"</button></form></div></div>";return a}},648:function(e,t,i){"use strict";var a=i(3);var r=i(548);var s=i(23);var n=i(546);var o=i(547);e.exports=o.extend({name:"ProductRebillTooltip",params:r.RebillProduct,prepareContent:function e(){var t=this;this.content=new n({template:function e(){return t.getRebillLabel()}})},getRebillLabel:function e(){var t=this.model.get("type");var i=t==="credits"?"ondemand":t;var r=s.productRebillLabel.find((function(e){return e.key===i})),n=r.label;switch(t){case"subscription":case"membership":return this.tr(n,a.unix(this.model.get("expires")).diff(a(),"d"));default:return this.tr(n)}}})},649:function(e,t,i){"use strict";var a=i(548);var r=i(570);var s=i(546);var n=i(547);e.exports=n.extend({name:"ProductInstallmentRebillTooltip",params:a.RebillProduct,prepareContent:function e(){this.content=new s({template:r})}})},650:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="rebill-tooltip">';if(t.product.rebill.discount>0){i+='<div class="rebill-tooltip__item"><i class="rebill-tooltip__icon icon icon-ok-big"></i>'+this.tr("A %s discount on your current plan's future renewals has been successfully activated.",[t.product.rebill.discount+"%"])+"</div>"}if(t.product.type==="membership"&&t.product.rollover){i+='<div class="rebill-tooltip__item"><i class="rebill-tooltip__icon icon icon-ok-big"></i>'+this.tr("While you keep the auto-renewal <b>turned ON</b> your downloads newer expire and transfer month to month.")+"</div>"}i+='<div class="rebill-tooltip__item"><i class="rebill-tooltip__icon icon icon-ok-big"></i>'+this.tr("Your plan’s price protected for %s-month and will not change until <b>%s</b>",[24,t.expiresDate])+"</div></div>";return i}},651:function(e,t,i){"use strict";i(633);var a=i(48);var r=i(549);e.exports=r.extend({name:"AutoRenewal",el:false,initialize:function e(t){var i=this;r.prototype.initialize.apply(this,t);this.title=this.tr("Auto-Renewal");this.message=function(){return i.tr("Do you really want to cancel the auto-renewal?")};this.footer=[{label:a.CancelBtn,hide:true,callback:function e(){return i.def.reject(i)}},{label:a.YesIDoBtn,hide:true,color:"blue",defaultAction:true,callback:function e(){return i.def.resolve(i)}}]}})},652:function(e,t,i){"use strict";var a=i(653);var r=i(570);var s=i(48);var n=i(23);var o=i(546);var l=i(549);e.exports=l.extend({name:"AutoRenewalCancel",el:false,title:s.AutoRenewalCancelTitle,destroyOnHide:true,rebillInfo:null,product:null,initialize:function e(){var t=this;this.body=function(){return new o({el:false,template:a,serialize:function e(){return{username:t.app.user.getFullName(),showSupportMessage:!t.product.isInstallment()}},views:{"._message":new o({el:false,template:t.getTemplate()})}})};this.footer=[{label:s.OkBtn,color:"blue",hide:true,defaultAction:true}];if(this.rebillInfo&&this.getBillingServiceInfo()){this.footer.unshift({label:this.getBillingLabel(),hide:true,color:"blue",callback:function e(){return t.redirectToBillingService()}})}},getTemplate:function e(){if(this.product.isInstallment()){return r}return this.rebillInfo.get("isOwner")?"<span>"+s.AutoRenewalCancelMessage+"</span>":"<span>"+this.tr("The auto-renewal of this plan is controlled by Administrator of your account.")+"</span>"},getBillingServiceInfo:function e(){var t=this;return n.billingServicesLinks.find((function(e){return e.key===t.rebillInfo.get("purchaseMethod")}))},getBillingLabel:function e(){var t=this.getBillingServiceInfo();return t?t.label:null},redirectToBillingService:function e(){this.app.router.redirect(this.rebillInfo.get("billingServiceLink")||this.app.makeUrl(this.rebillInfo.get("purchaseMethod")))}})},653:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="auto-renewal-cancel-modal"><p><b>'+this.tr("Dear")+" "+i(t.username)+'!</b></p><p class="_message"></p>';if(t.showSupportMessage){a+="<p>"+this.tr('In case you have any further questions or problems canceling the automatic renewal of your plan, please feel free to contact our <a class="%s" href="%s">support service</a>.',["link-blue",this.app.makeUrl("contact_us")])}a+="</div>";return a}},654:function(e,t,i){"use strict";i(655);var a=i(656);var r=i(23);var s=i(0);var n=i(3);var o=i(546);e.exports=o.extend({el:false,template:a,serialize:function e(){return{isRenew:this.app.user.get("isSubaccount")&&!this.product.owner,isStatusVisible:this.isStatusVisible(),status:this.getRechargeStatus(),labels:{renew:this.getRenewLabel(),status:this.getStatusLabel(),info:this.getInfoLabel()}}},isStatusVisible:function e(){var t=this.getRechargeStatus();return t==="wait"||t==="fail"},getRenewLabel:function e(t){if(t===void 0){t=this.product}var i;var a;if(t.buy_period===1){i="daily";var o=n.duration(n.unix(t.renewal).valueOf());a=[o.hours(),o.minutes()]}else{i="monthly";a=n.duration(n.unix(t.renewal).valueOf()).days()}var l=s.findWhere(r.subscriptionsRenewLabels,{period:i,type:"renew"}).label.trim();return this.tr(l,a)},getRechargeStatus:function e(){return this.app.user.get("subscriptionRechargeInfo")&&this.app.user.get("subscriptionRechargeInfo").status||""},getStatusLabel:function e(){if(!this.isStatusVisible()){return""}return this.tr(s.findWhere(r.subscriptionsRenewLabels,{type:"status",value:this.getRechargeStatus()}).label.trim())},getInfoLabel:function e(t){if(t===void 0){t=this.product}return this.tr(s.findWhere(r.subscriptionsRenewLabels,{period:t.buy_period===1?"daily":"monthly",type:"info"}).label.trim())}})},655:function(e,t,i){},656:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="subscription-renew"><p class="subscription-renew__row';if(t.isRenew){i+=" subscription-renew__row_green"}i+='"><b>'+t.labels.renew+"</b></p>";if(t.isStatusVisible){i+='<p class="subscription-renew__row';if(t.status==="wait"){i+=" subscription-renew__row_red"}if(t.status==="fail"){i+=" subscription-renew__row_orange"}i+='">'+t.labels.status+"</p>"}i+='<p class="subscription-renew__row_last"><b>'+this.tr("Note")+": </b>"+t.labels.info+"</p></div>";return i}},657:function(e,t,i){"use strict";var a=i(0);var r=i(23);var s=i(658);var n=i(546);e.exports=n.extend({el:false,template:s,serialize:function e(){return{labels:{base:this.tr(a.findWhere(r.subscriptionExpiredLabels,{type:"base"}).label.trim()),info:this.tr(a.findWhere(r.subscriptionExpiredLabels,{type:"info",period:this.product.buy_period}).label.trim())}}}})},658:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="subscription-rebill base"><p class="subscription-rebill__row"><b>'+t.labels.base+'</b></p><p class="subscription-rebill__row_last">'+t.labels.info+"</p></div>";return i}},659:function(e,t,i){"use strict";(function(t){var a=i(0);var r=i(4);var s=t.browser?i(75):null;var n=i(549);var o=i(565);var l=i(687),c=l.injectGoogleScript;var u=i(688),d=u.injectFacebookScript;var h=3005;var p=function(){function e(e){var t=this;this.app=e.app;this.lang=r.languages.default;this.el=e.el||document;this.model=new o([],{defaults:{code:null,accessToken:null,email:null,__utmz:null,signup_type:null,dp_unbounce_url:null,condition:true}});this.cb=e.onAuthCallback;this.model.defaults=this.model.options.defaults;this.model.getRespErrors=function(e){return e.errors};this.model.set({__utmz:s.get("__utmz"),unbounce_url:s.get("unbounce_url"),signup_type:e.app.chain.name==="download"?"signup_download":"signup_direct"},{silent:true});this.model.listenTo(this.model,"sync",(function(e,i){if(i&&!i.errors&&i.sessionid){var a=i.userid&&i.isNew?"Track:UE:SignUp:Success":"Track:UE:Login:Success";t.app.observer.broadcast(a,{userId:i.userid,action:"Social",label:t.actionName==="google"?"Google":"Facebook"});if(t.cb){t.cb();return}t.onAuthCallback()}}));this.model.listenTo(this.model,"invalid error",(function(i,a){var r=a.errors&&a.errors[0]||{};if(r.error_code===h){var s={data:i.attributes,callback:t.proceedWithAuthorisation.bind(t)};if(t.actionName==="google"){s.callback=function(){gauth2.grantOfflineAccess({redirect_uri:"postmessage"}).then(t.googleOnSuccess.bind(t));t.setAccessCondition((function(){return true}));t.app.observer.fire("SignUp:SocialEmailHide")}}t.app.observer.fire("SignUp:SocialConditionShow",s)}else if(r.error_message){new n({app:t.app,title:"Login Error: "+r.error_code,message:r.error_message.replace("%s",e.app.makeUrl("contact_us"))}).show()}}))}var t=e.prototype;t.setLang=function e(t){this.lang=t||this.lang};t.setAccessCondition=function e(t){this.accessCondition=t};t.injectFacebookScript=function e(){var t=this;return d(this.lang).then((function(){return t.listenToFacebookButton()}))};t.listenToFacebookButton=function e(){var t=this;var i=this.el.querySelectorAll("._social-facebook");if(typeof FB!=="undefined"&&i.length>0){i.forEach((function(e){if(typeof e.getAttribute("data-fb-init")!=="string"){e.addEventListener("click",t.executeFacebook.bind(t),false)}e.setAttribute("data-fb-init","")}))}};t.executeFacebook=function e(){if(!this.hasAccess()){return}if(typeof FB==="undefined"){this.injectFacebookScript().then(this.executeFacebookLogin)}else{this.executeFacebookLogin()}};t.executeFacebookLogin=function e(){var t=this;FB.login((function(e){if(e.authResponse&&e.authResponse.accessToken){t.isFacebookEmailAllowed().then((function(i){var r=a.clone(e.authResponse);r.url="facebookLogin";t.actionName="facebook";if(!i){t.socialFirstGetEmail(r)}else{t.proceedWithAuthorisation(r)}}))}}),{scope:"email,publish_actions,public_profile,user_friends,user_hometown"})};t.socialFirstGetEmail=function e(t){this.app.observer.fire("SignUp:SocialEmailShow",{data:t,callback:this.proceedWithAuthorisation.bind(this)})};t.isFacebookEmailAllowed=function e(){return new Promise((function(e){try{FB.api(r.social.facebook.version+"//me/permissions",(function(t){if(t&&!t.error&&t.data){t.data.forEach((function(t){if(t.permission==="email"&&t.status==="granted"){return e(true)}return null}))}return e(false)}))}catch(t){return e(false)}return null}))};t.injectGoogleScript=function e(){var t=this;return c(this.lang).then((function(){return t.listenToGoogleButton()}))};t.listenToGoogleButton=function e(){var t=this;var i=this.el.querySelectorAll("._social-google");if(typeof gapi!=="undefined"&&gapi.signin2&&i.length>0){i.forEach((function(e){if(e.id.search("google-login-")===-1){e.id="google-login-"+Math.random();e.addEventListener("click",(function(){if(!t.hasAccess()){return}gauth2.grantOfflineAccess({redirect_uri:"postmessage"}).then(t.googleOnSuccess.bind(t))}),false)}}))}};t.googleOnSuccess=function e(t){this.actionName="google";this.proceedWithAuthorisation({url:"googleLogin",code:t.code})};t.proceedWithAuthorisation=function e(t){this.model.url=t.url;this.model.set(Object.assign({condition:typeof this.accessCondition==="function"&&this.accessCondition()},t),{silent:true});this.model.fetch();this.app.observer.fire("SignUp:SocialEmailHide")};t.socialLogout=function e(t){this.model.url=t+"Logout";this.model.fetch()};t.hasAccess=function e(){return!(typeof this.accessCondition==="function"&&!this.accessCondition())};t.onAuthCallback=function e(){this.app.chain.tempUserAfterLoginCommonLogic()};return e}();e.exports=p}).call(this,i(16))},660:function(e,t,i){},661:function(e,t,i){},662:function(e,t,i){"use strict";i(575);var a=i(0);var r=i(727);var s=i(48);var n=i(546);e.exports=n.extend({el:false,template:r,initialize:function e(){this.errorMessages=[];this.listenTo(this.model,"invalid",this.setErrorMessages)},setErrorMessages:function e(t,i){this.errorMessages=[];if(a.isArray(i)){this.errorMessages=i}else if(i){if(i.width==="ErrorMinWidth"||i.height==="ErrorMinHeight"){this.errorMessages.push(this.tr(s.ErrorMinResolution,this.model.limits.minResolution))}if(i.width==="ErrorMaxWidth"||i.height==="ErrorMaxHeight"){this.errorMessages.push(this.tr(s.ErrorMaxResolution,this.model.limits.maxResolution))}a.each(a.omit(i,["width","height"]),(function(e,t){this.errorMessages.push(this.tr(s[e],this.model.limits[t]))}),this)}this.render()},serialize:function e(){return{errorMessages:this.errorMessages}}})},663:function(e,t,i){"use strict";var a=i(0);var r=i(2);var s=i(664);e.exports=r.extend({parse:function e(t){var i=new s(a.pick(t,"elementResource","type","imageUrl","videoUrl"),{parse:true});return a.extend({},a.omit(t,"elementResource","type","imageUrl","videoUrl"),{resource:i})},toJSON:function e(){var t=a.omit(this.attributes,"resource");t.resource=this.get("resource").toJSON();if(t.urlVar){t.urlVar=this.app.makeUrl(t.urlVar)}return t}})},664:function(e,t,i){"use strict";var a=i(2);e.exports=a.extend({parse:function e(t){var i={};if(t.imageUrl){i[t.imageUrl.split(".").pop()]=t.imageUrl}if(t.videoUrl){i[t.videoUrl.split(".").pop()]=t.videoUrl}return{type:t.type||null,width:t.elementResource.resourceInfo&&t.elementResource.resourceInfo[0]?t.elementResource.resourceInfo[0]:null,height:t.elementResource.resourceInfo&&t.elementResource.resourceInfo[1]?t.elementResource.resourceInfo[1]:null,src:i}}})},665:function(e,t,i){"use strict";var a=i(23);var r=i(551);e.exports=r.extend({name:"ImagePack",getExpiresLabel:function e(t){if(t===void 0){t=this.product}var i=a.productExpiresLabels.find((function(e){return e.type===t.type})),r=i.label;return this.tr(r)}})},666:function(e,t,i){"use strict";(function(t){i(678);i(679);i(661);var a=i(0);var r=i(4);var s=i(17);var n=i(680);var o=i(73),l=o.userErrors;var c=i(546);var u=i(681);var d=i(580);var h=i(682);var p=i(554);var f=i(74);var v=i(24),m=v.serializeForm;var b=i(552);var g=i(555);var _=i(659);var w=i(557);var y="10_es_login";var k=c.extend({el:false,name:"LoginForm",template:n,events:{submit:"onSubmit",click:"onClick","focusin input":"onInputEvent","keypress input":"onInputEvent","focusout input":"onInputEvent","click ._forgot-pwd":"onRecoveryClick","click ._enterprise-request":"onEnterpriseRequestClick","click ._signup":"handleSignUpClick","change ._field":"onUpdateField","keyup ._field":"onUpdateField","input ._field":"onUpdateField","paste ._field":"onUpdateField"},backgroundSeriesName:"",initialize:function e(){this.model=new u({},{app:this.app});this.listenTo(this.model,"invalid",this.showError)},initBackground:function e(){this.series=new d({lang:this.app.lang,name:this.backgroundSeriesName},{app:this.app});this.listenTo(this.series,"sync",this.updateBackground);this.series.fetch()},serialize:function e(){return{title:this.title||this.app.tr("Sign In"),description:this.description,links:{login:this.app.makeUrl("login",{protocol:"https:",backURL:true}),enterpriseRequest:this.app.makeUrl("enterprise",{hash:"send-request"})},captcha:{show:this.isCaptchaNeeded(),siteKey:r.client.recaptcha.publicKey},signupUrl:this.app.makeUrl("signup",{query:this.isPage?this.app.queryParams:{}}),errors:this.errors,fieldData:this.model.serialize(),authSocialTitle:this.tr("or Log In using"),isPage:this.isPage}},clientAfterRender:function e(){var t=this;this.$submit=this.$el.find("._submit");this.$("._field-login").trigger("focus");b(this.$el,s.$);g(this.$submit);if(this.isCaptchaNeeded()&&!this.$(".g-recaptcha-response").length){w.injectScript().then((function(){return w.render(t.$(".g-recaptcha")[0])}))}if(this.backgroundSeriesName){this.initBackground()}this.initSocial()},initSocial:function e(){var t=new _({app:this.app});t.setLang(this.app.lang);t.injectFacebookScript();t.injectGoogleScript()},onSubmit:function e(t){var i=this.$('input[name="username"]');t.preventDefault();i.val(i.val().trim());var a=m(this.$("form"));if(this.$(".g-recaptcha-response").length&&!a["g-recaptcha-response"]){this.fieldIncorrect(this.$(".g-recaptcha-response").parent(),{errorMessage:"Please check the ReCaptcha check box."});return}this.auth(a)},onClick:function e(t){t.stopPropagation()},onInputEvent:function e(t){switch(t.type){case"keypress":if((t.which||t.keyCode)===13){this.onSubmit(t)}break;case"focusout":if(t.currentTarget.value.length){this.fieldCorrect(this.$(t.currentTarget).parent())}break;case"focusin":this.fieldReset(this.$(t.currentTarget).parent());break;default:break}},onRecoveryClick:function e(t){t.preventDefault();t.stopPropagation();new h({app:this.app}).show()},onEnterpriseRequestClick:function e(){this.onEnterpriseRequestCallback()},handleSignUpClick:function e(t){var i=this;t.stopPropagation();t.preventDefault();this.app.store.get("ModalsManager").show("SignupModal",{app:this.app}).then((function(){i.app.observer.fire("Modal:HideByName",{name:"LoginModal"});i.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:i.name})})).catch((function(){}))},updateBackground:function e(){var t=this.series.getImagesList();if(!t){return}this.$("._bg").css({opacity:1,"background-image":"url("+t.background+")"})},auth:function e(t){var i=this;this.$submit.trigger("loading");this.model.save(t,{success:function e(t,a){if(typeof a.userid!=="undefined"){f.set(y,Number(i.model.get("enterprise")));i.app.observer.broadcast("Track:UE:Login:Success",{userId:a.userid,action:"Form",label:"Regular"});i.onAuthCallback(a)}else{w.reset(i.$(".g-recaptcha-response"))}},error:function e(){i.app.router.redirect(i.app.makeUrl("login",{backURL:true}))}})},showError:function e(i,r){var s=this;this.errors=r;if(!t.browser){return}this.$submit.trigger("loaded");a.each(this.$("input"),(function(e){s.fieldReset(s.$(e).parent())}));this.fieldReset(this.$(".g-recaptcha-response").parent());this.model.set("g-recaptcha-response","");a.each(r,(function(e,t){var i=(a.isArray(e)?a.first(e):e).split(":");var r=+i[0];var n=i[1];if(a.contains(Object.values(l),r)){w.injectScript().then((function(){return w.render(s.$(".g-recaptcha")[0])}))}if(r&&!n){n=r}s.fieldIncorrect(s.$("input[name="+t+"]").parent(),{errorMessage:n})}))},isCaptchaNeeded:function e(){return this.app.store.get("UserBanInfo")&&this.app.store.get("UserBanInfo").get("loginAsUser")},onAuthCallback:function e(){this.app.chain.tempUserAfterLoginCommonLogic()},onEnterpriseRequestCallback:function e(){}});Object.assign(k.prototype,p);e.exports=k}).call(this,i(16))},667:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<a class="user-plans-list__item';if(t.needToShowHelpTooltip){a+=" user-plans-list__item_help"}a+=' _product"';if(t.href){a+=' href="'+t.href+'"'}a+=' data-bit="'+i(t.product.bit_price)+'"  data-split="'+t.product.split_count+'"><span class="user-plans-list__title">'+t.labels.base;if(t.product.serialIndex){a+='<i class="user-plans-list__label label label-position-counter">'+i(t.product.serialIndex)+"</i>"}a+='</span><span class="user-plans-list__text">'+t.labels.left+'</span><span class="user-plans-list__text">'+t.labels.expires+"</b></span>";if(t.product.split_count>0){a+='<span class="user-plans-list__text">'+t.labels.splitCount+"</span>"}a+='<i class="user-plans-list__icon user-plans-list__icon_credits"></i>';if(t.rebill.showDiscount&&t.product.rebill.discount>0){a+='<span class="rebill-discount label label-discount _rebill-discount">-'+i(t.product.rebill.discount)+"%</span>"}a+="</a>";return a}},668:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<a class="user-plans-list__item';if(t.needToShowHelpTooltip){a+=" user-plans-list__item_help"}if(t.product.rebill.discount>0){a+=" user-plans-list__item_discount"}a+=' _product"';if(t.href){a+=' href="'+t.href+'"'}a+=' data-id="'+i(t.product.id)+'" data-bit="'+i(t.product.bit_price)+'"data-split="'+t.product.split_count+'"><span class="user-plans-list__title">'+t.labels.base;if(t.product.serialIndex){a+='<i class="user-plans-list__label label label-position-counter">'+i(t.product.serialIndex)+"</i>"}a+="</span>";if(t.labels.left){a+='<span class="user-plans-list__text">'+t.labels.left+"</span>"}if(t.labels.curated){a+='<span class="user-plans-list__text">'+t.labels.curated+"</span>"}a+='<span class="user-plans-list__text">'+t.labels.renew+"</span>";if(t.product.split_count>0){a+='<span class="user-plans-list__text">'+t.labels.splitCount+"</span>"}a+='<i class="user-plans-list__icon user-plans-list__icon_subscription _info">'+t.labels.daysLeft+"</i>";if(t.needToShowHelpTooltip){a+='<i class="user-plans-list__help icon icon-help _help"></i>'}if(t.rebill.showDiscount&&t.product.rebill.discount>0){a+='<span class="rebill-discount label label-discount _rebill-discount">-'+i(t.product.rebill.discount)+"%</span>"}a+="</a>";return a}},669:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<a class="user-plans-list__item';if(t.product.rebill.discount>0){a+=" user-plans-list__item_discount"}a+=' _product" ';if(t.href){a+=' href="'+t.href+'"'}a+=' data-bit="'+i(t.product.bit_price)+'" data-split="'+t.product.split_count+'"><span class="user-plans-list__title">'+t.labels.base;if(t.product.serialIndex){a+='<i class="user-plans-list__label label label-position-counter">'+i(t.product.serialIndex)+"</i>"}a+='</span><span class="user-plans-list__text">'+t.labels.left+'</span><span class="user-plans-list__text">'+t.labels.expires+"</span>";if(t.product.split_count>0){a+='<span class="user-plans-list__text">'+t.labels.splitCount+"</span>"}a+='<i class="user-plans-list__icon user-plans-list__icon_ondemand"></i>';if(t.rebill.showDiscount&&t.product.rebill.discount>0){a+='<span class="rebill-discount label label-discount _rebill-discount">-'+i(t.product.rebill.discount)+"%</span>"}a+="</a>";return a}},670:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<a class="user-plans-list__item _product"';if(t.href){a+=' href="'+t.href+'"'}a+=' data-bit="'+i(t.product.bit_price)+'" data-split="'+t.product.split_count+'"><span class="user-plans-list__title">'+t.labels.base;if(t.product.serialIndex){a+='<i class="user-plans-list__label label label-position-counter">'+i(t.product.serialIndex)+"</i>"}a+='</span><span class="user-plans-list__text">'+t.labels.left+'</span><span class="user-plans-list__text">'+t.labels.expires+"</span>";if(t.product.split_count>0){a+='<span class="user-plans-list__text">'+t.labels.splitCount+"</span>"}a+='<i class="user-plans-list__icon user-plans-list__icon_imagepack"></i></a>';return a}},671:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<a class="user-plans-list__item';if(t.product.rebill.discount>0){a+=" user-plans-list__item_discount"}a+=' _product _buy-more" ';if(t.href){a+=' href="'+t.href+'"'}a+=' data-id="'+i(t.product.id)+'" data-bit="'+i(t.product.bit_price)+'" data-split="'+t.product.split_count+'"><span class="user-plans-list__title">'+t.labels.base;if(t.product.serialIndex){a+='<i class="user-plans-list__label label label-position-counter">'+i(t.product.serialIndex)+"</i>"}a+='</span><span class="user-plans-list__text">'+t.labels.left+'</span><span class="user-plans-list__text">'+t.labels.curated+'</span><span class="user-plans-list__text">'+t.labels.renew+'</span><i class="user-plans-list__icon user-plans-list__icon_membership _info"></i>';if(t.rebill.showDiscount&&t.product.rebill.discount>0){a+='<span class="rebill-discount label label-discount _rebill-discount">-'+i(t.product.rebill.discount)+"%</span>"}a+="</a>";return a}},672:function(e,t,i){"use strict";i(675);var a=i(676);var r=i(677);var s=i(0);var n=i(17);var o=i(546);var l=i(674);var c={credits:{},subscription:{},ondemand:{},membership:{},imagepack:{}};c.credits.View=i(625);c.credits.template=i(667);c.subscription.View=i(623);c.subscription.template=i(668);c.ondemand.View=i(624);c.ondemand.template=i(669);c.imagepack.View=i(665);c.imagepack.template=i(670);c.membership.View=i(618);c.membership.template=i(671);e.exports=o.extend({name:"UserProductsList",el:false,template:a,showBalance:false,linksEnabled:false,handleProductClick:true,showRebillDiscount:false,plans:undefined,events:{"click ._product":"onUserProductClick"},initialize:function e(){this.listenTo(this.app.user,"sync",this.render)},prepareRender:function e(){if(this.showBalance){this.insertView("._list",new l({app:this.app,template:r,balance:this.app.user.get("balance")}))}s.each(this.plans.serializeUserPlans(),(function(e){this.insertView("._list",this.getProductView(e))}),this)},serialize:function e(){return{products:this.plans.serializeUserPlans()}},getProductView:function e(t){var i=this.linksEnabled?this.app.makeUrl("subscribe",{backURL:true}):"";var a=c[t.type];var r=this.app.user.products.findWhere({type:t.type,id:t.id});if(!a||!r){return null}return new a.View({app:this.app,template:a.template,product:r.serialize(),model:r,showRebillDiscount:this.showRebillDiscount,showRefillModalOnClick:this.handleProductClick,serializeParams:{href:i}})},onUserProductClick:function e(t){if(!this.linksEnabled){t.stopPropagation();t.preventDefault()}t.stopImmediatePropagation();this.chooseProductCallback(this.plans.serializeUserPlans()[n.$(t.currentTarget).index()])},chooseProductCallback:s.noop})},675:function(e,t,i){},676:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="user-plans-list _list"></div>';return i}},677:function(e,t,i){"use strict";e.exports=function e(t){var i='<a class="user-plans-list__item" href="'+this.app.makeUrl("request_earnings")+'"><span class="user-plans-list__title">'+this.tr("Earned Money")+'</span><span class="user-plans-list__text">'+this.tr("Balance: $<b>%s</b>",t.balance)+'</span><i class="user-plans-list__icon icon icon-earned-money"></i></a>';return i}},678:function(e,t,i){},679:function(e,t,i){},680:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="login-user';if(t.isPage){a+=" login-user_page"}a+='"><h1 class="login-user__title">'+t.title+"</h1>";if(t.description){a+='<h4 class="user-auth__sub-title">'+t.description+"</h4>"}a+='<form class="login-user__form" action="'+t.links.login+'" method="POST" novalidate><label class="login-user__field field-box field-box_light field-box_rounded field-box_large input-box input-box-4xl"><input class="input input-4xl';if(!t.fieldData.username){a+=" empty"}a+=' _field _field-login" type="email" name="username"value="';if(t.fieldData.username){a+=""+i(t.fieldData.username)}a+='" autocomplete="username" /><span class="field-box__title">'+this.tr("E-mail")+' *</span></label><label class="login-user__field field-box field-box_light field-box_rounded field-box_large input-box input-box-4xl"><input class="input input-4xl';if(!t.fieldData.password){a+=" empty"}a+=' _field" type="password" name="password"value="';if(t.fieldData.password){a+=""+i(t.fieldData.password)}a+='" autocomplete="current-password" /><span class="field-box__title">'+this.tr("Password")+' *</span></label><div class="login-user__captcha g-recaptcha _captcha';if(t.captcha.show){a+=" login-user__captcha_visible"}a+='" data-sitekey="'+i(t.captcha.siteKey)+'"></div><button class="login-user__submit button button-4xl button-blue button-pill button-bold _submit" type="submit">'+this.tr("Log In")+'</button></form><span class="login-user__forgot-pwd login-user__alt-action _forgot-pwd"><span class="login-user__link-text">'+this.tr("Forgot your password?")+'</span></span><div class="login-user__social"><div class="auth-social"><span class="auth-social__text">'+t.authSocialTitle+'</span><div class="auth-social__btn auth-social__btn_google _social-google" title="'+this.tr("Google")+'"></div><div class="auth-social__btn auth-social__btn_facebook _social-facebook" title="'+this.tr("Facebook")+'"></div></div></div><a class="login-user__signup login-user__alt-action';if(!t.isPage){a+=" _signup"}a+='" href="'+i(t.signupUrl)+'">'+this.tr("Not Registered?")+' <span class="login-user__link-text">'+this.tr("Create Account!")+'</span></a><div class="login-user__bg _bg"></div></div>';return a}},681:function(e,t,i){"use strict";var a=i(114);var r=i(565);e.exports=r.extend({url:"Login",isHttps:true,isBulkAllowed:false,defaults:a.LoginForm.defaults,errorsMap:a.LoginForm.errorsMap,validation:a.LoginForm.validation})},682:function(e,t,i){"use strict";var a=i(48);var r=i(549);var s=i(563);var n=i(683);e.exports=s.extend({name:"PasswordRecovery",initialize:function e(){var t=this;this.title=a.PasswordRecoveryTitle;this.body=function(){return new n({app:t.app,onSendCallback:function e(){return t.onSendCallback()}})};this.footer=[{label:a.SendResetLinkBtn,color:"blue",defaultAction:true,callback:"sendCallback"}]},sendCallback:function e(){this.findView("PasswordRecoveryForm").onSubmit()},onSendCallback:function e(){this.hide();new r({app:this.app,title:a.PasswordRecoveryTitle,message:this.tr(a.PasswordRecoveryEmailSent,[this.app.makeUrl("contact_us"),'class="link-blue"'])}).show()}})},683:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}i(684);var n=i(0);var o=i(4);var l=i(685);var c=i(73),u=c.userErrors;var d=i(558);var h=i(686);var p=i(557);e.exports=d.extend({name:"PasswordRecoveryForm",el:false,template:l,events:r({},d.prototype.events,{"focusout ._field":"onRegularFieldFocusOut"}),initialize:function e(){this.model=new h({},{app:this.app});for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}d.prototype.initialize.apply(this,i);this.listenTo(this.model,"error",this.handleModelError)},serialize:function e(){return{attrs:this.model.serialize(),captcha:{show:this.isCaptchaNeeded(),apiUrl:o.client.recaptcha.apiUrl,siteKey:o.client.recaptcha.publicKey}}},clientAfterRender:function e(){var t=this;if(this.isCaptchaNeeded()&&!this.$(".g-recaptcha-response").length){p.injectScript().then((function(){return p.render(t.$(".g-recaptcha")[0])}))}},prepareSubmit:function e(){this.resetErrors();this.model.setValidation();this.model.set({"g-recaptcha-response":this.$(".g-recaptcha-response").val()||""})},validate:function e(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}var r=d.prototype.validate.apply(this,i);if(this.$(".g-recaptcha-response").length&&!this.$(".g-recaptcha-response").val()){r=false;this.fieldIncorrect(this.$(".g-recaptcha-response").parent(),{errorMessage:"Please check the ReCaptcha check box."})}return r},submit:function e(){var t=this;this.model.save({},{wait:true,success:function e(i,a){return t.onSubmitSuccess(i,a)}})},resetErrors:function e(){this.fieldReset(this.$("._errorHolder"));for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}d.prototype.resetErrors.apply(this,i)},handleModelError:function e(t,i){var a=this;if(!i.errors){return}this.model.set("g-recaptcha-response","");n.each(i.errors,(function(e){if(n.contains(Object.values(u),+e.error_code)){p.injectScript().then((function(){return p.render(a.$(".g-recaptcha")[0])}))}var t=e.error_data,i=t[0];if(a.model.errorsMap[e.error_code]){i=a.model.errorsMap[e.error_code]}var r=a.$("input[name="+i+"]");if(r.length){r=r.parent()}else{r=a.$("._errors-holder")}a.fieldIncorrect(r,{errorMessage:e.error_message})}))},onSubmitSuccess:function e(t,i){if(!i.errors){this.onSendCallback()}else{p.reset(this.$(".g-recaptcha-response"))}},onRegularFieldFocusOut:function e(t){if(t.currentTarget.value.length){this.fieldCorrect(this.$(t.currentTarget).parent())}this.onUpdateField(t)},isCaptchaNeeded:function e(){return this.app.store.get("UserBanInfo")&&this.app.store.get("UserBanInfo").get("recoverPassword")},onSendCallback:n.noop})},684:function(e,t,i){},685:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<form class="modal__form password-recovery"><p class="modal__text password-recovery__text">'+this.tr("Please enter your e-mail below and we will send you a letter with a link to reset your password")+'.</p><label class="modal__form-field modal__form-field_last field-box field-box_light field-box_rounded field-box_large input-box input-box-xl"><input class="input input-xl _recovery-email _field empty" type="email" name="email"autocomplete="off" maxlength="100" value="'+i(t.attrs.email)+'" autofocus /><span class="field-box__title">'+this.tr("E-mail")+' *</span></label><div class="errors-holder _errors-holder"></div><div class="password-recovery__captcha g-recaptcha _captcha';if(t.captcha.show){a+=" password-recovery__captcha_visible"}a+='" data-sitekey="'+i(t.captcha.siteKey)+'"></div></form>';return a}},686:function(e,t,i){"use strict";var a=i(114);var r=i(2);var s=r.extend({url:"PasswordRecovery",defaults:a.PasswordRecovery.defaults,errorsMap:a.PasswordRecovery.errorsMap,validation:a.PasswordRecovery.validation,parse:function e(t){return t.errors?{}:t},serialize:function e(){return{username:this.get("username")||"",email:this.get("email")||""}},setValidation:function e(t){if(t===void 0){t=this.toJSON()}if(!t.email&&t.username){this.defaults=a.PasswordRecoveryUsername.defaults;this.errorsMap=a.PasswordRecoveryUsername.errorsMap;this.validation=a.PasswordRecoveryUsername.validation;delete t.email}else if(t.email&&!t.username){this.defaults=a.PasswordRecoveryEmail.defaults;this.errorsMap=a.PasswordRecoveryEmail.errorsMap;this.validation=a.PasswordRecoveryEmail.validation;delete t.username}else if(!t.email&&!t.username){this.defaults=a.PasswordRecovery.defaults;this.errorsMap=a.PasswordRecovery.errorsMap;this.validation=a.PasswordRecovery.validation}return t}});e.exports=s},687:function(e,t,i){"use strict";var a=i(31);var r=i(4);var s=null;var n=function e(t){if(!s){s=new Promise((function(e){var i={en:"en_US",ru:"ru",de:"de",fr:"fr",sp:"es",it:"it",pt:"pt_PT",pl:"pl",nl:"nl"};var s=i[t]?i[t]:"en_US";window.___gcfg={lang:s};if(typeof gapi!=="undefined"){return e()}a({async:true,src:"https://apis.google.com/js/platform.js?onload=googleAsyncInit"});window.googleAsyncInit=function(){gapi.load("auth2",(function(){window.gauth2=gapi.auth2.init({client_id:r.social.google.clientId,scope:"profile email"})}));return e()};return null}))}return s.then((function(){s=null}))};e.exports={injectGoogleScript:n}},688:function(e,t,i){"use strict";var a=i(31);var r=i(4);var s=null;var n=function e(t){if(!s){s=new Promise((function(e){if(typeof FB!=="undefined"){return e()}var i={en:"en_US",ru:"ru_RU",de:"de_DE",fr:"fr_FR",sp:"es_LA",it:"it_IT",pt:"pt_PT",pl:"pl_PL",nl:"nl_NL"};var s=i[t]?i[t]:"en_US";a({id:"facebook-jssdk",async:true,src:"//connect.facebook.net/"+s+"/sdk.js"});window.fbAsyncInit=function(){FB.init({appId:r.social.facebook.appId,version:r.social.facebook.version,cookie:true,logging:!r.isProduction,status:true});return e()};return null}))}return s.then((function(){s=null}))};e.exports={injectFacebookScript:n}},689:function(e,t,i){"use strict";i(660);i(690);i(691);var a=i(0);var r=i(17);var s=i(548);var n=i(692);var o=i(693);var l=i(694);var c=i(695);var u=i(696);var d=i(697);var h=i(746);var p=i(546);var f=i(547);var v=i(698);var m=i(672);var b=i(674);var g=i(699);var _=i(747);var w=i(634);var y=i(552);var k=i(116),x=k.decimalRoundStrategy;e.exports=p.extend({name:"UserBar",el:false,showPlansMenu:true,showBalance:true,reverseButtons:true,whiteUserBox:false,isUserBoxHoverable:false,shouldShowAuthModal:true,showSignUpButton:true,showSignInButton:true,showAffiliateSignInButton:false,events:{"click ._user-box":"toggleUserMenuToolTip","click ._sign-up":"onSignUpClick","click ._btn-sign-in":"onSingInClick","click ._products":"toggleProductsToolTip","click ._trial-promotion-link":"handleTrialPromotionLinkClick","click ._refill-btn":"handleRefillButtonClick","click ._upgrade-link":"handleUpgradeLinkClick"},additionalClassNames:"",singUpButtonClassNames:"button-pill",singInButtonClassNames:"button-pill",initialize:function e(){if(!this.app.user.isEnterprise()&&this.app.store.get("CartIndicator")){this.setView("._shopping-cart-indicator",new h({app:this.app}))}this.trialPlanPromotionModel=this.app.store.get("TrialPlanPromotion");this.listenTo(this.app.user,"change:id",this.render);this.listenTo(this.app.user.avatar,"change",this.render);this.hasTemplate={}.hasOwnProperty.call(this,"template");this.hasTemplateAmp={}.hasOwnProperty.call(this,"amp")},prepareRender:function e(){if(this.app.user.isLoggedIn()){if(this.app.user.isEnterprise()){this.setView("._team-balance",new _({app:this.app,teamBalance:this.app.user.get("enterprise").balance}))}else{if(this.isUserBalanceVisible()&&!this.app.user.hasPlans()){this.setView("._balance",new b({balance:this.app.user.get("balance")}))}this.setView("._refilled-balance",new g({app:this.app}))}}if(!this.hasTemplate){this.template=this.app.user.isLoggedIn()?n:l}if(!this.hasTemplateAmp){this.amp=this.app.user.isLoggedIn()?o:c}},serialize:function e(){return{user:this.app.user.serialize(),avatars:this.app.user.avatar.toJSON(),hasPlans:this.app.user.hasPlans(),canViewBalance:this.isBalanceVisible(),hasTeamBalance:this.app.user.hasTeamBalance(),signupLink:this.makeLink({routeName:"Login",to:"signup"}),signupAffiliateLink:this.app.makeUrl("affiliateProgram"),loginLink:this.makeLink({routeName:"Signup",to:"login"}),showSignUpButton:this.showSignUpButton,showSignInButton:this.showSignInButton,showAffiliateSignInButton:this.showAffiliateSignInButton,showPlansMenu:this.showPlansMenu&&!this.app.user.isEnterprise(),reverseButtons:this.reverseButtons,showSpecial:this.showSpecial,whiteUserBox:this.whiteUserBox,isUserBoxHoverable:this.isUserBoxHoverable,singUpButtonClassNames:this.singUpButtonClassNames,singInButtonClassNames:this.singInButtonClassNames,additionalClassNames:this.additionalClassNames,plansPromoText:this.getPlansPromoText(),plansMenuTemplate:this.getPlansMenuTemplate(),trialPlanData:this.getTrialPlanData(),refillButtonData:this.getRefillButtonData(),upgradeLinkData:this.getUpgradeLinkData()}},clientAfterRender:function e(){var t=this;if(this.app.user.isLoggedIn()){this.clientAfterRenderForAuth()}y(this.$el,r.$);this.$el.find("._avatar-image").on("error",(function(e){e.currentTarget.src=t.app.user.avatar.constructor.prototype.defaults.default}))},getPlansPromoText:function e(){var t=this.app.store.get("PlansMenuBanner");if(!t){return""}var i={ChristmasOndemand:70,ChristmasOndemandLight:70,ChristmasSubscriptionMonthToYearUpgrade:50,ChristmasSubscriptionYear:30};var a=i[t.get("name")];return a?this.tr("Save %s%%",a):""},shouldShowMarketingOffersTemplate:function e(){if(this.app.store.get("FlexDownloadsOffers")){return true}var t=this.app.store.get("UserPairOfOffers");if(t&&t.hasPair()){return true}return false},getPlansMenuTemplate:function e(){if(this.trialPlanPromotionModel.get("active")){return"TrialPlanPromotion"}if(this.shouldShowMarketingOffersTemplate()){return"MarketingOffers"}if(this.app.user.hasPlans()){if(this.app.features.isFeatureOnValue("Show plan upgradable buttons")){return null}return"PlansTemplate"}if(+this.app.user.get("balance")<=0){return"NoPlansTemplate"}return"BalanceTemplate"},getUpgradeLinkData:function e(){var t=this.app.store.get("UserPairOfOffers");if(!t||!t.hasPair()){return null}return{url:t.getYearlyOffer().makeUrl(),text:this.app.tr("SAVE %s%%",t.getSavingInPercentage())}},getRefillButtonData:function e(){var t=this.app.store.get("FlexDownloadsOffers");if(!t||!t.length){return null}var i=t.first();var a=this.app.currency.get("list").getByCode(i.get("currency"));return{text:this.app.tr("GET %s PHOTO FOR %s",[1,i.getFormattedPricePerItem(x,a)])}},getTrialPlanData:function e(){var t=this.trialPlanPromotionModel.get("offer");if(!t.hasTrial()){return{}}return{period:t.get("trial").get("period"),url:t.makeTrialPlanUrl()}},makeLink:function e(t){var i=t.routeName,a=t.to;return this.app.router.routeName===i?this.app.makeUrl(a,{query:this.app.queryParams}):this.app.makeUrl(a,{backURL:true})},isBalanceVisible:function e(){var t=this.app.user.get("enterprise");return this.showBalance&&t&&(!t.hideBalance||this.app.user.isEnterpriseAdmin()||this.app.user.hasPermissionsTo("enterprise_group:"+this.app.user.get("enterprise").groupId,"billing"))},userMenuTemplate:function e(){var t=[{condition:function e(t){return t.user.isEnterprise()},template:d}];var i;a.each(t,(function(e){if(e.condition(this.app)){i=e.template}}),this);i=i||u;for(var r=arguments.length,s=new Array(r),n=0;n<r;n++){s[n]=arguments[n]}return i.apply(this,s)},clientAfterRenderForAuth:function e(){this.setNotExistView("userMenuTooltip",f,{params:s.UserMenu,content:new v({template:this.userMenuTemplate,app:this.app,menuLinks:this.getMenuLinks()})});this.setNotExistView("productsTooltip",f,{params:s.Products,classes:{"tooltip_extra-shadow":true,"tooltip_not-border":true,tooltip_rounding:true},content:new m({app:this.app,plans:this.app.user,linksEnabled:true,showRebillDiscount:true,showBalance:this.isUserBalanceVisible()&&this.app.user.hasPlans()})})},getMenuLinks:function e(){return{sellerPrice:this.app.makeUrl("seller-price",{backURL:true}),subscribe:this.app.makeUrl("subscribe",{backURL:true}),purchased:this.app.makeUrl("purchased",{backURL:true}),invoices:this.app.makeUrl("invoices",{backURL:true}),favorites:this.app.makeUrl("favorites",{backURL:true}),profile:this.app.makeUrl("profile",{backURL:true}),referral:this.app.makeUrl("referral",{backURL:true}),enterpriseDownloads:this.app.makeUrl("enterprise/downloads",{backURL:true}),logout:this.app.makeUrl("login/logout")}},isUserBalanceVisible:function e(){return this.app.user.get("balance")>0||this.app.user.get("examinationStatus")==="approved"},handleTrialPromotionLinkClick:function e(){this.app.observer.broadcast("Track:UE:HeaderPlansButton:Click",{label:"Trial"})},handleRefillButtonClick:function e(){this.app.store.get("ModalsManager").show("RefillMembershipModal",{app:this.app,type:"buyMore",offers:this.app.store.get("FlexDownloadsOffers")}).catch((function(){}))},handleUpgradeLinkClick:function e(){this.app.observer.broadcast("Track:UE:UpgradeButton:Click",{offer:this.app.store.get("UserPairOfOffers").getYearlyOffer()})},onSingInClick:function e(t){if(!this.shouldShowAuthModal){return}t.stopPropagation();t.preventDefault();new w({app:this.app,single:true}).show()},toggleUserMenuToolTip:function e(t){t.preventDefault();this.getView("userMenuTooltip").toggle(t)},toggleProductsToolTip:function e(t){t.preventDefault();this.getView("productsTooltip").toggle(t)},onSignUpClick:function e(t){var i=this;if(!this.shouldShowAuthModal){return}t.preventDefault();t.stopPropagation();this.app.store.get("ModalsManager").show("SignupModal",{app:this.app}).then((function(){return i.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:i.name})})).catch((function(){}))}})},690:function(e,t,i){},691:function(e,t,i){},692:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="auth-box '+i(t.additionalClassNames)+'">';if(t.canViewBalance){a+='<span class="user-bar-item-wrap _team-balance"></span>'}else if(t.showPlansMenu){if(t.user.balanceRefilled){a+='<span class="user-bar-item-wrap _refilled-balance refilled-balance"></span>'}if(t.plansMenuTemplate==="PlansTemplate"){a+='<a class="user-bar-item user-bar-item_hover plans-box _products" href="'+this.app.makeUrl("subscribe")+'"><i class="user-bar-item__icon icon icon-three-points"><i class="icon icon-point"></i><i class="icon icon-point"></i><i class="icon icon-point"></i></i><span class="user-bar-item__box">';if(t.plansPromoText){a+='<span class="user-bar-item__text promo-bar">'+t.plansPromoText+"</span>"}a+='<span class="user-bar-item__text">'+this.tr("Active<br />Plans")+'</span></span><i class="user-bar-item__arrow arrow arrow-bottom"></i></a>'}else if(t.plansMenuTemplate==="MarketingOffers"){a+='<div class="marketing-offers">';if(t.upgradeLinkData){a+='<a href="'+i(t.upgradeLinkData.url)+'" class="marketing-offers__item marketing-offers__item_link _upgrade-link">'+t.upgradeLinkData.text+"</a>"}if(t.refillButtonData){a+='<button type="button" class="marketing-offers__item _refill-btn">'+t.refillButtonData.text+"</button>"}a+="</div>"}else if(t.plansMenuTemplate==="NoPlansTemplate"){a+='<a class="user-bar-item user-bar-item_hover no-plans-box" href="'+this.app.makeUrl("subscribe")+'"><span class="user-bar-item__box"><span class="user-bar-item__text">'+this.tr("You don't have any plans.")+'</span><span class="user-bar-item__text">'+this.tr("Choose now!")+"</span>";if(t.plansPromoText){a+='<span class="user-bar-item__text promo-bar">'+t.plansPromoText+"</span>"}a+="</span></a>"}else if(t.plansMenuTemplate==="BalanceTemplate"){a+='<span class="user-bar-item-wrap _balance"></span>'}else if(t.plansMenuTemplate==="TrialPlanPromotion"){a+='<a class="user-bar-item user-bar-item_hover user-bar-item_trial-promotion _trial-promotion-link" href="'+t.trialPlanData.url+'"><strong class="user-bar-item__offer">'+this.tr("%s DAYS<br />FREE!",t.trialPlanData.period)+'</strong><strong class="user-bar-item__offer-text">'+this.tr("Try Flexible Plan")+"</strong></a>"}}a+='<span class="user-bar-item-wrap _shopping-cart-indicator"></span><div class="user-box ';if(t.whiteUserBox){a+="user-box_white "}if(t.isUserBoxHoverable){a+="user-box_hoverable "}a+='_user-box"><span class="user-box__avatar avatar-box avatar-box-m"><img class="avatar avatar-m _avatar-image" src="'+t.avatars.default+'" /></span><span class="user-box__username">'+i(t.user.login)+'</span><i class="user-box__arrow arrow ';if(t.whiteUserBox){a+="arrow-white "}a+='arrow-bottom"></i></div></div>';return a}},693:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="auth-box">';if(t.canViewBalance){a+='<span class="user-bar-item-wrap _team-balance"></span>'}else if(t.showPlansMenu){if(t.user.balanceRefilled){a+='<span class="user-bar-item-wrap _refilled-balance refilled-balance"></span>'}if(+t.user.balance<=0||t.hasPlans){if(!t.hasPlans){a+='<a class="user-bar-item user-bar-item_hover no-plans-box" href="'+this.app.makeUrl("subscribe")+'"><span class="user-bar-item__box"><span class="user-bar-item__text">'+this.tr("You don't have any plans.")+'</span><span class="user-bar-item__text">'+this.tr("Choose now!")+"</span></span></a>"}else{a+='<a class="user-bar-item user-bar-item_hover plans-box _products" href="'+this.app.makeUrl("subscribe")+'"><i class="user-bar-item__icon icon icon-three-points"><i class="icon icon-point"></i><i class="icon icon-point"></i><i class="icon icon-point"></i></i><span class="user-bar-item__box"><span class="user-bar-item__text">'+this.tr("Active<br />Plans")+'</span></span><i class="user-bar-item__arrow arrow arrow-bottom"></i></a>'}}else{a+='<span class="user-bar-item-wrap _balance"></span>'}}a+='<span class="user-bar-item-wrap _shopping-cart-indicator"></span><div class="user-box ';if(t.whiteUserBox){a+="user-box_white "}if(t.isUserBoxHoverable){a+="user-box_hoverable "}a+='_user-box"><span class="user-box__avatar avatar-box avatar-box-m"><amp-img class="avatar avatar-m _avatar-image" src="'+t.avatars.default+'" width="33" height="33" /></span><span class="user-box__username">';if(t.user.username){a+=""+i(t.user.username)}else if(t.user.email){a+=""+i(t.user.email)}a+='</span><i class="user-box__arrow arrow ';if(t.whiteUserBox){a+="arrow-white "}a+='arrow-bottom"></i></div></div>';return a}},694:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="not-auth-box"><span class="header__cart-box _shopping-cart-indicator"></span>';if(t.showSignUpButton||t.showSignInButton){a+='<noindex><ul class="header__list">';if(!t.reverseButtons){if(t.showSignUpButton&&!t.showAffiliateSignInButton){a+='<li class="header__list-item"><a class="not-auth-box__btn not-auth-box__btn_sign-up button button-xl button-blue '+i(t.singUpButtonClassNames)+' _sign-up" href="'+t.signupLink+'" rel="nofollow">'+this.tr("Register an Account")+"</a></li>"}if(t.showAffiliateSignInButton){a+='<li class="header__list-item"><a class="not-auth-box__btn button button-xl button-pill button-bold button-blue '+i(t.singInButtonClassNames)+'" href="'+t.signupAffiliateLink+'">'+this.tr("Sign in with affiliate account")+"</a></li>"}}if(t.showSignInButton){a+='<li class="header__list-item"><a class="not-auth-box__btn button button-xl button-white '+i(t.singInButtonClassNames)+' _btn-sign-in" href="'+t.loginLink+'" rel="nofollow">'+this.tr("Sign In")+"</a></li>"}if(t.reverseButtons){if(t.showSignUpButton){a+='<li class="header__list-item"><a class="not-auth-box__btn not-auth-box__btn_sign-up button button-xl button-blue '+i(t.singUpButtonClassNames)+' _sign-up" href="'+t.signupLink+'" rel="nofollow">'+this.tr("Register an Account")+"</a></li>"}}a+="</ul></noindex>"}a+="</div>";return a}},695:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="not-auth-box"><span class="header__cart-box _shopping-cart-indicator"></span>';if(t.showSignUpButton||t.showSignInButton){a+='<ul class="header__list header__list_horizontal">';if(!t.reverseButtons){if(t.showSignUpButton&&!t.showAffiliateSignInButton){a+='<li class="header__list-item"><a class="not-auth-box__btn button button-xl button-blue '+i(t.singUpButtonClassNames)+' _sign-up" href="'+t.signupLink+'" rel="nofollow">'+this.tr("Register an Account")+"</a></li>"}if(t.showAffiliateSignInButton){a+='<li class="header__list-item"><a class="not-auth-box__btn button button-xl button-pill button-bold button-blue '+i(t.singInButtonClassNames)+'" href="'+t.signupAffiliateLink+'">'+this.tr("Sign in with affiliate account")+"</a></li>"}}if(t.showSignInButton){a+='<li class="header__list-item"><a class="not-auth-box__btn button button-xl button-white '+i(t.singInButtonClassNames)+' _btn-sign-in" href="'+t.loginLink+'" rel="nofollow">'+this.tr("Sign In")+"</a></li>"}if(t.reverseButtons){if(t.showSignUpButton){a+='<li class="header__list-item"><a class="not-auth-box__btn button button-xl button-blue '+i(t.singUpButtonClassNames)+' _sign-up" href="'+t.signupLink+'" rel="nofollow">'+this.tr("Register an Account")+"</a></li>"}}a+="</ul>"}a+="</div>";return a}},696:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="user-menu"><a class="user-menu__header" href="'+t.menuLinks.profile+'"><span class="user-menu__avatar avatar-box avatar-box_grey avatar-box-l">';if(t.avatarExists){a+='<img class="avatar avatar-l" src="'+t.avatars.big+'">'}a+='<i class="avatar-box__letter" data-user-placeholder="'+i(t.login[0])+'"></i></span><span class="user-menu__title">'+i(t.login)+'</span></a><menu class="user-menu__content">';if(t.accountSwitcher){a+='<li class="user-menu__item user-menu__item_separated"><a class="user-menu__link _user-switch-account"><i class="user-menu__icon icon icon-user-menu-switch"></i>'+this.tr("Switch to Enterprise")+"</a></li>"}if(t.isSeller){a+='<li class="user-menu__item"><a class="user-menu__link" href="'+t.menuLinks.sellerPrice+'"><i class="user-menu__icon icon icon-user-menu-invoices"></i>'+this.tr("Contribute Program")+"</a></li>"}a+='<li class="user-menu__item"><a class="user-menu__link" href="'+t.menuLinks.subscribe+'"><i class="user-menu__icon icon icon-user-menu-plans"></i>'+this.tr("Plans & Prices")+'</a></li><li class="user-menu__item"><a class="user-menu__link" href="'+t.menuLinks.purchased+'"><i class="user-menu__icon icon icon-user-menu-downloads"></i>'+this.tr("Downloaded Files")+'</a></li><li class="user-menu__item"><a class="user-menu__link" href="'+t.menuLinks.invoices+'"><i class="user-menu__icon icon icon-user-menu-invoices"></i>'+this.tr("Invoices")+'</a></li><li class="user-menu__item"><a class="user-menu__link" href="'+t.menuLinks.favorites+'"><i class="user-menu__icon icon icon-user-menu-favorites"></i>'+this.tr("Favorites")+'</a></li><li class="user-menu__item"><a class="user-menu__link" href="'+t.menuLinks.profile+'"><i class="user-menu__icon icon icon-user-menu-profile"></i>'+this.tr("My Profile")+'</a></li><li class="user-menu__item"><a class="user-menu__link" href="'+t.menuLinks.referral+'"><i class="user-menu__icon icon icon-user-menu-referral"></i>'+this.tr("Referral Program")+'</a></li></menu><a class="user-menu__logout _user-logout" href="'+t.menuLinks.logout+'">'+this.tr("Log Out")+"</a></div>";return a}},697:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="user-menu"><a class="user-menu__header" href="'+t.menuLinks.profile+'"><span class="user-menu__avatar avatar-box avatar-box_grey avatar-box-l">';if(t.avatarExists){a+='<img class="avatar avatar-l" src="'+t.avatars.big+'">'}a+='<i class="avatar-box__letter" data-user-placeholder="'+i(t.login[0])+'"></i></span><span class="user-menu__title">'+i(t.login)+'</span></a><menu class="user-menu__content">';if(t.accountSwitcher){a+='<li class="user-menu__item user-menu__item_separated"><a class="user-menu__link _user-switch-account"><i class="user-menu__icon icon icon-user-menu-switch"></i>'+this.tr("Switch to Regular Site")+"</a></li>"}a+='<li class="user-menu__item"><a class="user-menu__link" href="'+t.menuLinks.enterpriseDownloads+'"><i class="user-menu__icon icon icon-user-menu-downloads"></i>'+this.tr("Downloaded Files")+'</a></li><li class="user-menu__item"><a class="user-menu__link" href="'+t.menuLinks.favorites+'"><i class="user-menu__icon icon icon-user-menu-favorites"></i>'+this.tr("Favorites")+'</a></li><li class="user-menu__item"><a class="user-menu__link" href="'+t.menuLinks.profile+'"><i class="user-menu__icon icon icon-user-menu-profile"></i>'+this.tr("My Profile")+'</a></li></menu><a class="user-menu__logout _user-logout" href="'+t.menuLinks.logout+'">'+this.tr("Log Out")+"</a></div>";return a}},698:function(e,t,i){"use strict";var a=i(546);var r=i(744);e.exports=a.extend({el:false,events:{"click ._user-switch-account":"onUserSwitchAccount","click ._user-logout":"onUserLogoutClick"},serialize:function e(){return{accountSwitcher:this.app.user.get("accountSwitcher"),login:this.app.user.getLogin(),isEnterprise:this.app.user.isEnterprise(),isSeller:this.app.user.isSeller(),avatars:this.app.user.avatar.toJSON(),avatarExists:this.app.user.avatar.avatarExists,menuLinks:this.menuLinks||{}}},onUserLogoutClick:function e(t){t.preventDefault();this.app.user.logout()},onUserSwitchAccount:function e(){var t=this;r.sendRequest({url:"SwitchAccount",success:function e(){t.app.router.redirect(t.app.makeUrl("home"))}})}})},699:function(e,t,i){"use strict";var a=i(700);var r=i(546);e.exports=r.extend({name:"BalanceRefilled",el:false,template:a,balanceRefilled:0,prepareRender:function e(){return this.isUserRefilledBalanceVisible()},isUserRefilledBalanceVisible:function e(){return this.app.user.get("balanceRefilled")>0},serialize:function e(){return{balanceRefilled:this.app.user.get("balanceRefilled").toFixed(2)}}})},700:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<span class="user-bar-item user-bar-item-balance balance-box"><span class="user-bar-item__box"><i class="user-bar-item__icon icon icon-user-balance"></i><i class="user-bar-item__icon user-bar-item__icon_hover icon icon-user-balance-hover"></i><span class="user-bar-item__text">$'+i(t.balanceRefilled)+"</span></span></span>";return a}},703:function(e,t,i){"use strict";i(704);var a=i(0);var r=i(546);var s=i(24),n=s.classNames;var o=10;e.exports=r.extend({name:"SearchHints",el:false,type:"search",query:"",customWidth:false,customCssClass:"",showSubstr:true,animationSpeed:{show:100,hide:100},delay:{show:200,hide:250},requestId:0,valuesSchema:{search:"value",seller:"phrase",gplace:"name"},shift:{top:0,left:0,width:0},events:{"mousedown ._hint":"onHintAction","mousemove ._hint":"onHintAction"},globals:{"resize window":"onWindowResize"},initialize:function e(){this.listenTo(this.collection,"reset",this.onCollectionReset);this.listenTo(this.app.observer,{"Modal:HideAll":this.hide,"Responsive:CloseHints":this.hide})},serialize:function e(){var t=this;var i=this.query.replace(/\s+/g," ");var a=this.collection.toJSON();if(this.showSubstr){var r=i.length-(i.charAt(i.length-1)===" "?1:0);a.map((function(e){e.cutValue=e[t.valuesSchema[t.type]].substr(r);return e}))}return{items:a,query:i,classes:n({"search-hints":true,"search-hints_static":this.isStatic,hidden:!a.length})}},clientAfterRender:function e(){this.place();if(this.collection.length&&!this.opened){this.$el.appendTo(Backbone.$("._portal")).hide();this.$el.fadeIn(this.animationSpeed.show)}this.$el.addClass(this.customCssClass);this.opened=true},place:function e(){if(this.anchor){var t=this.calculateStyles(this.anchor);if(t.width&&this.el.firstChild){var i=this.el;if(i){i.style.top=t.top+"px";i.style.left=t.left+"px";i.style.width=t.width+"px"}}}},load:function e(t){this.query=t;if(!t.length){this.reset()}else{this.requestId+=1;this.collection.getQueryParams={query:t,lang:"en",requestId:this.requestId};this.collection.fetch({reset:true,requestId:this.requestId})}},onCollectionReset:function e(){this.opened=false;for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}this[this.collection.length?"show":"hide"](i)},onWindowResize:a.throttle((function(){this.place()}),o),show:function e(t){var i=t[1];if(i.requestId&&i.requestId!==this.requestId){return}this.render()},hide:function e(){var t=this;this.$el.fadeOut(this.animationSpeed.hide,(function(){t.$el.remove()}))},reset:function e(){this.requestId=0;this.collection.reset([])},calculateStyles:function e(t){var i=t.getBoundingClientRect().top+Backbone.$(t).outerHeight()+this.shift.top+(Backbone.$(window).scrollTop()-parseInt(window.getComputedStyle(t).borderBottomWidth,10));return{top:i-(this.isFixed?window.scrollY:0),left:t.getBoundingClientRect().left+this.shift.left,width:this.customWidth?this.customWidth:t.clientWidth+this.shift.width}},moveSelection:function e(t){var i;if(!this.collection.length){return}switch(t){case 1:i=this.getNextSelectedIndex();break;case-1:i=this.getPreviousSelectedIndex();break;default:break}this.setSelectionClasses(i);this.setSelected(i)},setAnchor:function e(t){this.anchor=t},setSelected:function e(t){var i=this.getSelectedItem();if(i){i.set({selected:false})}var a=this.collection.at(t);if(a){a.set({selected:true})}this.onHintSelectCallback(this.getSelectedItemValue())},setSelectionClasses:function e(t){this.$(".hint_active").removeClass("hint_active");this.$("._hint").eq(t).addClass("hint_active")},onHintAction:function e(t){var i=this.collection.indexOf(this.getItemByValue(Backbone.$(t.currentTarget).data("value")));this.setSelectionClasses(i);if(t.type==="mousedown"){this.setSelected(i);this.onHintMouseDownCallback(this.getSelectedItemValue())}},getSelectedItemValue:function e(){var t=this.getSelectedItem();if(t){return t.get(this.valuesSchema[this.type])}return""},getItemByValue:function e(t){var i={};i[this.valuesSchema[this.type]]=t;return this.collection.findWhere(i)},getNextSelectedIndex:function e(){var t=this.getSelectedItemIndex();t=t+1||0;if(t>=this.collection.length){t=0}return t},getPreviousSelectedIndex:function e(){var t=this.getSelectedItemIndex();t-=1;if(t<0){t=this.collection.length-1}return t},getSelectedItem:function e(){return this.collection.findWhere({selected:true})},getSelectedItemIndex:function e(){return this.collection.indexOf(this.getSelectedItem())},onHintSelectCallback:function e(){},onHintMouseDownCallback:function e(){}})},704:function(e,t,i){},705:function(e,t,i){"use strict";function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(0);var o=i(76);var l=i(50),c=l.getCategory;var u=i(118),d=u.getFilter;var h=i(23);var p=i(79);var f=i(2);var v=i(706);var m=i(24);var b=i(11);var g=function e(t){var i=t.category,a=t.query;return i&&!a};var _=function e(t){var i=t.seller;return i&&i.length>0};var w=function e(t){var i=t.sorting,a=t.folderQuery,r=t.folderId;var s=Object.keys(p).find((function(e){return p[e].folderId===r}));var n=p[s]&&p[s].shouldMutateSorting;var l=a&&a.length>0;return n&&i===o.folderSorting.trending&&l};var y=function e(t,i){var a=i.attributes;if(a.query){return o.defaults.sorting}if(g(a)){return o.categoryDefaults.sorting}if(_(a)){return o.portfolioDefaults.sorting}if(t.router.routeParams&&t.router.routeParams.sorting){return t.router.routeParams.sorting}return o.defaults.sorting};var k=function e(t,i){if(!i.sorting){return{sorting:y(t,{attributes:i})}}if(w(i)){return{sorting:o.folderSorting.popular}}return undefined};var x=function e(t){if(!t){return null}var i=Object.keys(t).reduce((function(e,i){if(["search_params","refine_search"].includes(i)){e.search_params=t[i]}return e}),{});return Object.keys(i).length?i:null};var C=f.extend({isBulkAllowed:function e(){return false},defaults:o.defaults,validation:o.validation,mutable:{query:["query"],folderQuery:["folderQuery"],seller:["seller"],type:["photo","vector","video","illustration"],related:["relatedTo","relatedItemId"],editorial:["editorial_only","editorial_exclude"],people:["mr_property_only","mr_property_exclude","mr_release_quantity","anonymous","gender","age","race"],sizes:["size_unit","min_width","min_height"],isolated:["isolated_only","isolated_exclude"],render:["render_only","render_exclude"]},serviceFields:["hash","query","offset","photo","vector","video","illustration","nudity","sorting","correction","itemPermission","rawSearchParams","metaScope","effectiveParams","slicesInfo","experiments","searchDataList","typeFilterRestriction"],filterFields:["category","seller","exclude_keywords","orientation","editorial_only","editorial_exclude","mr_release_quantity","mr_property_only","mr_property_exclude","gender","age","race","size_unit","min_width","min_height","color","dataSource","relatedTo","relatedItemId","folderId","folderName","advanced","anonymous","isolated_only","isolated_exclude","render_only","render_exclude","non_stocky","season","day_time","country"],resetValues:[{triggers:["query"],field:"sorting",values:[o.premiumSorting],defaultValue:"best_match"}],initialize:function e(t,i){if(i===void 0){i={}}this.on("change:nudity",(function(e){var t=e.changed;if(i.userSettings){i.userSettings.set("SearchQuery",{nudity:t.nudity,limit:i.userSettings.get("SearchQuery").limit})}}));this.searchRestrictions=new v(this.app.user.get("searchVisibility"),{app:this.app});this.updateSearchQueryDefaults();this.listenTo(this.searchRestrictions,"change",this.updateSearchQueryDefaults);this.on("change",this.onChange);this.on(m.prefixedArrayString("change:",this.mutable.folderQuery),this.mutateFolderSorting);this.on(m.prefixedArrayString("change:",this.mutable.query),this.mutateQuery);this.on(m.prefixedArrayString("change:",this.mutable.type),this.mutateType);this.on(m.prefixedArrayString("change:",this.mutable.related),this.mutateRelated);this.on(m.prefixedArrayString("change:",this.mutable.editorial),this.mutateEditorial);this.on(m.prefixedArrayString("change:",this.mutable.people),this.mutatePeople);this.on(m.prefixedArrayString("change:",this.mutable.sizes),this.mutateSizes);this.on(m.prefixedArrayString("change:",this.mutable.isolated),this.mutateIsolated);this.on(m.prefixedArrayString("change:",this.mutable.render),this.mutateRender);this.on("change:dataSource",this.mutateCorrection)},updateSearchQueryDefaults:function e(){this.secureSet(this.searchRestrictions.filterSearchAttributes(this.toJSON()))},getMetaScope:function e(){var t=this.get("metaScope");if(!t&&this.app.queryParams&&{}.hasOwnProperty.call(this.app.queryParams,"meta_scope")){t=this.app.queryParams.meta_scope}return t},getRestrictions:function e(){return this.searchRestrictions},getQueryParams:function e(){if(this.get("relatedTo")){return n.pick(this.attributes,"relatedTo","relatedItemId","offset","sorting")}return n.extend(n.clone(this.attributes),{metaScope:this.getMetaScope(),requestBack:true})},onChange:function e(){var t=this;var i=n.omit(this.changed,["hash","offset"]);if(!n.isEmpty(i)){var a={};if(!this.changed.offset){a.offset=0}if(!n.isEmpty(i)){a.hash=undefined}if(this.resetValues.length){n.each(this.resetValues,(function(e){if(n.intersection(n.keys(i),e.triggers).length){if(e.values.indexOf(t.get(e.field))!==-1){a[e.field]=e.defaultValue}}}))}var r=this.app.userSettings.get("searchSession");if(r&&this.app.router.routeName==="Search"){Object.assign(a,r.params)}this.set(a,{silent:true})}},mutateCorrection:function e(t){var i=o.getDataSourceSets(this.app);if(i&&i.correction!=null){var a={};o.parseDataHandlers.correction(i.correction,a);t.attributes.correction=a.correction}},mutateFolderSorting:function e(t){if(t===void 0){t=this}if(w(t.attributes)){t.attributes.sorting=o.folderSorting.popular}},mutateQuery:function e(t){t.attributes.relatedTo=null;t.attributes.relatedItemId=0;t.attributes.offset=t.changed.offset||t.defaults.offset},mutateType:function e(t){this.mutateQuery(t);var i=function e(i){return i.forEach((function(e){t.attributes[e]=t.defaults[e]}))};var a=["size_unit","min_width","min_height","orientation","advanced","non_stocky","season","day_time","country"];var r=["resolution","render_only"];if(!this.app.features.isFeatureOnValue("New video filters")){a.push("render_only","render_exclude")}if(t.changed.video){i(a)}if(t.changed.photo||t.changed.vector){i(r)}},mutateRelated:function e(t){n.extend(t.attributes,n.omit(t.defaults,["relatedTo","relatedItemId","sorting","offset"]))},mutateIsolated:function e(t){if(t.changed.isolated_only){t.attributes.isolated_exclude=false}if(t.changed.isolated_exclude){t.attributes.isolated_only=false}},mutateRender:function e(t){if(t.changed.render_only){t.attributes.render_exclude=false}if(t.changed.render_exclude){t.attributes.render_only=false}},mutateEditorial:function e(t){if(t.changed.editorial_only){t.attributes.editorial_exclude=false}if(t.changed.editorial_exclude){t.attributes.editorial_only=false}},mutatePeople:function e(t){if(t.changed.mr_release_quantity){this.calculateMutation("mr_release_quantity")}if(t.changed.mr_property_only){this.calculateMutation("mr_property_only")}if(t.changed.mr_property_exclude){this.calculateMutation("mr_property_exclude")}if(t.changed.anonymous){this.calculateMutation("anonymous")}if(t.changed.gender){this.calculateMutation("gender")}if(t.changed.age){this.calculateMutation("age")}if(t.changed.race){this.calculateMutation("race")}},calculateMutation:function e(t){if(this.attributes.video&&["mr_release_quantity","gender","age","race"].includes(t)){this.attributes.mr_property_only=true;this.attributes.mr_property_exclude=false;this.attributes.anonymous=false;return}switch(t){case"mr_property_only":this.attributes.mr_property_exclude=false;this.attributes.anonymous=false;break;case"mr_property_exclude":this.attributes.mr_property_only=false;this.attributes.anonymous=false;this.attributes.mr_release_quantity=this.defaults.mr_release_quantity;this.attributes.gender=this.defaults.gender;this.attributes.age=this.defaults.age;this.attributes.race=this.defaults.race;break;case"anonymous":this.attributes.mr_property_exclude=false;this.attributes.mr_property_only=false;this.attributes.mr_release_quantity=this.defaults.mr_release_quantity;this.attributes.gender=this.defaults.gender;this.attributes.age=this.defaults.age;this.attributes.race=this.defaults.race;break;default:break}},mutateSizes:function e(t){if(t.changed.size_unit&&!t.changed.min_width&&!t.changed.min_height){if(t.attributes.min_width!==0){t.attributes.min_width=this.recalculateSize(t,"min_width")}if(t.attributes.min_height!==0){t.attributes.min_height=this.recalculateSize(t,"min_height")}}},clearSearchFiltration:function e(){var t=["dataSource","query","illustration","sorting","photo","vector","video","nudity"];var i=Object.keys(this.defaults).filter((function(e){return!t.includes(e)}));this.resetToDefaults(i)},clearExtendedSearchFiltration:function e(){this.resetToDefaults(n.without(n.keys(this.defaults),"dataSource","query","sorting"))},recalculateSize:function e(t,i){var a=t.previous("size_unit");var r=t.attributes[i]/n.findWhere(h.rates,{key:a}).rate;return n.findWhere(h.rates,{key:t.attributes.size_unit}).rate*r},getPositionFromSize:function e(t,i){return this.get(t)/n.findWhere(h.rates,{key:i||this.get("size_unit")}).rate},getSizeFromPosition:function e(t,i){return n.findWhere(h.rates,{key:i||this.get("size_unit")}).rate*t},parse:function e(t){var i={};n.each(o.parseDataHandlers,(function(e,a){if(n.has(t,a)){e(t[a],i)}}));return i},isPortfolio:function e(){return _(this.attributes)},isCategory:function e(){return g(this.attributes)},isNewResults:function e(){return this.get("sorting")==="newest"&&!this.get("query")},isFiltered:function e(){return Object.keys(n.omit(this.getNonDefaults(),this.serviceFields.concat(["relatedTo","relatedItemId"]))).length>0},toQuery:function e(t){if(t===void 0){t=this.attributes}var i=[];n.each(t,(function(e,t){if(typeof e!=="undefined"&&e!==""){i.push(t+"="+b.encodeURIComponent(e))}}));return i.join("&")},toTracking:function e(t){switch(t){case"sorting":{var i=d({name:"sortings",id:this.get(t)},{app:this.app});return i&&i.label||this.get(t)}case"type":{var a="search";if(this.get("photo")&&!this.get("vector")&&!this.get("video")){a="stock-photos"}else if(!this.get("photo")&&this.get("vector")&&!this.get("video")){a="vector-images"}else if(!this.get("photo")&&!this.get("vector")&&this.get("video")){a="stock-footage"}return a}default:{return""}}},toFlume:function e(){return n.pick(this.attributes,"effectiveParams","slicesInfo","experiments","searchDataList")},changedToTracking:function e(t,i){var a=this;if(t===void 0){t=true}if(i===void 0){i=false}var r={category:{name:"Category",value:function e(t){if(t===0){return a.app.tr("All Categories")}var i=c({id:t},{app:a.app});return i&&i.name}},color:{name:"Colour",value:function e(t){return t?"Yes":"No"}},editorial_exclude:{name:"Exclude Editorial",value:function e(t){return t?"On":"Off"}},editorial_only:{name:"Only Editorial",value:function e(t){return t?"On":"Off"}},exclude_keywords:{name:"Exclude Keywords"},orientation:{name:"Orientation",value:function e(t){return{all:"All",horizontal:"Horisontal",vertical:"Vertical",square:"Sqare",panorama:"Panoramic"}[t]}},resolution:{name:"Resolution",value:function e(t){return{all:"All",1:"720p",2:"1080p",3:"4K"}[t]}},seller:{name:"Contributor"},mr_release_quantity:{name:"NumberPeople"},mr_property_exclude:{name:"PeopleExclude"},mr_property_only:{name:"PeopleOnly"},gender:{name:"Gender",value:function e(t){return{female:"Female",male:"Male",both:"Male&Female"}[t]}},age:{name:"Age",value:function e(t){return{baby:"Infant",child:"Child",teen:"Teenager"}[t]||t}},race:{name:"Ethnicity",value:function e(t){return t}},size_unit:{name:"SizeUnit",value:function e(t){return t}},min_width:{name:"MinWidth",value:function e(t){return t}},min_height:{name:"MinHeight",value:function e(t){return t}},advanced:{name:"Advanced",value:function e(t){return{1:"Indoor",2:"All",3:"Outdoor"}[t]}},isolated_only:{name:"Isolated Only ",value:function e(t){return t?"On":"Off"}},isolated_exclude:{name:"Exclude Isolated",value:function e(t){return t?"On":"Off"}},render_only:{name:"Exclude Only",value:function e(t){return t?"On":"Off"}},render_exclude:{name:"Exclude Renders",value:function e(t){return t?"On":"Off"}},anonymous:{name:"Anonymous",value:function e(t){return t?"On":"Off"}},non_stocky:{name:"Non Stocky",value:function e(t){return t?"On":"Off"}},season:{name:"Season",value:function e(t){return t}},day_time:{name:"Times of Day",value:function e(t){return t}},country:{name:"Country",value:function e(t){return t}}};var s={};if(t){s.AutoSearch=1}var o=n.omit(this.changed,this.serviceFields);n.each(o,(function(e,t){if(r[t]&&(i||a.defaults[t]!==e)){var n=t;var o=e;if(r[t].name){n=r[t].name}if(r[t].value){o=r[t].value(e)}s[n]=o}}));return s},getFilterKeys:function e(){return n.intersection(Object.keys(this.getNonDefaults()),this.filterFields)},defineSearchType:function e(t){var i=!!t;var a;if(i&&this.get("editorial_only")){a="editorial"}else if(!i&&this.get("photo")&&this.get("vector")){a="allPhoto"}else if(this.get("photo")){a="photo"}else if(this.get("vector")){a="vector"}else if(this.get("video")){a="video"}return a},defineItemsType:function e(){var t=this.defineSearchType();return t==="allPhoto"?"photo":t},defineSpecificSearchMode:function e(){if(_(this.attributes)){return"portfolio"}if(g(this.attributes)){return"category"}return this.get("relatedTo")},getRawSearchParams:x,getDefaultSorting:function e(t,i){if(t===void 0){t=this.app}var a=i===void 0?this:i,r=a.attributes;return y(t,{attributes:r})}},{createInstance:function e(t){var i=t.app,a=t.searchSessionParams,s=t.searchRestrictions;var n=r({},i.queryParams,{},i.userSettings.get("SearchQuery"),{},a,{},o.getDataSourceSets(i),{rawSearchParams:x(i.queryParams)});Object.assign(n,k(i,n));return new C(n,{app:i,userSettings:i.userSettings,parse:true})}});e.exports=C},706:function(e,t,i){"use strict";var a=i(0);var r=i(2);e.exports=r.extend({defaults:{photo:true,vector:true,video:true,editorial:true,illustration:true},getQueryParams:function e(){return{}},filterSearchAttributes:function e(t){var i=a.clone(t);if(!t.photo&&!t.vector&&!t.video){t.photo=true;t.vector=true}if(!this.get("editorial")){i.editorial=undefined;i.editorial_only=false;i.editorial_exclude=false}i.photo=t.photo&&this.get("photo");i.vector=t.vector&&this.get("vector");i.video=t.video&&this.get("video");if(!i.photo&&!i.vector&&!i.video){i.photo=this.get("photo");if(!i.photo){i.vector=this.get("vector")}if(!i.photo&&!i.vector){i.video=this.get("video")}}if(i.photo!==t.photo||i.vector!==t.vector||i.video!==t.video||i.editorial!==t.editorial||i.editorial_exclude!==t.editorial_exclude||i.editorial_only!==t.editorial_only){i.hash=undefined}return i}})},708:function(e,t,i){"use strict";(function(t){function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var n=i(0);var o=i(709).create;var l=i(546);var c=i(560);var u=i(24),d=u.prefixedArrayString;var h=10;e.exports=l.extend({name:"SearchTypes",el:false,collection:null,events:{"change ._search-type":"onTypeChange","click ._active-type":"onActiveTypeClick"},globals:{"scroll window":"onWindowScroll"},initialize:function e(){this.prepareTypes();this.listenTo(this.model,d("change:",this.model.mutable.type),this.onModelTypeChange);this.listenTo(this.app.observer,"Responsive:CloseMobileMenu",this.observeCloseMobileMenu.bind(this));this.listenTo(this.app.observer,"SearchFilter:ResetType",this.setTypeFilterRestriction.bind(this));this.listenTo(this.app.observer,"Modal:HideAll",this.toggle.bind(this,false))},serialize:function e(){var t=this.getActiveOption();return{options:this.typeOptions,label:t.label,icon:t.icon}},prepareTypes:function e(){var t=this;var i=o(this.app);this.typeOptions=i.filter((function(e){return t.getTypeNames(e.patch).every((function(e){return t.model.getRestrictions().get(e)}))})).map((function(e){return r({},e,{active:Object.entries(e.patch).every((function(e){var i=e[0],a=e[1];return t.model.get(i)===a}))})}));if(!this.typeOptions.find((function(e){return e.active}))){this.typeOptions[0].active=true}},getActiveOption:function e(){return n.findWhere(this.typeOptions,{active:true})},onTypeChange:function e(t){var i=this.getActiveOption();var a=+t.target.value;if(i.id!==a){i.active=false;i=n.findWhere(this.typeOptions,{id:a});i.active=true;this.render();this.setTypeFilterRestriction();this.app.observer.broadcast("Track:UE:SearchTypes:Change",{type:i});this.onSearchTypesChangeCallback(i.patch)}},getTypeNames:function e(t){return Object.entries(t).filter((function(e){var t=e[0],i=e[1];return i})).map((function(e){var t=e[0];return t}))},onActiveTypeClick:function e(t){t.stopPropagation();this.toggle(false)},onModelTypeChange:function e(){this.prepareTypes();this.render()},onWindowScroll:n.throttle((function(){if(t.browser&&c.mobileMode()&&this.isOpen()){this.toggle(false)}}),h),toggle:function e(t){if(t===void 0){t=!this.isOpen()}var i=t?!this.isOpen():!!t;if(c.mobileMode()&&t){this.app.observer.fire("Responsive:CloseMobileMenu",{cid:this.cid})}this.$(".search-bar-type__menu").toggleClass("search-bar-type__menu_opened",i);this.$(".search-bar-type-indicator__arrow").removeClass("arrow-top arrow-bottom").addClass("arrow-"+(i?"top":"bottom"))},isOpen:function e(){return this.$(".search-bar-type__menu").hasClass("search-bar-type__menu_opened")},setTypeFilterRestriction:function e(){this.app.userSettings.set({searchSession:{route:this.app.router.routeName,params:{typeFilterRestriction:1}}})},observeCloseMobileMenu:function e(t){if(t.cid!==this.cid){this.toggle(false)}},onSearchTypesChangeCallback:n.noop})}).call(this,i(16))},709:function(e,t,i){"use strict";e.exports.create=function(e){return[{id:1,patch:{photo:true,vector:true,video:false,illustration:null},label:e.tr("All Images"),isDefault:true,placeholder:e.tr("Search for Photos and Vector Images"),placeholderMobile:e.tr("Start searching")},{id:2,patch:{photo:true,vector:false,video:false,illustration:null},label:e.tr("Photos"),icon:"icon-photo",placeholder:e.tr("Search for Photos"),placeholderMobile:e.tr("Start searching")},{id:3,patch:{photo:false,vector:true,video:false,illustration:null},label:e.tr("Vectors"),icon:"icon-vector",placeholder:e.tr("Search for Vector Images"),placeholderMobile:e.tr("Start searching")},{id:4,patch:{photo:false,vector:false,video:true,illustration:null},label:e.tr("Videos"),icon:"icon-video",placeholder:e.tr("Search for Videos"),placeholderMobile:e.tr("Start searching")},{id:5,patch:{photo:true,vector:true,video:false,illustration:true},label:e.tr("Illustrations"),icon:"icon-illustration",placeholder:e.tr("Search for Illustrations"),placeholderMobile:e.tr("Start searching"),isNew:true}]};e.exports.keys=["photo","vector","video","illustration"]},710:function(e,t,i){"use strict";var a=i(0);var r=i(28);e.exports=r.extend({url:"SearchHints",initialize:function e(t,i){if(i&&i.url){this.url=i.url}},parse:function e(t,i){var r=this.getQueryParams?a.result(this,"getQueryParams").requestId:undefined;return i.requestId===r?t.hints||[]:[]},isBulkAllowed:function e(){return false}})},711:function(e,t,i){"use strict";(function(t){var a=r(i(553));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,i,a,r,s,n){try{var o=e[s](n);var l=o.value}catch(c){i(c);return}if(o.done){t(l)}else{Promise.resolve(l).then(a,r)}}function n(e){return function(){var t=this,i=arguments;return new Promise((function(a,r){var n=e.apply(t,i);function o(e){s(n,a,r,o,l,"next",e)}function l(e){s(n,a,r,o,l,"throw",e)}o(undefined)}))}}i(712);var o=i(743),l=o.to;var c=i(17);var u=i(76);var d=i(713);var h=i(714);var p=i(715);var f=i(716);var v=i(546);var m=i(703);var b=i(717);var g=i(708);var _=i(710);var w=i(552);var y=i(560);var k=i(732),x=k.isNavigationTypeOneOf;e.exports=v.extend({name:"SearchBar",el:false,template:d,amp:h,pageType:null,features:null,enableNavigate:true,mobileMode:false,autoFocus:false,isStaticHints:true,hintsCustomCssClass:"",events:{"click ._search-types":"onTypesSelectorClick","click ._reset":"onResetButtonClick","keydown ._input":"onInputKeyDown","click ._submit":"onSubmitButtonClick","submit ._search-form":"onSubmit","input ._input":"onInputInput","focus ._input":"onInputFocus","blur ._input":"onInputBlur","click ._input":"onInputClick","click ._action-back":"onActionBackClick","click ._filters-btn":"onFiltersButtonClick"},globals:{click:"onBodyClick","resize window":"onWindowResize"},initialize:function e(){var t=this;this.model=this.app.store.get("SearchQuery");this.setViews({"._search-types":new g({template:p,model:this.model,app:this.app,onSearchTypesChangeCallback:this.onSearchTypesChange.bind(this)})});if(!this.app.device.isMobile&&this.app.features.isFeatureOnValue("Search by image")){this.setViews({"._search-images":new b({app:this.app})})}this.listenTo(this.model,"change paramsArrived",(function(){t.getView("._search-types").prepareTypes();t.render()}));this.listenTo(this.model,"change:query",this.onQueryChange)},prepareRender:function e(){this.mobileMode=this.app.device.isMobile||(t.browser?y.mobileMode():this.mobileMode)},serialize:function e(){return{placeholder:this.getPlaceholder(),query:this.model.get("query").replace(/-/gim," "),searchLink:this.app.makeUrl("search"),filtersButtonAvailable:this.isFiltersButtonAvailable(),activeMobileFilters:this.getActiveMobileFilters(),mobileMode:this.mobileMode}},onQueryChange:function e(){if(this.enableNavigate){var t=this.model.serialize();if(t.query===""&&u.pagesDefaultQuery[this.pageType]){t.query=u.pagesDefaultQuery[this.pageType]}if(u.pagesDefaultSorting[this.pageType]){t.sorting=u.pagesDefaultSorting[this.pageType]}this.app.router.redirect(this.app.makeUrl({route:"Search",query:t.query,sorting:t.sorting,photo:t.photo,vector:t.vector,video:t.video,illustration:t.illustration}))}},clientAfterRender:function e(){this.setNotExistView("SearchHints",m,{type:"search",template:f,collection:new _,onHintMouseDownCallback:this.chooseHint.bind(this),onHintSelectCallback:this.fillInputValue.bind(this),customCssClass:this.hintsCustomCssClass,isStatic:this.isStaticHints&&!this.isSearchPage,isFixed:this.isSearchPage,shift:{top:7,left:17,width:-16}}).setAnchor(this.$("._params")[0]);w(this.$el,c.$);this.tryToSetFocus();if(!this.app.userSettings.get("Tour")||!this.app.userSettings.get("Tour").searchByImage){this.app.observer.fire("Tour:Start",{name:"searchByImage"})}this.$el.addClass("enable-transition")},onBodyClick:function e(t){var i=this.getView("._search-types");var a=this.getView("SearchHints");if(!this.el.getElementsByClassName("_search-types")[0].contains(t.target)&&i&&i.isOpen()){i.toggle(false);this.removeHighlight()}var r=this.mobileMode&&this.el.getElementsByClassName("_input")[0].contains(t.target)&&a&&!a.opened;if(!this.el.getElementsByClassName("_search-hints")[0].contains(t.target)&&!r){this.hideHints()}},tryToSetFocus:function e(){var t=y.mobileMode();var i=this.model.get("query")==="";var a=x(["history","reload"]);if(this.autoFocus&&!t&&i&&!a){this.focusOnInput()}},isSearchFieldEmpty:function e(){return!this.$("._input").val().trim().length},isFiltersButtonAvailable:function e(){return t.browser&&y.mobileMode()&&this.isSearchPage&&this.mobileMode&&!["similar","serie","model"].includes(this.model.get("relatedTo"))&&!this.model.get("folderId")>0},onSubmitButtonClick:function e(t){if(this.isSearchFieldEmpty()){this.$("._input").focus();t.preventDefault()}},onFiltersButtonClick:function e(){this.app.observer.fire("Search:ToggleMobileFilter")},trackBarSubmit:function e(t){this.app.observer.broadcast("Track:UE:SearchBar:Submit",{query:t,type:this.getActiveOption()})},onSubmit:function(){var e=n(a.default.mark((function e(t){var i;return a.default.wrap((function e(a){while(1){switch(a.prev=a.next){case 0:t.preventDefault();i=this.$("._input").val().trim();if(!(i.length===0)){a.next=4;break}return a.abrupt("return");case 4:this.trackBarSubmit(i);a.next=7;return l(this.setSearchSession());case 7:this.model.secureSet({query:i,correction:true});if(this.enableNavigate&&this.model.hasChanged()===false){this.model.trigger("change:query",this.model)}case 9:case"end":return a.stop()}}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setSearchSession:function(){var e=n(a.default.mark((function e(){var t,i,r;return a.default.wrap((function e(a){while(1){switch(a.prev=a.next){case 0:t=this.app.userSettings.get("searchSession");if(!(this.app.router.routeName!=="Search"&&t&&t.route!==this.app.router.routeName)){a.next=8;break}a.next=4;return l(this.app.userSettings.promiseSave({searchSession:null}));case 4:i=a.sent;r=i[0];if(!r){a.next=8;break}throw new Error('Cannot save "searchSession" to userSettings.');case 8:case"end":return a.stop()}}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onTypesSelectorClick:function e(){this.setHighlight();this.getView("._search-types").toggle()},onInputInput:function e(t){this.toggleClearButton(!!t.target.value);this.getView("SearchHints").load(t.target.value)},onInputFocus:function e(){this.setHighlight()},onInputBlur:function e(){this.removeHighlight()},onInputClick:function e(t){if(this.mobileMode){this.getView("SearchHints").load(t.target.value)}},onActionBackClick:function e(){this.app.observer.fire("SearchBar:Back")},setHighlight:function e(){this.$el.addClass("focus")},removeHighlight:function e(){if(!this.$("._input").is(":focus")){this.$el.removeClass("focus")}},onInputKeyDown:function e(t){switch(t.which){case 38:case 40:t.preventDefault();this.getView("SearchHints").moveSelection(t.which===38?-1:1);break;case 13:t.preventDefault();if(!this.isSearchFieldEmpty()){this.chooseHint()}break;case 27:this.hideHints();break;default:break}},onResetButtonClick:function e(){this.$("._input").val("");this.toggleClearButton(false);this.hideHints();this.focusOnInput()},onSearchTypesChange:function e(t){this.model.secureSet(Object.assign(t,{query:this.$("._input").val().trim(),correction:true}));this.updatePlaceholder()},onWindowResize:function e(){var i=t.browser?y.mobileMode():this.mobileMode;if(i!==this.mobileMode){this.mobileMode=i;this.updatePlaceholder()}},getActiveMobileFilters:function e(){var t=this.model.filterFields.concat(["nudity"]).filter((function(e){return e!=="dataSource"}));return Object.keys(this.model.getNonDefaults(t)).length+(this.getActiveOption().isDefault?0:1)},getActiveOption:function e(){return this.getView("._search-types").getActiveOption()},getPlaceholder:function e(){var t=this.app.device.isMobile||this.mobileMode?"placeholderMobile":"placeholder";return this.tr(this.getActiveOption()[t])},updatePlaceholder:function e(){if(this.getView("._search-types")){this.$("._input").attr({placeholder:this.getPlaceholder()})}},chooseHint:function(){var e=n(a.default.mark((function e(){var t,i;return a.default.wrap((function e(a){while(1){switch(a.prev=a.next){case 0:t=this.$("._input").val().trim();i=this.getView("SearchHints").getSelectedItem();if(i){this.app.observer.broadcast("Track:UE:SearchHint:Select",{value:i.get("value"),query:this.$("._input").val().trim(),position:this.getView("SearchHints").collection.indexOf(i)+1});this.$("._input").val(i.get("value"))}else{this.trackBarSubmit(t)}a.next=5;return l(this.setSearchSession());case 5:this.model.secureSet({query:t,correction:true});this.hideHints();case 7:case"end":return a.stop()}}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fillInputValue:function e(t){this.$("._input").val(t)},toggleClearButton:function e(t){this.$("._reset").toggleClass("search-bar-input__button-reset_hidden",!t)},hideHints:function e(){if(this.getView("._search-types")){this.getView("SearchHints").reset()}},focusOnInput:function e(){var t=this.$("._input");t.trigger("focus");if(t[0].setSelectionRange){var i=t.val().length;t[0].setSelectionRange(i,i)}else{t.val(t.val())}document.body.scrollTop=0}})}).call(this,i(16))},712:function(e,t,i){},713:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="search-bar-wrapper"><div class="search-bar';if(t.mobileMode){a+=" search-bar_mobile"}a+='"><form class="search-bar__inner _search-form" action="'+t.searchLink+'" target="_top" name="search" role="search"><div class="search-bar__params _params"><div class="search-bar__actions"><div class="search-bar__action-back _action-back"></div></div><div class="search-bar__input-container search-bar-input"><div class="search-bar-input__input-box input-box-l"><input name="query" class="input search-bar-input__input-query _input" type="text" value="'+i(unescape(t.query))+'" placeholder="'+i(t.placeholder)+'" autocomplete="off" required /><a class="search-bar-input__button-reset button-reset _reset';if(!t.query.length){a+=" search-bar-input__button-reset_hidden"}a+='"></a></div></div><div class="search-bar__search-images _search-images"></div><div class="search-bar__type-container search-bar-type _search-types"></div>';if(t.filtersButtonAvailable){a+='<div class="search-bar__filters"><i class="search-bar__filters-btn _filters-btn"';if(t.activeMobileFilters>0){a+=' data-count="'+i(t.activeMobileFilters)+'"'}a+="></i></div>"}a+='<div class="_search-hints"></div></div><div class="search-bar__control"><button type="submit" class="search-bar__button-submit button button-blue button-search button-search-watery search-bar__desktop _submit"></button><button type="submit" class="search-bar__button-submit button button-blue button-search button-search-custom search-bar__custom _submit"></button><button type="submit" class="search-bar__button-submit button button-blue button-search button-search-large search-bar__large _submit"></button><button type="submit" class="search-bar__button-submit button button-blue button-search button-search-mobile search-bar__mobile _submit"></button></div></form></div></div>';return a}},714:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="search-bar-wrapper"><div class="search-bar"><form class="search-bar__inner _search-form" action="'+t.searchLink+'" target="_top"><div class="search-bar__params _params"><div class="search-bar__actions"><div role="button" tabindex="0" class="search-bar__action-back _action-back" on="tap:search-bar.hide, header-overlay.show"></div></div><div class="search-bar__input-container search-bar-input"><div class="search-bar-input__input-box input-box-l"><input name="query" class="input search-bar-input__input-query input-l _input" type="text" value="'+i(unescape(t.query))+'" placeholder="'+i(t.placeholder)+'" autocomplete="off" required /><a class="search-bar-input__button-reset button-reset _reset';if(!t.query.length){a+=" search-bar-input__button-reset_hidden"}a+='"></a></div></div><div class="search-bar__search-images _search-images"></div></div><div class="search-bar__control"><button type="submit" class="search-bar__button-submit button button-blue button-search button-search-mobile search-bar__mobile _submit"></button></div></form></div></div>';return a}},715:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="search-bar-type__container"><span class="search-bar-type__indicators search-bar-type-indicator"><i class="icon search-bar-type-indicator__icon';if(t.icon){a+=" search-bar-type-indicator__icon-type "+i(t.icon)}a+='"></i><span class="search-bar-type-indicator__title';if(!t.icon){a+=" search-bar-type-indicator__title_all"}a+='">'+this.tr(t.label)+'</span><i class="arrow arrow-black search-bar-type-indicator__arrow arrow-bottom"></i></span><div class="search-bar-type__menu"><ul class="search-bar-type-menu">';var r=t.options;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];if(s.type==="video"&&n>0){a+='<li class="search-bar-type-menu__separator"></li>'}a+='<li class="search-bar-type-menu__item';if(s.active){a+=" search-bar-type-menu__item_active _active-type"}if(s.isNew){a+=" search-bar-type-menu__item_new"}a+='"><label class="search-bar-type-menu__item-inner';if(s.parent){a+=" search-bar-type-menu__item-inner_sub"}a+='"><i class="search-bar-type-menu__item-ok icon icon-ok icon-ok-blue"></i><input class="search-bar-type-menu__item-radio _search-type" type="radio" name="file-types" value="'+i(s.id)+'" /><i class="search-bar-type-menu__item-icon icon';if(s.icon){a+=" "+i(s.icon)}else{a+=" icon-all-types"}a+='"></i><span class="search-bar-type-menu__item-title">'+this.tr(s.label)+"</span>";if(s.isNew){a+='<i class="search-bar-type-menu__new label label-new-text-box"></i>'}a+="</label></li>"}}a+="</ul></div></div>";return a}},716:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<ul class="'+i(t.classes)+' _search-hints">';var r=t.items;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];if(s.value){a+='<li class="search-hints__item _hint';if(s.selected){a+=" hint_active"}a+='" data-value="'+i(s.value)+'"><span class="search-hints__item-text"><span class="search-hints__item-text_main">'+i(t.query.trim())+"</span>"+i(s.cutValue)+"</span></li>"}}}a+="</ul>";return a}},717:function(e,t,i){"use strict";(function(e){i(575);var t=i(548).SearchByImageIcon;var a=i(718);var r=i(719);var s=i(546);var n=i(720);var o=i(547);var l=i(9),c=l.getLogger;var u=c(e);e.exports=s.extend({name:"SearchByImage",el:false,template:a,events:{click:"onClick",mouseenter:"showImageSearchToolTip",mouseleave:"hideImageSearchToolTip"},clientAfterRender:function e(){try{localStorage.removeItem("imgData")}catch(i){u.verbose("There is a problem with local storage",i)}this.setNotExistView("searchByImageToolTip",o,{params:t,content:new s({el:false,template:r})})},showImageSearchToolTip:function e(t){this.getView("searchByImageToolTip").show(t)},hideImageSearchToolTip:function e(t){this.getView("searchByImageToolTip").hide(t)},onClick:function e(t){t.stopPropagation();if(!this.getView("SearchByImage")){this.setView("SearchByImage",new n({app:this.app}))}this.getView("SearchByImage").show()}})}).call(this,i(5)(e))},718:function(e,t,i){"use strict";e.exports=function e(t){var i='<i class="search-bar__search-images-icon icon-search-by-image _search-images-icon"></i>';return i}},719:function(e,t,i){"use strict";e.exports=function e(t){var i="<div>"+this.tr("Try our new Search by Image!")+"</div>";return i}},720:function(e,t,i){"use strict";var a=i(0);var r=i(721);var s=i(563);var n=i(722);var o=i(730);e.exports=s.extend({template:r,initialize:function e(){var t=this;this.model=new o;this.body=function(){return new n({app:t.app,model:t.model,onSearchByImageChange:t.onSearchByImageChange.bind(t),onSubmitDataCallback:t.onSubmitData.bind(t)})};this.footer=[];this.finishDelay=Math.floor(Math.random()*1500)+1e3;this.delayCompleted=true;this.delayCallback=null;this.listenTo(this.model,"sync",this.modelSyncCallback);this.listenTo(this.model,"invalid",this.modelInvalidCallback);this.listenTo(this.model,"serverError",this.modelServerErrorCallback)},onHideCallback:function e(){this.model.abort();this.model.resetToDefaults(a.without(a.keys(this.model.defaults),["searchType"]))},toggleLockUI:function e(t){this.$("._tab, ._btn").prop("disabled",t||false)},onSearchByImageChange:function e(t){this.model.secureSet(t)},onSubmitData:function e(t){var i=this;if(this.finishDelay){this.delayCompleted=false;this.delayCallback=null;a.delay((function(){if(i.delayCallback){i.delayCallback();i.delayCallback=null}i.delayCompleted=true}),this.finishDelay)}this.toggleLockUI(true);this.model.save({file:t},{wait:true})},modelServerErrorCallback:function e(t,i,a){var r=a.responseJSON?this.handleErrors(a.responseJSON):this.parseBadResponse(a);this.model.trigger("invalid",this.model,r)},modelInvalidCallback:function e(){this.toggleLockUI(false)},modelSyncCallback:function e(){if(this.delayCompleted){this.finishLoading()}else{this.delayCallback=this.finishLoading.bind(this)}},finishLoading:function e(){var t=this;this.app.observer.fire("Search:imageLoaded");this.app.observer.broadcast("Track:UE:Search:ByImage",{source:this.model.get("url")||"upload"});this.toggleLockUI(false);a.delay((function(){t.app.router.redirect(t.app.makeUrl("search/by-images",{query:{idList:t.model.getItemsList(),mode:t.model.get("searchType"),imageUrl:t.model.get("url")}}))}))},handleErrors:function e(t){var i=[];a.each(t.errors,(function(e){i.push(this.tr(e.message,t.meta.format||[]))}),this);return i},parseBadResponse:function e(t){return a.map(t,(function(e,t){return t+": "+e}))}})},721:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="modal-container"><div class="sbi-modal modal _modal '+i(t.modalClasses)+'">';if(!t.noBorder){a+='<div class="modal__border"></div>'}a+='<div class="modal__dialog"><div class="modal__header sbi-modal__title _drag-handler">'+this.tr("Search by Image")+'</div><div class="modal__body sbi-modal__body _body '+i(t.bodyClasses)+'">\x3c!--body mount--\x3e</div></div></div></div>';return a}},722:function(e,t,i){"use strict";i(575);var a=i(0);var r=i(23).searchImagesTabs();var s=i(723);var n=i(724);var o=i(48);var l=i(546);var c=i(578);var u=i(725);var d=i(728);var h=i(74);var p="10_uploadByImageTab";e.exports=l.extend({el:false,template:s,events:{"click ._btn":"onBtnClick","submit ._submit":"onSubmit"},initialize:function e(){this.listenTo(this.model,"change:searchType",this.render)},prepareRender:function e(){var t=h.get(p);if(t&&t!==this.model.get("searchType")){this.model.set({searchType:t},{silent:true});this.app.userSettings.set({uploadByImageTab:t})}this.setViews({"._search-images-tabs":new c({app:this.app,template:n,model:this.model,schema:this.setTabsActive(),changeTabCallback:this.changeTabCallback.bind(this)}),"._upload-block":new(this.model.get("searchType")==="url"?u:d)({app:this.app,model:this.model,onSearchByImageChange:this.onSearchByImageChange.bind(this),onSubmitDataCallback:this.onSubmitDataCallback.bind(this)})})},onSubmit:function e(t){t.preventDefault();t.stopPropagation();this.doUpload()},onBtnClick:function e(t){t.preventDefault();t.stopPropagation();this.doUpload()},setTabsActive:function e(){var t=this;return a.map(r,(function(e){e.active=t.model.get("searchType")===e.key;return e}))},changeTabCallback:function e(t){var i=t.get("key");this.model.resetToDefaults(a.without(a.keys(this.model.defaults),"searchType"));this.onSearchByImageChange({searchType:i});this.app.userSettings.set({uploadByImageTab:i});h.set(p,i,{expires:"1Y"})},serialize:function e(){return{btnName:this.tr(this.model.get("searchType")==="url"?o.SearchByImageTitle:o.SearchImagesTitle)}},doUpload:function e(){this.model.resetToDefaults(a.without(a.keys(this.model.defaults),"searchType"));this.getView("._upload-block").upload()},onSearchByImageChange:a.noop,onSubmitDataCallback:a.noop})},723:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="sbi-uploader"><div class="sbi-uploader__tab-switcher _search-images-tabs"></div><div class="sbi-uploader__form _upload-block"></div><div class="sbi-uploader__footer"><button class="button button-xxl button-pill button-blue _btn">'+i(t.btnName)+'</button></div><i class="sbi-uploader__close icon icon-close-cross _close"></i></div>';return a}},724:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<ul class="cmp-tabs">';var r=t.scheme;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];if(s.enabled){a+='<li class="cmp-tabs__tab ';if(s.active){a+="cmp-tabs__tab_active"}a+=' _tab" data-key='+i(s.key)+'><a class="cmp-tabs__label">'+this.tr(s.label)+"</a></li>"}}}a+="</ul>";return a}},725:function(e,t,i){"use strict";var a=i(0);var r=i(726);var s=i(737);var n=i(738).spinner;var o=i(546);var l=i(662);e.exports=o.extend({el:false,template:r,regexpUrl:/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-/]))?/gi,events:{"input ._url_input":"onInput"},globals:{click:"onGlobalClick"},initialize:function e(){this.spinner=null;this.setViews({"._upload-errors":new l({model:this.model})});this.listenTo(this.model,"invalid",this.onInvalidAppear);this.listenTo(this.app.observer,"Search:imageLoaded",this.finishLoading)},serialize:function e(){return a.clone(this.model.attributes)},clientAfterRender:function e(){this.$("._url_input").focus()},onGlobalClick:function e(t){if(this.$(t.target).hasClass("_url_input")){this.clearError()}else{this.$("._url_input").blur()}},onInput:function e(){this.clearError()},onInvalidAppear:function e(){this.finishLoading();this.$("._url_input-container").addClass("field-box_incorrect")},clearError:function e(){this.$("._url_input-container").removeClass("field-box_incorrect");this.getView("._upload-errors").setErrorMessages()},upload:function e(){var t=this.$("._url_input").val();if(this.checkUrl(t)){this.onSearchByImageChange({url:t});if(this.model.isValid()){this.onSubmitDataCallback();this.loading()}}else{this.$("._url_input-container").addClass("field-box_incorrect")}},checkUrl:function e(t){return t.match(this.regexpUrl)},loading:function e(){if(!this.spinner){this.spinner=new s(n);this.spinner.spin(this.$("._sbi-spinner").get(0))}this.$("._form-container").hide();this.$("._sbi-spinner").show()},finishLoading:function e(){this.$("._form-container").show();this.$("._sbi-spinner").hide()},onSearchByImageChange:a.noop,onSubmitDataCallback:a.noop})},726:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<form name="UploadByUlr" class="sbi-form sbi-form_url _submit" method="POST" enctype="multipart/form-data"><div class="_sbi-spinner"></div><div class="_form-container"><span class="sbi-form__title">'+this.tr("Paste image URL")+'</span><label class="sbi-form__field field-box input-box _url_input-container input-box-xxl"><input class="input input-xxl _url_input" type="text" name="title"';if(t.url){a+=' value="'+i(t.url)}a+='" autocomplete="off" /></label><div class="sbi-uploader__errors _upload-errors"></div></div></form>';return a}},727:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a="";var r=t.errorMessages;if(r){var s,n=-1,o=r.length-1;while(n<o){s=r[n+=1];a+='<span class="sbi-form__text sbi-form__text_error">'+i(s)+"</span>"}}return a}},728:function(e,t,i){"use strict";(function(e){var t=i(0);var a=i(17);var r=i(48);var s=i(729);var n=i(546);var o=i(662);var l=i(9),c=l.getLogger;var u=c(e);e.exports=n.extend({el:false,template:s,events:{"change ._file-upload":"onFileChange","click ._upload":"upload","drop ._upload":"onPreviewDrop","dragleave ._upload":"onPreviewDragLeave","dragover ._upload":"onPreviewDragOver"},initialize:function e(){this.setViews({"._upload-errors":new o({model:this.model})});this.listenTo(this.app.observer,"Search:imageLoaded",this.finishLoading)},serialize:function e(){return t.clone(this.model.attributes)},clientAfterRender:function e(){this.getView("._upload-errors").setErrorMessages();if(this.imageRate){this.previewResizing()}t.defer(this.onPreviewLoad.bind(this))},onFileChange:function e(t){if(t.target.files.length>0){this.prepareFile(t.target.files[0])}},onPreviewDragOver:function e(t){t.preventDefault();t.stopPropagation();this.toggleUpload(true)},onPreviewDragLeave:function e(t){t.preventDefault();t.stopPropagation();this.toggleUpload()},onPreviewDrop:function e(t){t.preventDefault();t.stopPropagation();this.toggleUpload();if(t.originalEvent.dataTransfer.files.length>0){this.prepareFile(t.originalEvent.dataTransfer.files[0])}},toggleUpload:function e(t){this.$("._upload").toggleClass("dragged",t||false)},onPreviewLoad:function e(){this.$("._round-loader").addClass("cmp-round-loader_active")},finishLoading:function e(){this.$("._round-loader").removeClass("cmp-round-loader_active").addClass("cmp-round-loader_finish");this.$("._img-loader").addClass("cmp-img-loader_stop")},previewResizing:function e(){var t=this.$(".sbi-form__drop-zone-preview");var i=t.width()/t.height();if(this.imageRate>i){this.$("._preview").attr("width",Math.round(t.width()))}else{this.$("._preview").attr("height",Math.round(t.height()))}},upload:function e(){this.$("._file-upload").trigger("click")},prepareFile:function e(i){this.onSearchByImageChange(t.pick(i,["size","type"]));if(this.model.isValid()){this.file=i;var a=new FileReader;a.onload=this.imageIsLoaded.bind(this);a.onerror=this.onImageError.bind(this);a.readAsDataURL(i)}},readerLoad:function e(t){if(!this.fileReader){this.fileReader=new FileReader}this.fileReader.onload=t?this.loadBlank.bind(this):this.imageIsLoaded.bind(this);this.fileReader.onerror=this.onImageError.bind(this);this.fileReader.readAsDataURL(this.file)},loadBlank:function e(){this.model.set({blank:true});this.setImageRate({target:this.$("._upload").get(0)})},imageIsLoaded:function e(t){var i=t.target.result;var r=i.split(":")[1];if(i&&r.length){var s=new Image;a.$(s).hide();this.$el.prepend(s);this.onSearchByImageChange({fileData:i});s.id="searchingImg";s.src=i;s.onload=this.setImageRate.bind(this);s.onerror=this.onImageError.bind(this)}else{this.onImageError()}},setImageRate:function e(i){this.onSearchByImageChange(t.pick(i.target,["width","height"]));if(this.model.isValid()){this.imageRate=i.target.width/i.target.height;this.onSubmitDataCallback(this.file);this.render()}},onImageError:function e(){if(t.indexOf(["image/tiff","image/tif"],this.model.get("type"))!==-1){this.onSearchByImageChange({fileData:undefined});this.readerLoad(true)}else{this.model.trigger("invalid",this.model,[this.tr(r.ErrorTryAgain)])}},createThumb:function e(t){try{localStorage.setItem("imgData",this.getBase64Image(t))}catch(i){u.verbose("There is a problem with local storage",i)}},getBase64Image:function e(t){var i=document.createElement("canvas");var a=i.getContext("2d");var r={};var s=30;r.width=this.imageRate>=1?Math.round(s*this.imageRate):s;r.height=this.imageRate>=1?s:Math.round(s/this.imageRate);i.width=r.width;i.height=r.height;a.drawImage(t,0,0,r.width,r.height);var n=i.toDataURL("image/png");return n.replace(/^data:image\/(png|jpg);base64,/,"")},onSearchByImageChange:t.noop,onSubmitDataCallback:t.noop})}).call(this,i(5)(e))},729:function(e,t,i){"use strict";e.exports=function e(t){var i='<form name="UploadByImage" class="sbi-form sbi-form_file _submit" method="POST" enctype="multipart/form-data">';if(t.fileData||t.blank){i+='<div class="sbi-form__drop-zone-preview ';if(t.blank){i+="blank"}i+='"><div class="sbi-form__overlay _preview-overlay"></div><i class="sbi-form__loader cmp-img-loader _img-loader"><i class="cmp-img-loader__icon"></i><i class="cmp-img-loader__icon"></i><i class="cmp-img-loader__icon"></i></i><i class="sbi-form__round-loader cmp-round-loader _round-loader"><i class="cmp-round-loader__part cmp-round-loader__part_1"><i class="cmp-round-loader__inner"></i></i><i class="cmp-round-loader__part cmp-round-loader__part_2"><i class="cmp-round-loader__inner"></i></i><i class="cmp-round-loader__part cmp-round-loader__part_3"><i class="cmp-round-loader__inner"></i></i><i class="cmp-round-loader__part cmp-round-loader__part_4"><i class="cmp-round-loader__inner"></i></i></i>';if(t.fileData){i+='<img class="sbi-form__preview _preview" src="'+t.fileData+'" />'}i+="</div>"}else{i+='<div class="sbi-form__drop-zone _upload"><i class="sbi-form__icon"></i><span class="sbi-form__text">'+this.tr("Drag and drop image here")+"</span></div>"}i+='<div class="sbi-uploader__errors _upload-errors"></div><span class="sbi-form__text sbi-form__text_or">'+this.tr("or")+'</span><input class="sbi-form__field-file _file-upload" type="file"></form>';return i}},730:function(e,t,i){"use strict";var a=i(0);var r=i(4);var s=i(731);var n=i(2);var o=i(11);e.exports=n.extend({defaults:s.defaults,limits:s.limits,validation:s.validation,oldSync:true,prepareUrl:function e(t){return r.client.msisUrl+"/search"+(t?"/"+t:"")},sync:function e(t,i,r){var s=this;if(r===void 0){r={}}if(this.get("url")){r.data={url:o.encodeURI(this.get("url"))};r.url=this.prepareUrl("url");r.emulateJSON=true}else{r.data=new FormData;r.data.append("file",this.get("file"));r.url=this.prepareUrl();r.contentType=false}var n=r.error||function(){};r.error=function(e){s.trigger("serverError",s,e,a.pick(e,["status","statusText","responseJSON"]));for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++){i[r-1]=arguments[r]}n.apply(void 0,[e].concat(i))};this.xhr=Backbone.sync.call(this,t,i,r);return this.xhr},getItemsList:function e(){return JSON.stringify(a.map(this.get("items"),(function(e){return e.id})))},abort:function e(){if(this.xhr&&this.xhr.readyState>0&&this.xhr.readyState<4){this.xhr.abort()}},parse:function e(t){if(t.errors){this.validationError=t.errors;this.trigger("invalid",this,t.errors,{validationError:t.errors})}return t.data}})},731:function(e,t,i){"use strict";var a=10485760;var r=10;var s=10;var n=1e4;var o=1e4;e.exports.defaults={fileData:undefined,file:undefined,url:undefined,size:a,type:"image/jpg",width:r,height:s,searchType:"url",items:[]};e.exports.limits={size:[a/(1024*1024)],minResolution:[r,s],maxResolution:[n,o]};e.exports.validation={size:{max:a,msg:"ErrorMaxSize"},type:{oneOf:["image/jpeg","image/jpg","image/png","image/bmp","image/tif","image/tiff"],msg:"ErrorImageFormat"},width:[{min:r,msg:"ErrorMinWidth"},{max:n,msg:"ErrorMaxWidth"}],height:[{min:s,msg:"ErrorMinHeight"},{max:o,msg:"ErrorMaxHeight"}]}},732:function(e,t,i){"use strict";var a={history:"back_forward",reload:"reload"};var r=function e(){try{return window.performance.getEntriesByType("navigation")[0].type}catch(t){return null}};t.isNavigationTypeOneOf=function(e){if(!Array.isArray(e)){throw new Error("Parameter must be an array!")}var t=r();return e.some((function(e){return a[e]!==undefined&&a[e]===t}))}},750:function(e,t,i){"use strict";var a=i(2);var r=i(24);var s=function e(t){var i=t.toFixed(0),a=i.length;if(a<4){return(t/1e3).toFixed(4-a)}return Math.round(t/("1e"+(a-1)))*("1e"+(a-4))};e.exports=a.extend({defaults:{filesType:"total",files:53714430,customers:4890333,contributors:58682,freeItems:5e4,curatedItems:5e5},url:"MarketStats",getQueryParams:function e(){return{type:this.get("filesType")}},parse:function e(t){return{filesType:t.itemType,files:parseInt(t.count,10)||this.defaults.files,customers:parseInt(t.customers,10)||this.defaults.customers,contributors:parseInt(t.contributorsCount,10)||this.defaults.contributors,freeItems:parseInt(t.freeItemsCount,10)||this.defaults.freeItems,curatedItems:parseInt(t.curatedItemsCount,10)||this.defaults.curatedItems}},serialize:function e(){return{files:r.numberFormat(this.get("files")),customers:r.numberFormat(this.get("customers")),contributors:r.numberFormat(this.get("contributors")),millionFiles:Math.floor(this.get("files")/1e6),millionCustomers:Math.ceil(this.get("customers")/1e6),thousandsContributors:r.numberFormat(Math.floor(this.get("contributors")/1e3)*1e3),thousandsFreeItems:s(this.get("freeItems")),thousandsCuratedItems:s(this.get("curatedItems"))}}})},764:function(e,t,i){"use strict";(function(t){var a=i(749).mobile.responsive;var r=i(560);e.exports={setMatchMedia:function e(i){if(t.browser&&!this.matchMedia){this.matchMedia=window.matchMedia("(max-width: "+a.mobileBig+"px)");this.matchMediaCallback=function(){return i()};this.matchMedia.addListener(this.matchMediaCallback);this.listenTo(this.app.observer,"Responsive:ClearMatchMedia",this.clearMatchMedia)}},clearMatchMedia:function e(){if(this.matchMedia&&this.matchMediaCallback){this.matchMedia.removeListener(this.matchMediaCallback);this.matchMedia=undefined}},isMobileModeEnabled:function e(){return this.app.device.isMobile||(t.browser?r.mobileMode():this.isMobileMode)}}}).call(this,i(16))},774:function(e,t,i){"use strict";(function(t){function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);if(t)a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){a(Object(i),true).forEach((function(t){s(e,t,i[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(i))}else{a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}return e}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}i(799);i(776);var n=i(0);var o=i(738).videoPlayer;var l=i(800);var c=i(17);var u=i(737);var d=i(546);var h=i(78);var p="vjs-silent-video";var f=null;e.exports=d.extend({name:"FilePreviewVideo",el:false,template:l,file:null,RAWVideoFiles:null,$mount:undefined,$poster:undefined,mountMethod:"append",mountOn:"ready",playerId:null,preload:true,loop:true,shouldSetSizes:true,width:0,height:0,controls:true,autoplay:true,hasPoster:true,muted:false,controlBar:{muteToggle:false,volumeControl:true},spinner:{top:undefined,left:undefined,color:undefined},startPoint:0,startPointAutoCalculation:true,blackBackground:false,viewMode:"modal",initialize:function e(){var t=this;this.spinner=new u(n.defaults(this.spinner,n.clone(o)));if(this.app&&this.app.device&&this.app.device.isMobile){this.on("ready loadstart",(function(){t.toggleSpinner();t.$el.addClass("video-playing");t.$(".video-js").addClass("vjs-has-started")}))}else{this.once("playing",(function(){return t.$el.addClass("video-playing")}))}if(this.$mount){this.once(this.mountOn,this.mountHandler)}},serialize:function e(){return r({files:this.RAWVideoFiles||this.file.getVideoThumbs(this.getVideoThumbsSize(false)),isEditorial:this.file&&this.file.get("editorial"),showTitle:this.getShowTitle(),title:this.file&&this.file.get("title"),isWebmAllowed:this.app.features.isFeatureOnValue("Is webm video thumb allowed"),shouldSetSizes:this.shouldSetSizes,autoplay:this.autoplay,muted:this.muted},this.makeVideoInfo(),{},this.makePlayerOptions())},clientAfterRender:function e(){this.initVideoPlayer()},getShowTitle:function e(){return this.app&&this.app.features&&this.app.features.isFeatureOnValue("Show file title in preview")},initVideoPlayer:function e(){var t=this;this.toggleSpinner(true);i.e(139).then(function(e){f=f||i(1e3);t.destroyInactivePlayers();t.playerId=f(t.getPlayerElement(),n.extend(t.makePlayerOptions(),t.makeVideoInfo())).id();t.initPlayerEvents()}.bind(null,i)).catch(i.oe)},initPlayerEvents:function e(){var t=this;var i=this.getPlayer();if(i){i.ready((function(){t.trigger("ready",t);i.muted(t.muted);i.userActive(false);i.currentTime(t.makeStartPoint());i.on("loadeddata",(function(){t.checkVideoSoundTrack();t.getPlayerElement().currentTime=t.makeStartPoint()}));i.on("loadstart",(function(){t.toggleSpinner(true);t.trigger("loadstart",t)}));i.on("playing",(function(){t.toggleSpinner(false);t.trigger("playing",t)}));i.on("error",(function(){return t.onPlayerError()}));i.on("dispose",(function(){t.stopListening();t.undelegateEvents()}));i.on("touchend",(function(e){if(t.el.getElementsByClassName("vjs-control-bar")[0].contains(e.target)){return}if(i.paused()){t.startPlayer()}else{t.pausePlayer()}}));if(t.autoplay&&i.paused()){t.startPlayer()}}))}},calculateStartPoint:function e(){var t=this.file&&this.file.get("mp")||0;return t>5?Math.floor(t/5):0},makeStartPoint:function e(){return this.startPointAutoCalculation?this.calculateStartPoint():this.startPoint},makeVideoInfo:function e(){var t={width:this.width,height:this.height};if(this.file){var i=h.getThumbSizes(this.file.serialize(),"huge");t.width=this.width||i.w;t.height=this.height||i.h}return t},makePlayerOptions:function e(){return{controls:this.controls,preload:!!t.browser&&this.preload,loop:this.loop,blackBackground:this.blackBackground,poster:this.hasPoster?this.makePoster():null,controlBar:this.controlBar}},makePoster:function e(){var t=this.file&&this.file.getVideoThumbs(this.getVideoThumbsSize(true));if(t&&t.jpg){return t.jpg}if(this.RAWVideoFiles&&this.RAWVideoFiles.jpg){return this.RAWVideoFiles.jpg}return null},getVideoThumbsSize:function e(t){var i=["modal","page"].includes(this.viewMode)?"huge":"wide";return t?i:h.getVideoClipThumbSize(this.file.serialize(),i)},getPlayerElement:function e(){return this.el.tagName.toLowerCase()==="video"?this.el:this.$("video").get(0)},mountHandler:function e(){this.mountPreview();var t=this.getPlayer();if(this.autoplay&&t&&t.paused()){this.startPlayer()}this.app.observer.fire("Responsive:VideoPreviewMounted")},mountPreview:function e(){if(this.mountMethod==="html"){return this.$mount.html(this.$el)}if(this.mountMethod.indexOf("insert")===-1){return this.$mount[this.mountMethod](this.$el)}return this.$el[this.mountMethod](this.$mount)},onPlayerError:function e(){this.spinner.stop();this.spinner=new u(n.extend(n.clone(o),{color:"#ff0000"}));this.toggleSpinner(true)},checkVideoSoundTrack:function e(){var t=this.getPlayer();if(t){var i=this.$("video").get(0);var a=n.isUndefined(i.webkitAudioDecodedByteCount||i.mozHasAudio);t.toggleClass(p,a)}},toggleSpinner:function e(t){if(t){this.spinner.spin(this.$mount&&this.$mount.get(0)||this.el)}else{this.spinner.stop()}},getPlayer:function e(){return f&&this.playerId?f.getPlayers()[this.playerId]:null},startPlayer:function e(){var t=this.getPlayer();if(t){t.play()}},pausePlayer:function e(){var t=this.getPlayer();if(t){t.pause()}},destroyInactivePlayers:function e(){if(f){n.each(f.getPlayers(),(function(e,t){if(e){if(!c.$("#"+t).length){e.dispose()}}else{delete f.players[t]}}))}},cleanup:function e(){this.toggleSpinner();this.pausePlayer()}})}).call(this,i(16))},776:function(e,t,i){},799:function(e,t,i){},800:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="vjs-container"><noscript><video class="video-js vjs-deposit-skin ';if(t.blackBackground){a+=" vjs-bg-black"}a+='"';if(t.shouldSetSizes){a+='style="width: '+i(t.width)+"px; height: "+i(t.height)+'px;"'}a+='width="'+i(t.width)+'" height="'+i(t.height)+'" ';if(t.controls){a+=" controls"}if(t.muted){a+=" muted"}if(t.autoplay){a+=" autoplay"}if(t.poster){a+=' poster="'+i(t.poster)+'"'}if(t.preload){a+=" preload"}if(t.loop){a+=" loop"}a+=">";if(t.files.mp4){a+='<source type="video/mp4" src="'+t.files.mp4+'" itemprop="contentURL"></source>'}if(t.isWebmAllowed&&t.files.webm){a+='<source type="video/webm" src="'+t.files.webm+'" itemprop="contentURL"></source>'}if(t.files.ogg){a+='<source type="video/ogg" src="'+t.files.ogg+'" itemprop="contentURL"></source>'}a+='</video></noscript><video class="video-js vjs-deposit-skin ';if(t.blackBackground){a+=" vjs-bg-black"}a+='"';if(t.shouldSetSizes){a+='style="width: '+i(t.width)+"px; height: "+i(t.height)+'px;"'}a+='width="'+i(t.width)+'" height="'+i(t.height)+'" ';if(t.controls){a+=" controls"}if(t.muted){a+=" muted"}if(t.autoplay){a+=" autoplay"}if(t.poster){a+=' poster="'+i(t.poster)+'"'}if(t.preload){a+=" preload"}if(t.loop){a+=" loop"}a+=">";if(t.files.mp4){a+='<source type="video/mp4" src="'+t.files.mp4+'" itemprop="contentURL"></source>'}if(t.isWebmAllowed&&t.files.webm){a+='<source type="video/webm" src="'+t.files.webm+'" itemprop="contentURL"></source>'}if(t.files.ogg){a+='<source type="video/ogg" src="'+t.files.ogg+'" itemprop="contentURL"></source>'}a+="</video></div>";return a}},804:function(e,t,i){"use strict";(function(t){var a=i(818);var r=i(769);e.exports=a.extend({name:"BaseList",listSelector:null,partialItems:null,intersectionObserver:null,partialMountNode:null,initIntersecObserver:function e(){var t={root:null,rootMargin:"0px",threshold:[.1,.2,.5,1]};this.intersectionObserver=new IntersectionObserver(this.listIntersectionCallback.bind(this),t)},observeLastItem:function e(){if(!t.browser){return}if(!this.intersectionObserver){this.initIntersecObserver()}var i=this.el.querySelector(this.listSelector);var a=i&&i.lastElementChild;if(a&&this.intersectionObserver){this.intersectionObserver.observe(a)}},getPartialMountNode:function e(){return this.$(this.partialMountNode)||this.$el},_applyTemplate:function e(t,i){if(this.partialItems){this.__applyPartialTemplate(t)}else{r.prototype._applyTemplate.apply(this,[t,i])}},__applyPartialTemplate:function e(t){var i=this.getPartialMountNode();if(this.__partialPrepend){i.prepend(t)}else{i.append(t)}},__renderPartialTemplate:function e(t,i){this.mutateContextWithPartial(i);this.endless=false;return this.templatePartial.call(this,i).trim()},renderTemplate:function e(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}if(Array.isArray(this.partialItems)){return this.__renderPartialTemplate.apply(this,i)}return r.prototype.renderTemplate.apply(this,i)},_onCollectionUpdate:function e(t,i){this.__partialPrepend=i.at===0;this.partialItems=this.endless&&i.add?i.changes.added:null;this.render();this.scrollToStart()},_onCollectionReset:function e(){this.partialItems=null;this.render();this.scrollToStart()},mutateContextWithPartial:function e(){},listIntersectionCallback:function e(){}})}).call(this,i(16))},805:function(e,t,i){var a,r;(function(t,i){if(true&&typeof e.exports==="object"){e.exports=t.document?i(t,true):function(e){if(!e.document){throw new Error("Cropper requires a window with a document")}return i(e)}}else{i(t)}})(typeof window!=="undefined"?window:this,(function(i,s){"use strict";var n=i.document;var o=i.location;var l=i.navigator;var c=i.ArrayBuffer;var u=i.Object;var d=i.Array;var h=i.String;var p=i.Number;var f=i.Math;var v="cropper";var m=v+"-modal";var b=v+"-hide";var g=v+"-hidden";var _=v+"-invisible";var w=v+"-move";var y=v+"-crop";var k=v+"-disabled";var x=v+"-bg";var C="mousedown touchstart pointerdown MSPointerDown";var S="mousemove touchmove pointermove MSPointerMove";var T="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel";var M="wheel mousewheel DOMMouseScroll";var P="dblclick";var L="resize";var O="error";var E="load";var D="build";var F="built";var I="cropstart";var z="cropmove";var B="cropend";var R="crop";var V="zoom";var U=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/;var A=/width|height|left|top|marginLeft|marginTop/;var N=/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i;var j=/^\s+(.*)\s+$/;var H=/\s+/;var $=/^data\:/;var W=/^data\:([^\;]+)\;base64,/;var q=/^data\:image\/jpeg.*;base64,/;var Y=/([a-z\d])([A-Z])/g;var K="preview";var Q="action";var G="e";var X="w";var J="s";var Z="n";var ee="se";var te="sw";var ie="ne";var ae="nw";var re="all";var se="crop";var ne="move";var oe="zoom";var le="none";var ce=!!n.createElement("canvas").getContext;var ue=l&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(l.userAgent);var de=f.min;var he=f.max;var pe=f.abs;var fe=f.sin;var ve=f.cos;var me=f.sqrt;var be=f.round;var ge=f.floor;var _e=f.PI;var we=u.prototype;var ye=we.toString;var ke=we.hasOwnProperty;var xe=d.prototype.slice;var Ce=h.fromCharCode;function Se(e){return ye.call(e).slice(8,-1).toLowerCase()}function Te(e){return typeof e==="number"&&!isNaN(e)}function Me(e){return typeof e==="undefined"}function Pe(e){return typeof e==="object"&&e!==null}function Le(e){var t;var i;if(!Pe(e)){return false}try{t=e.constructor;i=t.prototype;return t&&i&&ke.call(i,"isPrototypeOf")}catch(a){return false}}function Oe(e){return Se(e)==="function"}function Ee(e){return d.isArray?d.isArray(e):Se(e)==="array"}function De(e,t){t=t>=0?t:0;if(d.from){return d.from(e).slice(t)}return xe.call(e,t)}function Fe(e){if(typeof e==="string"){e=e.trim?e.trim():e.replace(j,"$1")}return e}function Ie(e,t){var i;var a;if(e&&Oe(t)){if(Ee(e)||Te(e.length)){for(a=0,i=e.length;a<i;a++){if(t.call(e,e[a],a,e)===false){break}}}else if(Pe(e)){for(a in e){if(e.hasOwnProperty(a)){if(t.call(e,e[a],a,e)===false){break}}}}}return e}function ze(e){var t;if(arguments.length>1){t=De(arguments);if(u.assign){return u.assign.apply(u,t)}t.shift();Ie(t,(function(t){Ie(t,(function(t,i){e[i]=t}))}))}return e}function Be(e,t){var i=De(arguments,2);return function(){return e.apply(t,i.concat(De(arguments)))}}function Re(e,t){var i=e.style;Ie(t,(function(e,t){if(A.test(t)&&Te(e)){e+="px"}i[t]=e}))}function Ve(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function Ue(e,t){var i;if(Te(e.length)){return Ie(e,(function(e){Ue(e,t)}))}if(e.classList){return e.classList.add(t)}i=Fe(e.className);if(!i){e.className=t}else if(i.indexOf(t)<0){e.className=i+" "+t}}function Ae(e,t){if(Te(e.length)){return Ie(e,(function(e){Ae(e,t)}))}if(e.classList){return e.classList.remove(t)}if(e.className.indexOf(t)>=0){e.className=e.className.replace(t,"")}}function Ne(e,t,i){if(Te(e.length)){return Ie(e,(function(e){Ne(e,t,i)}))}if(i){Ue(e,t)}else{Ae(e,t)}}function je(e){return e.replace(Y,"$1-$2").toLowerCase()}function He(e,t){if(Pe(e[t])){return e[t]}else if(e.dataset){return e.dataset[t]}return e.getAttribute("data-"+je(t))}function $e(e,t,i){if(Pe(i)){e[t]=i}else if(e.dataset){e.dataset[t]=i}else{e.setAttribute("data-"+je(t),i)}}function We(e,t){if(Pe(e[t])){delete e[t]}else if(e.dataset){delete e.dataset[t]}else{e.removeAttribute("data-"+je(t))}}function qe(e,t,i){var a=Fe(t).split(H);if(a.length>1){return Ie(a,(function(t){qe(e,t,i)}))}if(e.removeEventListener){e.removeEventListener(t,i,false)}else if(e.detachEvent){e.detachEvent("on"+t,i)}}function Ye(e,t,i,a){var r=Fe(t).split(H);var s=i;if(r.length>1){return Ie(r,(function(t){Ye(e,t,i)}))}if(a){i=function(){qe(e,t,i);return s.apply(e,arguments)}}if(e.addEventListener){e.addEventListener(t,i,false)}else if(e.attachEvent){e.attachEvent("on"+t,i)}}function Ke(e,t,i){var a;if(e.dispatchEvent){if(Oe(Event)&&Oe(CustomEvent)){if(Me(i)){a=new Event(t,{bubbles:true,cancelable:true})}else{a=new CustomEvent(t,{detail:i,bubbles:true,cancelable:true})}}else{if(Me(i)){a=n.createEvent("Event");a.initEvent(t,true,true)}else{a=n.createEvent("CustomEvent");a.initCustomEvent(t,true,true,i)}}return e.dispatchEvent(a)}else if(e.fireEvent){return e.fireEvent("on"+t)}}function Qe(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}function Ge(e){var t=e||i.event;var a;if(!t.target){t.target=t.srcElement||n}if(!Te(t.pageX)){a=n.documentElement;t.pageX=t.clientX+(i.scrollX||a&&a.scrollLeft||0)-(a&&a.clientLeft||0);t.pageY=t.clientY+(i.scrollY||a&&a.scrollTop||0)-(a&&a.clientTop||0)}return t}function Xe(e){var t=n.documentElement;var a=e.getBoundingClientRect();return{left:a.left+(i.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0),top:a.top+(i.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0)}}function Je(e){var t=e.length;var i=0;var a=0;if(t){Ie(e,(function(e){i+=e.pageX;a+=e.pageY}));i/=t;a/=t}return{pageX:i,pageY:a}}function Ze(e,t){return e.getElementsByTagName(t)}function et(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function tt(e){return n.createElement(e)}function it(e,t){e.appendChild(t)}function at(e){if(e.parentNode){e.parentNode.removeChild(e)}}function rt(e){while(e.firstChild){e.removeChild(e.firstChild)}}function st(e){var t=e.match(N);return t&&(t[1]!==o.protocol||t[2]!==o.hostname||t[3]!==o.port)}function nt(e){var t="timestamp="+(new Date).getTime();return e+(e.indexOf("?")===-1?"?":"&")+t}function ot(e,t){var i;if(e.naturalWidth&&!ue){return t(e.naturalWidth,e.naturalHeight)}i=tt("img");i.onload=function(){t(this.width,this.height)};i.src=e.src}function lt(e){var t=[];var i=e.rotate;var a=e.scaleX;var r=e.scaleY;if(Te(a)&&Te(r)){t.push("scale("+a+","+r+")")}if(Te(i)){t.push("rotate("+i+"deg)")}return t.length?t.join(" "):"none"}function ct(e,t){var i=pe(e.degree)%180;var a=(i>90?180-i:i)*_e/180;var r=fe(a);var s=ve(a);var n=e.width;var o=e.height;var l=e.aspectRatio;var c;var u;if(!t){c=n*s+o*r;u=n*r+o*s}else{c=n/(s+r/l);u=c/l}return{width:c,height:u}}function ut(e,t){var i=tt("canvas");var a=i.getContext("2d");var r=0;var s=0;var n=t.naturalWidth;var o=t.naturalHeight;var l=t.rotate;var c=t.scaleX;var u=t.scaleY;var d=Te(c)&&Te(u)&&(c!==1||u!==1);var h=Te(l)&&l!==0;var p=h||d;var f=n*pe(c||1);var v=o*pe(u||1);var m;var b;var g;if(d){m=f/2;b=v/2}if(h){g=ct({width:f,height:v,degree:l});f=g.width;v=g.height;m=f/2;b=v/2}i.width=f;i.height=v;if(p){r=-n/2;s=-o/2;a.save();a.translate(m,b)}if(d){a.scale(c,u)}if(h){a.rotate(l*_e/180)}a.drawImage(e,ge(r),ge(s),ge(n),ge(o));if(p){a.restore()}return i}function dt(e,t,i){var a="";var r=t;for(i+=t;r<i;r++){a+=Ce(e.getUint8(r))}return a}function ht(e){var t=new DataView(e);var i=t.byteLength;var a;var r;var s;var n;var o;var l;var c;var u;var d;var h;if(t.getUint8(0)===255&&t.getUint8(1)===216){d=2;while(d<i){if(t.getUint8(d)===255&&t.getUint8(d+1)===225){c=d;break}d++}}if(c){r=c+4;s=c+10;if(dt(t,r,4)==="Exif"){l=t.getUint16(s);o=l===18761;if(o||l===19789){if(t.getUint16(s+2,o)===42){n=t.getUint32(s+4,o);if(n>=8){u=s+n}}}}}if(u){i=t.getUint16(u,o);for(h=0;h<i;h++){d=u+h*12+2;if(t.getUint16(d,o)===274){d+=8;a=t.getUint16(d,o);if(ue){t.setUint16(d,1,o)}break}}}return a}function pt(e){var t=e.replace(W,"");var i=atob(t);var a=i.length;var r=new c(a);var s=new Uint8Array(r);var n;for(n=0;n<a;n++){s[n]=i.charCodeAt(n)}return r}function ft(e){var t=new Uint8Array(e);var i=t.length;var a="";var r;for(r=0;r<i;r++){a+=Ce(t[r])}return"data:image/jpeg;base64,"+btoa(a)}function vt(e,t){var i=this;i.element=e;i.options=ze({},vt.DEFAULTS,Le(t)&&t);i.ready=false;i.built=false;i.complete=false;i.rotated=false;i.cropped=false;i.disabled=false;i.replaced=false;i.limited=false;i.wheeling=false;i.isImg=false;i.originalUrl="";i.canvasData=null;i.cropBoxData=null;i.previews=null;i.init()}vt.prototype={constructor:vt,init:function(){var e=this;var t=e.element;var i=t.tagName.toLowerCase();var a;if(He(t,v)){return}$e(t,v,e);if(i==="img"){e.isImg=true;e.originalUrl=a=t.getAttribute("src");if(!a){return}a=t.src}else if(i==="canvas"&&ce){a=t.toDataURL()}e.load(a)},load:function(e){var t=this;var i=t.options;var a=t.element;var r;if(!e){return}if(Oe(i.build)){Ye(a,D,i.build,true)}if(Ke(a,D)===false){return}t.url=e;t.imageData={};if(!i.checkOrientation||!c){return t.clone()}if($.test(e)){return q.test(e)?t.read(pt(e)):t.clone()}r=new XMLHttpRequest;r.onerror=r.onabort=function(){t.clone()};r.onload=function(){t.read(this.response)};if(i.checkCrossOrigin&&st(e)&&a.crossOrigin){e=nt(e)}r.open("get",e);r.responseType="arraybuffer";r.send()},read:function(e){var t=this;var i=t.options;var a=ht(e);var r=t.imageData;var s;var n;var o;if(a>1){t.url=ft(e);switch(a){case 2:n=-1;break;case 3:s=-180;break;case 4:o=-1;break;case 5:s=90;o=-1;break;case 6:s=90;break;case 7:s=90;n=-1;break;case 8:s=-90;break}}if(i.rotatable){r.rotate=s}if(i.scalable){r.scaleX=n;r.scaleY=o}t.clone()},clone:function(){var e=this;var t=e.element;var i=e.url;var a;var r;var s;var n;var o;if(e.options.checkCrossOrigin&&st(i)){a=t.crossOrigin;if(a){r=i}else{a="anonymous";r=nt(i)}}e.crossOrigin=a;e.crossOriginUrl=r;s=tt("img");if(a){s.crossOrigin=a}s.src=r||i;e.image=s;e._start=n=Be(e.start,e);e._stop=o=Be(e.stop,e);if(e.isImg){if(t.complete){e.start()}else{Ye(t,E,n)}}else{Ye(s,E,n);Ye(s,O,o);Ue(s,b);t.parentNode.insertBefore(s,t.nextSibling)}},start:function(e){var t=this;var i=t.isImg?t.element:t.image;if(e){qe(i,E,t._start);qe(i,O,t._stop)}ot(i,(function(e,i){ze(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i});t.ready=true;t.build()}))},stop:function(){var e=this;var t=e.image;qe(t,E,e._start);qe(t,O,e._stop);at(t);e.image=null},build:function(){var e=this;var t=e.options;var i=e.element;var a=e.image;var r;var s;var n;var o;var l;var c;var u;if(!e.ready){return}if(e.built){e.unbuild()}s=tt("div");s.innerHTML=vt.TEMPLATE;e.container=r=i.parentNode;e.cropper=n=et(s,"cropper-container")[0];e.canvas=o=et(n,"cropper-canvas")[0];e.dragBox=l=et(n,"cropper-drag-box")[0];e.cropBox=c=et(n,"cropper-crop-box")[0];e.viewBox=et(n,"cropper-view-box")[0];e.face=u=et(c,"cropper-face")[0];it(o,a);Ue(i,g);r.insertBefore(n,i.nextSibling);if(!e.isImg){Ae(a,b)}e.initPreview();e.bind();t.aspectRatio=he(0,t.aspectRatio)||NaN;t.viewMode=he(0,de(3,be(t.viewMode)))||0;if(t.autoCrop){e.cropped=true;if(t.modal){Ue(l,m)}}else{Ue(c,g)}if(!t.guides){Ue(et(c,"cropper-dashed"),g)}if(!t.center){Ue(et(c,"cropper-center"),g)}if(t.background){Ue(n,x)}if(!t.highlight){Ue(u,_)}if(t.cropBoxMovable){Ue(u,w);$e(u,Q,re)}if(!t.cropBoxResizable){Ue(et(c,"cropper-line"),g);Ue(et(c,"cropper-point"),g)}e.setDragMode(t.dragMode);e.render();e.built=true;e.setData(t.data);setTimeout((function(){if(Oe(t.built)){Ye(i,F,t.built,true)}Ke(i,F);Ke(i,R,e.getData());e.complete=true}),0)},unbuild:function(){var e=this;if(!e.built){return}e.built=false;e.complete=false;e.initialImageData=null;e.initialCanvasData=null;e.initialCropBoxData=null;e.containerData=null;e.canvasData=null;e.cropBoxData=null;e.unbind();e.resetPreview();e.previews=null;e.viewBox=null;e.cropBox=null;e.dragBox=null;e.canvas=null;e.container=null;at(e.cropper);e.cropper=null},render:function(){var e=this;e.initContainer();e.initCanvas();e.initCropBox();e.renderCanvas();if(e.cropped){e.renderCropBox()}},initContainer:function(){var e=this;var t=e.options;var i=e.element;var a=e.container;var r=e.cropper;var s;Ue(r,g);Ae(i,g);e.containerData=s={width:he(a.offsetWidth,p(t.minContainerWidth)||200),height:he(a.offsetHeight,p(t.minContainerHeight)||100)};Re(r,{width:s.width,height:s.height});Ue(i,g);Ae(r,g)},initCanvas:function(){var e=this;var t=e.options.viewMode;var i=e.containerData;var a=e.imageData;var r=pe(a.rotate)===90;var s=r?a.naturalHeight:a.naturalWidth;var n=r?a.naturalWidth:a.naturalHeight;var o=s/n;var l=i.width;var c=i.height;var u;if(i.height*o>i.width){if(t===3){l=i.height*o}else{c=i.width/o}}else{if(t===3){c=i.width/o}else{l=i.height*o}}u={naturalWidth:s,naturalHeight:n,aspectRatio:o,width:l,height:c};u.oldLeft=u.left=(i.width-l)/2;u.oldTop=u.top=(i.height-c)/2;e.canvasData=u;e.limited=t===1||t===2;e.limitCanvas(true,true);e.initialImageData=ze({},a);e.initialCanvasData=ze({},u)},limitCanvas:function(e,t){var i=this;var a=i.options;var r=a.viewMode;var s=i.containerData;var n=i.canvasData;var o=n.aspectRatio;var l=i.cropBoxData;var c=i.cropped&&l;var u;var d;var h;var f;if(e){u=p(a.minCanvasWidth)||0;d=p(a.minCanvasHeight)||0;if(r>1){u=he(u,s.width);d=he(d,s.height);if(r===3){if(d*o>u){u=d*o}else{d=u/o}}}else if(r>0){if(u){u=he(u,c?l.width:0)}else if(d){d=he(d,c?l.height:0)}else if(c){u=l.width;d=l.height;if(d*o>u){u=d*o}else{d=u/o}}}if(u&&d){if(d*o>u){d=u/o}else{u=d*o}}else if(u){d=u/o}else if(d){u=d*o}n.minWidth=u;n.minHeight=d;n.maxWidth=Infinity;n.maxHeight=Infinity}if(t){if(r){h=s.width-n.width;f=s.height-n.height;n.minLeft=de(0,h);n.minTop=de(0,f);n.maxLeft=he(0,h);n.maxTop=he(0,f);if(c&&i.limited){n.minLeft=de(l.left,l.left+l.width-n.width);n.minTop=de(l.top,l.top+l.height-n.height);n.maxLeft=l.left;n.maxTop=l.top;if(r===2){if(n.width>=s.width){n.minLeft=de(0,h);n.maxLeft=he(0,h)}if(n.height>=s.height){n.minTop=de(0,f);n.maxTop=he(0,f)}}}}else{n.minLeft=-n.width;n.minTop=-n.height;n.maxLeft=s.width;n.maxTop=s.height}}},renderCanvas:function(e){var t=this;var i=t.canvasData;var a=t.imageData;var r=a.rotate;var s;var n;if(t.rotated){t.rotated=false;n=ct({width:a.width,height:a.height,degree:r});s=n.width/n.height;if(s!==i.aspectRatio){i.left-=(n.width-i.width)/2;i.top-=(n.height-i.height)/2;i.width=n.width;i.height=n.height;i.aspectRatio=s;i.naturalWidth=a.naturalWidth;i.naturalHeight=a.naturalHeight;if(r%180){n=ct({width:a.naturalWidth,height:a.naturalHeight,degree:r});i.naturalWidth=n.width;i.naturalHeight=n.height}t.limitCanvas(true,false)}}if(i.width>i.maxWidth||i.width<i.minWidth){i.left=i.oldLeft}if(i.height>i.maxHeight||i.height<i.minHeight){i.top=i.oldTop}i.width=de(he(i.width,i.minWidth),i.maxWidth);i.height=de(he(i.height,i.minHeight),i.maxHeight);t.limitCanvas(false,true);i.oldLeft=i.left=de(he(i.left,i.minLeft),i.maxLeft);i.oldTop=i.top=de(he(i.top,i.minTop),i.maxTop);Re(t.canvas,{width:i.width,height:i.height,left:i.left,top:i.top});t.renderImage();if(t.cropped&&t.limited){t.limitCropBox(true,true)}if(e){t.output()}},renderImage:function(e){var t=this;var i=t.canvasData;var a=t.imageData;var r;var s;var n;var o;var l;if(a.rotate){s=ct({width:i.width,height:i.height,degree:a.rotate,aspectRatio:a.aspectRatio},true);n=s.width;o=s.height;r={width:n,height:o,left:(i.width-n)/2,top:(i.height-o)/2}}ze(a,r||{width:i.width,height:i.height,left:0,top:0});l=lt(a);Re(t.image,{width:a.width,height:a.height,marginLeft:a.left,marginTop:a.top,WebkitTransform:l,msTransform:l,transform:l});if(e){t.output()}},initCropBox:function(){var e=this;var t=e.options;var i=t.aspectRatio;var a=p(t.autoCropArea)||.8;var r=e.canvasData;var s={width:r.width,height:r.height};if(i){if(r.height*i>r.width){s.height=s.width/i}else{s.width=s.height*i}}e.cropBoxData=s;e.limitCropBox(true,true);s.width=de(he(s.width,s.minWidth),s.maxWidth);s.height=de(he(s.height,s.minHeight),s.maxHeight);s.width=he(s.minWidth,s.width*a);s.height=he(s.minHeight,s.height*a);s.oldLeft=s.left=r.left+(r.width-s.width)/2;s.oldTop=s.top=r.top+(r.height-s.height)/2;e.initialCropBoxData=ze({},s)},limitCropBox:function(e,t){var i=this;var a=i.options;var r=a.aspectRatio;var s=i.containerData;var n=i.canvasData;var o=i.cropBoxData;var l=i.limited;var c;var u;var d;var h;if(e){c=p(a.minCropBoxWidth)||0;u=p(a.minCropBoxHeight)||0;c=de(c,s.width);u=de(u,s.height);d=de(s.width,l?n.width:s.width);h=de(s.height,l?n.height:s.height);if(r){if(c&&u){if(u*r>c){u=c/r}else{c=u*r}}else if(c){u=c/r}else if(u){c=u*r}if(h*r>d){h=d/r}else{d=h*r}}o.minWidth=de(c,d);o.minHeight=de(u,h);o.maxWidth=d;o.maxHeight=h}if(t){if(l){o.minLeft=he(0,n.left);o.minTop=he(0,n.top);o.maxLeft=de(s.width,n.left+n.width)-o.width;o.maxTop=de(s.height,n.top+n.height)-o.height}else{o.minLeft=0;o.minTop=0;o.maxLeft=s.width-o.width;o.maxTop=s.height-o.height}}},renderCropBox:function(){var e=this;var t=e.options;var i=e.containerData;var a=e.cropBoxData;if(a.width>a.maxWidth||a.width<a.minWidth){a.left=a.oldLeft}if(a.height>a.maxHeight||a.height<a.minHeight){a.top=a.oldTop}a.width=de(he(a.width,a.minWidth),a.maxWidth);a.height=de(he(a.height,a.minHeight),a.maxHeight);e.limitCropBox(false,true);a.oldLeft=a.left=de(he(a.left,a.minLeft),a.maxLeft);a.oldTop=a.top=de(he(a.top,a.minTop),a.maxTop);if(t.movable&&t.cropBoxMovable){$e(e.face,Q,a.width===i.width&&a.height===i.height?ne:re)}Re(e.cropBox,{width:a.width,height:a.height,left:a.left,top:a.top});if(e.cropped&&e.limited){e.limitCanvas(true,true)}if(!e.disabled){e.output()}},output:function(){var e=this;e.preview();if(e.complete){Ke(e.element,R,e.getData())}},initPreview:function(){var e=this;var t=e.options.preview;var i=tt("img");var a=e.crossOrigin;var r=a?e.crossOriginUrl:e.url;var s;if(a){i.crossOrigin=a}i.src=r;it(e.viewBox,i);e.image2=i;if(!t){return}e.previews=s=n.querySelectorAll(t);Ie(s,(function(e){var t=tt("img");$e(e,K,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML});if(a){t.crossOrigin=a}t.src=r;t.style.cssText="display:block;"+"width:100%;"+"height:auto;"+"min-width:0!important;"+"min-height:0!important;"+"max-width:none!important;"+"max-height:none!important;"+'image-orientation:0deg!important;"';rt(e);it(e,t)}))},resetPreview:function(){Ie(this.previews,(function(e){var t=He(e,K);Re(e,{width:t.width,height:t.height});e.innerHTML=t.html;We(e,K)}))},preview:function(){var e=this;var t=e.imageData;var i=e.canvasData;var a=e.cropBoxData;var r=a.width;var s=a.height;var n=t.width;var o=t.height;var l=a.left-i.left-t.left;var c=a.top-i.top-t.top;var u=lt(t);var d={WebkitTransform:u,msTransform:u,transform:u};if(!e.cropped||e.disabled){return}Re(e.image2,ze({width:n,height:o,marginLeft:-l,marginTop:-c},d));Ie(e.previews,(function(e){var t=He(e,K);var i=t.width;var a=t.height;var u=i;var h=a;var p=1;if(r){p=i/r;h=s*p}if(s&&h>a){p=a/s;u=r*p;h=a}Re(e,{width:u,height:h});Re(Ze(e,"img")[0],ze({width:n*p,height:o*p,marginLeft:-l*p,marginTop:-c*p},d))}))},bind:function(){var e=this;var t=e.options;var a=e.element;var r=e.cropper;if(Oe(t.cropstart)){Ye(a,I,t.cropstart)}if(Oe(t.cropmove)){Ye(a,z,t.cropmove)}if(Oe(t.cropend)){Ye(a,B,t.cropend)}if(Oe(t.crop)){Ye(a,R,t.crop)}if(Oe(t.zoom)){Ye(a,V,t.zoom)}Ye(r,C,e._cropStart=Be(e.cropStart,e));if(t.zoomable&&t.zoomOnWheel){Ye(r,M,e._wheel=Be(e.wheel,e))}if(t.toggleDragModeOnDblclick){Ye(r,P,e._dblclick=Be(e.dblclick,e))}Ye(n,S,e._cropMove=Be(e.cropMove,e));Ye(n,T,e._cropEnd=Be(e.cropEnd,e));if(t.responsive){Ye(i,L,e._resize=Be(e.resize,e))}},unbind:function(){var e=this;var t=e.options;var a=e.element;var r=e.cropper;if(Oe(t.cropstart)){qe(a,I,t.cropstart)}if(Oe(t.cropmove)){qe(a,z,t.cropmove)}if(Oe(t.cropend)){qe(a,B,t.cropend)}if(Oe(t.crop)){qe(a,R,t.crop)}if(Oe(t.zoom)){qe(a,V,t.zoom)}qe(r,C,e._cropStart);if(t.zoomable&&t.zoomOnWheel){qe(r,M,e._wheel)}if(t.toggleDragModeOnDblclick){qe(r,P,e._dblclick)}qe(n,S,e._cropMove);qe(n,T,e._cropEnd);if(t.responsive){qe(i,L,e._resize)}},resize:function(){var e=this;var t=e.options.restore;var i=e.container;var a=e.containerData;var r;var s;var n;if(e.disabled||!a){return}n=i.offsetWidth/a.width;if(n!==1||i.offsetHeight!==a.height){if(t){r=e.getCanvasData();s=e.getCropBoxData()}e.render();if(t){e.setCanvasData(Ie(r,(function(e,t){r[t]=e*n})));e.setCropBoxData(Ie(s,(function(e,t){s[t]=e*n})))}}},dblclick:function(){var e=this;if(e.disabled){return}e.setDragMode(Ve(e.dragBox,y)?ne:se)},wheel:function(e){var t=this;var i=Ge(e);var a=p(t.options.wheelZoomRatio)||.1;var r=1;if(t.disabled){return}Qe(i);if(t.wheeling){return}t.wheeling=true;setTimeout((function(){t.wheeling=false}),50);if(i.deltaY){r=i.deltaY>0?1:-1}else if(i.wheelDelta){r=-i.wheelDelta/120}else if(i.detail){r=i.detail>0?1:-1}t.zoom(-r*a,i)},cropStart:function(e){var t=this;var i=t.options;var a=Ge(e);var r=a.touches;var s;var n;var o;if(t.disabled){return}if(r){s=r.length;if(s>1){if(i.zoomable&&i.zoomOnTouch&&s===2){n=r[1];t.startX2=n.pageX;t.startY2=n.pageY;o=oe}else{return}}n=r[0]}o=o||He(a.target,Q);if(U.test(o)){if(Ke(t.element,I,{originalEvent:a,action:o})===false){return}Qe(a);t.action=o;t.cropping=false;t.startX=n?n.pageX:a.pageX;t.startY=n?n.pageY:a.pageY;if(o===se){t.cropping=true;Ue(t.dragBox,m)}}},cropMove:function(e){var t=this;var i=t.options;var a=Ge(e);var r=a.touches;var s=t.action;var n;var o;if(t.disabled){return}if(r){n=r.length;if(n>1){if(i.zoomable&&i.zoomOnTouch&&n===2){o=r[1];t.endX2=o.pageX;t.endY2=o.pageY}else{return}}o=r[0]}if(s){if(Ke(t.element,z,{originalEvent:a,action:s})===false){return}Qe(a);t.endX=o?o.pageX:a.pageX;t.endY=o?o.pageY:a.pageY;t.change(a.shiftKey,s===oe?a:null)}},cropEnd:function(e){var t=this;var i=t.options;var a=Ge(e);var r=t.action;if(t.disabled){return}if(r){Qe(a);if(t.cropping){t.cropping=false;Ne(t.dragBox,m,t.cropped&&i.modal)}t.action="";Ke(t.element,B,{originalEvent:a,action:r})}},change:function(e,t){var i=this;var a=i.options;var r=a.aspectRatio;var s=i.action;var n=i.containerData;var o=i.canvasData;var l=i.cropBoxData;var c=l.width;var u=l.height;var d=l.left;var h=l.top;var p=d+c;var f=h+u;var v=0;var m=0;var b=n.width;var _=n.height;var w=true;var y;var k;if(!r&&e){r=c&&u?c/u:1}if(i.limited){v=l.minLeft;m=l.minTop;b=v+de(n.width,o.left+o.width);_=m+de(n.height,o.top+o.height)}k={x:i.endX-i.startX,y:i.endY-i.startY};if(r){k.X=k.y*r;k.Y=k.x/r}switch(s){case re:d+=k.x;h+=k.y;break;case G:if(k.x>=0&&(p>=b||r&&(h<=m||f>=_))){w=false;break}c+=k.x;if(r){u=c/r;h-=k.Y/2}if(c<0){s=X;c=0}break;case Z:if(k.y<=0&&(h<=m||r&&(d<=v||p>=b))){w=false;break}u-=k.y;h+=k.y;if(r){c=u*r;d+=k.X/2}if(u<0){s=J;u=0}break;case X:if(k.x<=0&&(d<=v||r&&(h<=m||f>=_))){w=false;break}c-=k.x;d+=k.x;if(r){u=c/r;h+=k.Y/2}if(c<0){s=G;c=0}break;case J:if(k.y>=0&&(f>=_||r&&(d<=v||p>=b))){w=false;break}u+=k.y;if(r){c=u*r;d-=k.X/2}if(u<0){s=Z;u=0}break;case ie:if(r){if(k.y<=0&&(h<=m||p>=b)){w=false;break}u-=k.y;h+=k.y;c=u*r}else{if(k.x>=0){if(p<b){c+=k.x}else if(k.y<=0&&h<=m){w=false}}else{c+=k.x}if(k.y<=0){if(h>m){u-=k.y;h+=k.y}}else{u-=k.y;h+=k.y}}if(c<0&&u<0){s=te;u=0;c=0}else if(c<0){s=ae;c=0}else if(u<0){s=ee;u=0}break;case ae:if(r){if(k.y<=0&&(h<=m||d<=v)){w=false;break}u-=k.y;h+=k.y;c=u*r;d+=k.X}else{if(k.x<=0){if(d>v){c-=k.x;d+=k.x}else if(k.y<=0&&h<=m){w=false}}else{c-=k.x;d+=k.x}if(k.y<=0){if(h>m){u-=k.y;h+=k.y}}else{u-=k.y;h+=k.y}}if(c<0&&u<0){s=ee;u=0;c=0}else if(c<0){s=ie;c=0}else if(u<0){s=te;u=0}break;case te:if(r){if(k.x<=0&&(d<=v||f>=_)){w=false;break}c-=k.x;d+=k.x;u=c/r}else{if(k.x<=0){if(d>v){c-=k.x;d+=k.x}else if(k.y>=0&&f>=_){w=false}}else{c-=k.x;d+=k.x}if(k.y>=0){if(f<_){u+=k.y}}else{u+=k.y}}if(c<0&&u<0){s=ie;u=0;c=0}else if(c<0){s=ee;c=0}else if(u<0){s=ae;u=0}break;case ee:if(r){if(k.x>=0&&(p>=b||f>=_)){w=false;break}c+=k.x;u=c/r}else{if(k.x>=0){if(p<b){c+=k.x}else if(k.y>=0&&f>=_){w=false}}else{c+=k.x}if(k.y>=0){if(f<_){u+=k.y}}else{u+=k.y}}if(c<0&&u<0){s=ae;u=0;c=0}else if(c<0){s=te;c=0}else if(u<0){s=ie;u=0}break;case ne:i.move(k.x,k.y);w=false;break;case oe:i.zoom(function(e,t,i,a){var r=me(e*e+t*t);var s=me(i*i+a*a);return(s-r)/r}(pe(i.startX-i.startX2),pe(i.startY-i.startY2),pe(i.endX-i.endX2),pe(i.endY-i.endY2)),t);i.startX2=i.endX2;i.startY2=i.endY2;w=false;break;case se:if(!k.x||!k.y){w=false;break}y=Xe(i.cropper);d=i.startX-y.left;h=i.startY-y.top;c=l.minWidth;u=l.minHeight;if(k.x>0){s=k.y>0?ee:ie}else if(k.x<0){d-=c;s=k.y>0?te:ae}if(k.y<0){h-=u}if(!i.cropped){Ae(i.cropBox,g);i.cropped=true;if(i.limited){i.limitCropBox(true,true)}}break}if(w){l.width=c;l.height=u;l.left=d;l.top=h;i.action=s;i.renderCropBox()}i.startX=i.endX;i.startY=i.endY},crop:function(){var e=this;if(e.built&&!e.disabled){if(!e.cropped){e.cropped=true;e.limitCropBox(true,true);if(e.options.modal){Ue(e.dragBox,m)}Ae(e.cropBox,g)}e.setCropBoxData(e.initialCropBoxData)}return e},reset:function(){var e=this;if(e.built&&!e.disabled){e.imageData=ze({},e.initialImageData);e.canvasData=ze({},e.initialCanvasData);e.cropBoxData=ze({},e.initialCropBoxData);e.renderCanvas();if(e.cropped){e.renderCropBox()}}return e},clear:function(){var e=this;if(e.cropped&&!e.disabled){ze(e.cropBoxData,{left:0,top:0,width:0,height:0});e.cropped=false;e.renderCropBox();e.limitCanvas();e.renderCanvas();Ae(e.dragBox,m);Ue(e.cropBox,g)}return e},replace:function(e,t){var i=this;if(!i.disabled&&e){if(i.isImg){i.element.src=e}if(t){i.url=e;i.image.src=e;if(i.built){i.image2.src=e;Ie(i.previews,(function(t){Ze(t,"img")[0].src=e}))}}else{if(i.isImg){i.replaced=true}i.options.data=null;i.load(e)}}return i},enable:function(){var e=this;if(e.built){e.disabled=false;Ae(e.cropper,k)}return e},disable:function(){var e=this;if(e.built){e.disabled=true;Ue(e.cropper,k)}return e},destroy:function(){var e=this;var t=e.element;var i=e.image;if(e.ready){if(e.isImg&&e.replaced){t.src=e.originalUrl}e.unbuild();Ae(t,g)}else{if(e.isImg){qe(t,E,e.start)}else if(i){at(i)}}We(t,v);return e},move:function(e,t){var i=this;var a=i.canvasData;return i.moveTo(Me(e)?e:a.left+p(e),Me(t)?t:a.top+p(t))},moveTo:function(e,t){var i=this;var a=i.canvasData;var r=false;if(Me(t)){t=e}e=p(e);t=p(t);if(i.built&&!i.disabled&&i.options.movable){if(Te(e)){a.left=e;r=true}if(Te(t)){a.top=t;r=true}if(r){i.renderCanvas(true)}}return i},zoom:function(e,t){var i=this;var a=i.canvasData;e=p(e);if(e<0){e=1/(1-e)}else{e=1+e}return i.zoomTo(a.width*e/a.naturalWidth,t)},zoomTo:function(e,t){var i=this;var a=i.options;var r=i.canvasData;var s=r.width;var n=r.height;var o=r.naturalWidth;var l=r.naturalHeight;var c;var u;var d;var h;e=p(e);if(e>=0&&i.built&&!i.disabled&&a.zoomable){c=o*e;u=l*e;if(Ke(i.element,V,{originalEvent:t,oldRatio:s/o,ratio:c/o})===false){return i}if(t){d=Xe(i.cropper);h=t.touches?Je(t.touches):{pageX:t.pageX,pageY:t.pageY};r.left-=(c-s)*((h.pageX-d.left-r.left)/s);r.top-=(u-n)*((h.pageY-d.top-r.top)/n)}else{r.left-=(c-s)/2;r.top-=(u-n)/2}r.width=c;r.height=u;i.renderCanvas(true)}return i},rotate:function(e){var t=this;return t.rotateTo((t.imageData.rotate||0)+p(e))},rotateTo:function(e){var t=this;e=p(e);if(Te(e)&&t.built&&!t.disabled&&t.options.rotatable){t.imageData.rotate=e%360;t.rotated=true;t.renderCanvas(true)}return t},scale:function(e,t){var i=this;var a=i.imageData;var r=false;if(Me(t)){t=e}e=p(e);t=p(t);if(i.built&&!i.disabled&&i.options.scalable){if(Te(e)){a.scaleX=e;r=true}if(Te(t)){a.scaleY=t;r=true}if(r){i.renderImage(true)}}return i},scaleX:function(e){var t=this;var i=t.imageData.scaleY;return t.scale(e,Te(i)?i:1)},scaleY:function(e){var t=this;var i=t.imageData.scaleX;return t.scale(Te(i)?i:1,e)},getData:function(e){var t=this;var i=t.options;var a=t.imageData;var r=t.canvasData;var s=t.cropBoxData;var n;var o;if(t.built&&t.cropped){o={x:s.left-r.left,y:s.top-r.top,width:s.width,height:s.height};n=a.width/a.naturalWidth;Ie(o,(function(t,i){t=t/n;o[i]=e?be(t):t}))}else{o={x:0,y:0,width:0,height:0}}if(i.rotatable){o.rotate=a.rotate||0}if(i.scalable){o.scaleX=a.scaleX||1;o.scaleY=a.scaleY||1}return o},setData:function(e){var t=this;var i=t.options;var a=t.imageData;var r=t.canvasData;var s={};var n;var o;var l;if(Oe(e)){e=e.call(t.element)}if(t.built&&!t.disabled&&Le(e)){if(i.rotatable){if(Te(e.rotate)&&e.rotate!==a.rotate){a.rotate=e.rotate;t.rotated=n=true}}if(i.scalable){if(Te(e.scaleX)&&e.scaleX!==a.scaleX){a.scaleX=e.scaleX;o=true}if(Te(e.scaleY)&&e.scaleY!==a.scaleY){a.scaleY=e.scaleY;o=true}}if(n){t.renderCanvas()}else if(o){t.renderImage()}l=a.width/a.naturalWidth;if(Te(e.x)){s.left=e.x*l+r.left}if(Te(e.y)){s.top=e.y*l+r.top}if(Te(e.width)){s.width=e.width*l}if(Te(e.height)){s.height=e.height*l}t.setCropBoxData(s)}return t},getContainerData:function(){var e=this;return e.built?e.containerData:{}},getImageData:function(){var e=this;return e.ready?e.imageData:{}},getCanvasData:function(){var e=this;var t=e.canvasData;var i={};if(e.built){Ie(["left","top","width","height","naturalWidth","naturalHeight"],(function(e){i[e]=t[e]}))}return i},setCanvasData:function(e){var t=this;var i=t.canvasData;var a=i.aspectRatio;if(Oe(e)){e=e.call(t.element)}if(t.built&&!t.disabled&&Le(e)){if(Te(e.left)){i.left=e.left}if(Te(e.top)){i.top=e.top}if(Te(e.width)){i.width=e.width;i.height=e.width/a}else if(Te(e.height)){i.height=e.height;i.width=e.height*a}t.renderCanvas(true)}return t},getCropBoxData:function(){var e=this;var t=e.cropBoxData;var i;if(e.built&&e.cropped){i={left:t.left,top:t.top,width:t.width,height:t.height}}return i||{}},setCropBoxData:function(e){var t=this;var i=t.cropBoxData;var a=t.options.aspectRatio;var r;var s;if(Oe(e)){e=e.call(t.element)}if(t.built&&t.cropped&&!t.disabled&&Le(e)){if(Te(e.left)){i.left=e.left}if(Te(e.top)){i.top=e.top}if(Te(e.width)){r=true;i.width=e.width}if(Te(e.height)){s=true;i.height=e.height}if(a){if(r){i.height=i.width/a}else if(s){i.width=i.height*a}}t.renderCropBox()}return t},getCroppedCanvas:function(e){var t=this;var i;var a;var r;var s;var n;var o;var l;var c;var u;var d;var h;if(!t.built||!ce){return}if(!t.cropped){return ut(t.image,t.imageData)}if(!Le(e)){e={}}h=t.getData();i=h.width;a=h.height;c=i/a;if(Le(e)){n=e.width;o=e.height;if(n){o=n/c;l=n/i}else if(o){n=o*c;l=o/a}}r=ge(n||i);s=ge(o||a);u=tt("canvas");u.width=r;u.height=s;d=u.getContext("2d");if(e.fillColor){d.fillStyle=e.fillColor;d.fillRect(0,0,r,s)}d.drawImage.apply(d,function(){var e=ut(t.image,t.imageData);var r=e.width;var s=e.height;var n=t.canvasData;var o=[e];var c=h.x+n.naturalWidth*(pe(h.scaleX||1)-1)/2;var u=h.y+n.naturalHeight*(pe(h.scaleY||1)-1)/2;var d;var p;var f;var v;var m;var b;if(c<=-i||c>r){c=d=f=m=0}else if(c<=0){f=-c;c=0;d=m=de(r,i+c)}else if(c<=r){f=0;d=m=de(i,r-c)}if(d<=0||u<=-a||u>s){u=p=v=b=0}else if(u<=0){v=-u;u=0;p=b=de(s,a+u)}else if(u<=s){v=0;p=b=de(a,s-u)}o.push(ge(c),ge(u),ge(d),ge(p));if(l){f*=l;v*=l;m*=l;b*=l}if(m>0&&b>0){o.push(ge(f),ge(v),ge(m),ge(b))}return o}.call(t));return u},setAspectRatio:function(e){var t=this;var i=t.options;if(!t.disabled&&!Me(e)){i.aspectRatio=he(0,e)||NaN;if(t.built){t.initCropBox();if(t.cropped){t.renderCropBox()}}}return t},setDragMode:function(e){var t=this;var i=t.options;var a=t.dragBox;var r=t.face;var s;var n;if(t.ready&&!t.disabled){s=e===se;n=i.movable&&e===ne;e=s||n?e:le;$e(a,Q,e);Ne(a,y,s);Ne(a,w,n);if(!i.cropBoxMovable){$e(r,Q,e);Ne(r,y,s);Ne(r,w,n)}}return t}};vt.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:true,restore:true,checkCrossOrigin:true,checkOrientation:true,modal:true,guides:true,center:true,highlight:true,background:true,autoCrop:true,autoCropArea:.8,movable:true,rotatable:true,scalable:true,zoomable:true,zoomOnTouch:true,zoomOnWheel:true,wheelZoomRatio:.1,cropBoxMovable:true,cropBoxResizable:true,toggleDragModeOnDblclick:true,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null};vt.TEMPLATE=function(e,t){t=t.split(",");return e.replace(/\d+/g,(function(e){return t[e]}))}('<0 6="5-container"><0 6="5-wrap-9"><0 6="5-canvas"></0></0><0 6="5-drag-9"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-center"></1><1 6="5-face"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,action,data,point,cropper,class,line,dashed,box");var mt=i.Cropper;vt.noConflict=function(){i.Cropper=mt;return vt};vt.setDefaults=function(e){ze(vt.DEFAULTS,e)};if(true){!(a=[],r=function(){return vt}.apply(t,a),r!==undefined&&(e.exports=r))}if(!s){i.Cropper=vt}return vt}))},818:function(e,t,i){"use strict";var a=i(0);var r=i(769);e.exports=r.extend({name:"List",el:false,templatePartial:function e(){return"Setup templatePartial for "+this.name+".js"},collection:null,autoScrollToStart:true,autoScrollPadding:150,endless:false,__needPartialRender:false,__partialPrepend:false,__applyPartialTemplate:function e(t){if(this.__partialPrepend){this.$el.prepend(t)}else{this.$el.append(t)}},_applyTemplate:function e(t,i){if(this.__needPartialRender){this.__applyPartialTemplate(t)}else{r.prototype._applyTemplate.apply(this,[t,i])}},__renderPartialTemplate:function e(t,i){return this.templatePartial.call(this,i).trim()},renderTemplate:function e(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}if(this.__needPartialRender){return this.__renderPartialTemplate.apply(this,i)}return r.prototype.renderTemplate.apply(this,i)},initialize:function e(){this.listenToCollection()},listenToCollection:function e(){this.listenTo(this.collection,{update:this._onCollectionUpdate,reset:this._onCollectionReset})},scrollToStart:function e(){if(!this.endless&&this.autoScrollToStart){var t=this.$el.offset().top-this.autoScrollPadding;var i=Math.max(0,t);window.scrollTo(0,i)}},_onCollectionUpdate:function e(t,i){this.__needPartialRender=this.endless;this.__partialPrepend=a.result(i,"at")===0;this.render();this.scrollToStart()},_onCollectionReset:function e(){this.__needPartialRender=false;this.render();this.scrollToStart()}})},823:function(e,t,i){"use strict";var a=i(4),r=a.languages;var s=r.accepts;e.exports={ContactBox:function e(t){return{stats:["image","editorial","video"]}},OurApps:function e(t){return{isEnabled:t.lang!==s.zh}},About:function e(t){return{socialLinksEnabled:t.lang!==s.zh}},FileViewThumb:function e(t){return{isSharingEnabled:t.lang!==s.zh}},ShareFolder:function e(t){return{socialTabEnabled:t.lang!==s.zh}},SearchHeaderFolder:function e(t){return{isSharingEnabled:t.user.isLoggedIn()||t.lang!==s.zh}},FileViewModals:function e(t){return{shouldHideTitle:t.features.isFeatureOnValue("NoTitleModal")}}}},825:function(e,t,i){},829:function(e,t,i){"use strict";i(830);i(831);var a=i(0);var r=i(17),s=r.$;var n=i(23).fileViewButtons;var o=i(556);var l=i(804);var c=i(832);e.exports=l.extend({name:"FilesList",el:false,autoScrollToStart:false,events:{"click ._to-cart":"onCartClick","click ._to-favorites":"onFavoritesClick","click ._to-similar":"onSimilarClick","click ._cover":"onCoverClick","contextmenu .file-box":"onCustomFileClick","mouseup .file-box":"onCustomFileClick"},trackImpression:function e(){if(this.collection.length&&this.$el.is(":visible")){this.app.observer.broadcast("Track:UE:File:UserSeeFileThumb",{files:this.collection.serialize(),relatedMode:this.relatedMode,view:this.name})}},setFileEventsListeners:function e(){var t=this;this.on("clientAfterRender",this.markFavorites);this.listenTo(this.app.observer,{"Favorites:PanelCacheUpdate":this.onFavoritesPanelCacheUpdate,"Cart:added":function e(i){return t.markCart(true,i.fileId)},"Cart:removed":function e(i){return t.markCart(false,i.fileId)},"Folder:AddCover":function e(i){return t.markCover(true,i.fileId)},"Folder:RemoveCover":function e(){return t.markCover(false)}})},getFileThumbID:function e(t){return+s(t).parents("[data-id]").data("id")},onCartClick:function e(t){var i=this;t.stopPropagation();t.preventDefault();var a=this.getFileModel(t.currentTarget);this.app.observer.broadcast(a.get("inCart")?"Track:UE:File:RemoveFromCart":"Track:UE:File:AddToCart",{id:a.get("id"),file:a.serialize(),position:this.collection.indexOf(a),view:this.name});this.app.observer.fire(a.get("inCart")?"Cart:remove":"Cart:add",{fileId:a.get("id")});if(!a.get("inCart")&&!this.app.user.isLoggedIn()){this.app.store.get("ModalsManager").show("SignupModal",{app:this.app,title:this.tr("Add to Cart?"),subTitle:a.get("type")==="video"?this.tr('<span class="%s">Create your Account</span> to add this video to your Cart',"sub-text"):this.tr('<span class="%s">Create your Account</span> to add this image to your Cart',"sub-text")}).then((function(){return i.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:i.name+"/addToCart"})})).catch((function(){}))}},onFavoritesClick:function e(t){t.stopPropagation();t.preventDefault();var i=this.getFileModel(t.currentTarget);this.app.observer.broadcast(i.get("inFavorites")?"Track:UE:File:RemoveFromFavorites":"Track:UE:File:AddToFavorites",{id:i.get("id"),file:i.serialize(),position:this.collection.indexOf(i),view:this.name});if(!i.get("inFavorites")){this.app.store.link("FileForFavorite",i)}this.app.observer.fire("Favorites:ToggleFile",{id:i.get("id")})},onSimilarClick:function e(t){t.stopPropagation();t.preventDefault();var i=this.getFileModel(t.currentTarget);this.app.observer.broadcast("Track:UE:File:ToSimilar",{file:i,position:this.collection.indexOf(i)+1});var a=i.makeRelatedUrl({relatedTo:"similar"});this.app.router.redirect(a)},onCoverClick:function e(t){t.stopPropagation();t.preventDefault();if(this.$(t.currentTarget).hasClass("active")){this.app.observer.fire("Folder:RemoveCover")}else{var i=this.getFileModel(t.currentTarget);this.coverCrop(i)}},trackNewTabClick:function e(t,i){var a=this.$(t).closest("[data-id]").data("id");var r=this.collection.get(a);this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"FileThumb",target:{target:"fileView",targetId:a},params:Object.assign(r&&r.toTracking()||{},i,{view:this.name})})},onCustomFileClick:function e(t){if(![o.rightMouse,o.middleMouse].includes(t.which)){return}this.trackNewTabClick(t.currentTarget)},onFavoritesPanelCacheUpdate:function e(t){var i=t.folderId,a=t.options,r=a===void 0?{}:a;var s=this.app.store.get("FolderCache");var n=this.app.store.get("Folder");if(!s){return}var o=r.changes,l=r.refetch;var c=this.collection.syncWithPanelCache&&n.get("id")===i;if(c){var u=o?o.added.map((function(e){return e.id})):[];var d=o?o.removed.map((function(e){return e.id})):[];if(u.length&&l){this.collection.fetch();return}if(d.length){this.collection.remove(d);return}}this.markFavorites()},markFavorites:function e(){var t=this;var i=this.app.store.get("FolderState");var r=i&&i.get("folderID");var s=this.app.store.get("FolderCache");if(!s){return}var o=this.app.store.get("Folder");var l=o&&o.get("id")===r;this.collection.each((function(e){var i=!!s.get(e.get("id"));var r=i?"removeFavorites":"addToFavorites";var o=a.findWhere(n,{key:r}).label;e.set({inFavorites:i});var c=t.$('[data-id="'+e.get("id")+'"]');c.find("._label-in-favorites").toggleClass("hidden",l||!i);c.find("._to-favorites").toggleClass("active",i).attr({title:o})}))},markCart:function e(t,i){var r=this;var s=this.collection.where((function(e){return a.contains(i,e.get("id"))}));a.each(s,(function(e){e.set("inCart",t);var i=r.$("[data-id="+e.get("id")+"]");i.find("._label-in-cart").toggleClass("hidden",!t);i.find("._to-cart").toggleClass("active",t).attr({title:a.findWhere(n,{key:t?"removeFromCart":"addToCart"}).label})}))},markCover:function e(t,i){var a=this.app.store.get("Folder");if(a){this.$("._cover.active").removeClass("active");if(t){this.$("[data-id="+i+"] ._cover").addClass("active")}}},coverCrop:function e(t){var i=new c({app:this.app,file:t,destroyOnHide:true});i.show()},getFileModel:function e(t){return this.collection.get(this.getFileThumbID(t))}})},830:function(e,t,i){},831:function(e,t,i){},832:function(e,t,i){"use strict";var a=i(563);var r=i(833);e.exports=a.extend({name:"CoverCrop",initialize:function e(){var t=this;this.title=this.tr("Cover Crop");this.body=function(){return new r({file:t.file,app:t.app})};this.footer=[{label:this.tr("Cancel"),hide:true},{label:this.tr("Ok"),color:"blue",defaultAction:true,callback:"cropCallback"}]},cropCallback:function e(){var t=this;var i=this.app.store.get("Folder");this.closeOnOverlayClick=true;this.$el.addClass("modal_loading");this.listenToOnce(i,"sync",(function(){t.app.observer.fire("Folder:AddCover",{fileId:t.file.get("id")});t.hide()}));this.findView("CoverCropBody").crop()}})},833:function(e,t,i){"use strict";var a=i(805);var r=i(834);var s=i(546);var n=i(78);var o=450;var l=5;var c=1600;e.exports=s.extend({name:"CoverCropBody",el:false,template:r,prepareRender:function e(){this.sizes=this.getThumbSizes()},serialize:function e(){return{sizes:this.sizes,url:n.getThumbUrl({file:this.file.serialize(),size:"wideSmall",protocol:this.app.parsedUrl.protocol})}},clientAfterRender:function e(){this.cropper=new a(this.$("._img").get(0),{aspectRatio:l,minCropBoxWidth:this.sizes.width,minContainerHeight:this.sizes.height,zoomable:false})},getThumbSizes:function e(){var t=this.file.get("width");var i=this.file.get("height");if(t>i){return{width:o,height:Math.floor(i*o/t)}}return{width:Math.floor(t*o/i),height:o}},crop:function e(){var t=this.app.store.get("Folder");var i=this.cropper.getCropBoxData();var a=this.sizes.width/this.sizes.height>l;var r=c/this.sizes.width;var s=Object.assign({fileId:this.file.get("id"),folderId:t.get("id")},{boxWidth:c,boxHeight:Math.floor(c*this.sizes.height/this.sizes.width),width:a?Math.floor(i.width*r):c,height:Math.floor(i.height*r),top:Math.floor(i.top*r),left:Math.floor(i.left*r)});t.save({coverCropData:s})}})},834:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="cover-crop" style="width: '+i(t.sizes.width)+'px;"><div class="cover-crop__wrap"><img class="cover-crop__img _img" src="'+t.url+'" style="width: '+i(t.sizes.width)+"px; height: "+i(t.sizes.height)+'px;" /></div></div>';return a}},836:function(e,t,i){"use strict";(function(e){var t=i(0);var a=i(17),r=a.$;var s=i(24),n=s.capitalize;var o=i(9),l=o.getLogger;var c=l(e);i(870);var u=function(){function e(e,i){this.element=e;this.$items=[];this.$navItems=[];this.itemsCount=0;this.currentIndex=null;this.preparations={};this.timer=null;this.options=t.extend({animationSlide:4500,animationShow:2e3,holder:"._slider-holder",element:"._slider-item",navElement:"._slider-navigation",navArrowElement:"._slider-arrow",effect:"fade",blindsBars:7,blindsBarDelay:50,autorun:true,navigation:true,prevSlideClass:"",nextSlideClass:"",activeSlideClass:"",activeNavigationClass:"active",preventNavigationClick:true,adjacentSlides:false,arrowNavigation:false,slideOnlyForward:false,slideOnTouchMove:false,visibleSlides:1,offset:0},i);this.element.data("GallerySlider",this);this.init()}var i=e.prototype;i.init=function e(){this.initElements();this.prepareEffect();if(this.options.navigation){this.prepareNavigation()}if(this.options.autorun){this.start()}};i.initElements=function e(){this.$items=this.element.find(this.options.element);this.itemsCount=this.$items.length;if(this.itemsCount===0){c.debug("There are no elements for display");return}this.currentIndex=this.$items.filter(":visible:eq(0)").index()};i.prepareEffect=function e(){var i=n(this.options.effect);if(t.isFunction(this["_prepare"+i])){this["_prepare"+i]()}};i.prepareNavigation=function e(){var t=this;this.$navItems=this.element.find(this.options.navElement);this.$navItems.off("click.gallerySlider").on("click.gallerySlider",(function(e){if(t.options.preventNavigationClick){e.stopPropagation()}t.slide(r(e.currentTarget).index());if(t.options.autorun){t.start()}}));if(this.options.arrowNavigation){this.$navArrowItems=this.element.find(this.options.navArrowElement);this.$navArrowItems.off("click.gallerySlider").on("click.gallerySlider",(function(e){if(t.options.preventNavigationClick){e.stopPropagation()}var i=r(e.currentTarget).attr("data-direction")*1;var a=t.$navItems.filter("."+t.options.activeNavigationClass).index();if(a===0&&i<0){t.slide(t.$navItems.length-1)}else if(a===t.$navItems.length-1&&i>0){t.slide(0)}else{t.slide(a+i)}if(t.options.autorun){t.start()}}))}if(this.$navItems.filter("."+this.options.activeNavigationClass).length===0){this.$navItems.eq(0).addClass(this.options.activeNavigationClass)}};i.start=function e(){var i=this;if(this.timer){clearTimeout(this.timer)}this.timer=t.delay((function(){i.next();i.start()}),this.options.animationSlide)};i.next=function e(){this.slide(this.currentIndex===this.itemsCount-1?0:this.currentIndex+1)};i.slide=function e(i){if(i===this.currentIndex||!this.$items[i]){return}var a=n(this.options.effect);var r=t.isFunction(this["_exec"+a])?"_exec"+a:"_execSlide";this[r](this.$items.eq(this.currentIndex),this.$items.eq(i),this.options.slideOnlyForward||this.currentIndex<i?"next":"prev",i);this.currentIndex=i;this.$items.removeClass(this.options.activeSlideClass);this.$items.eq(i).addClass(this.options.activeSlideClass);if(this.options.adjacentSlides){this.$items.removeClass(this.options.prevSlideClass+" "+this.options.nextSlideClass);if(i+1===this.$items.length){this.$items.eq(i-1).addClass(this.options.prevSlideClass);this.$items.eq(0).addClass(this.options.nextSlideClass)}else if(i===0){this.$items.eq(this.$items.length-1).addClass(this.options.prevSlideClass);this.$items.eq(i+1).addClass(this.options.nextSlideClass)}else{this.$items.eq(i-1).addClass(this.options.prevSlideClass);this.$items.eq(i+1).addClass(this.options.nextSlideClass)}}if(this.options.navigation){this.$navItems.removeClass(this.options.activeNavigationClass).eq(i).addClass(this.options.activeNavigationClass)}};i.getDelay=function e(){return Math.max(this.preparations.barsDelay,this.options.animationShow)};i.css3=function e(t,i){var a={};var r=["webkit","moz","ms","o"];Object.keys(i).forEach((function(e){for(var t=0;t<r.length;t+=1){a["-"+r[t]+"-prop"]=i[e]}a[e]=i[e]}));return t.css(a)};i._prepareBlinds=function e(){this.preparations.barClass="dpg-bar";this.preparations.bar=r("<i />",{class:this.preparations.barClass});this.preparations.barsDelay=this.options.blindsBarDelay*this.options.blindsBars+this.options.animationShow;this.$items.each((function(e,t){var i=r(t);var a=i.find("img");i.data({image:a.attr("src")})}))};i._prepareFade=function e(){this.$items.removeClass("hidden").hide().eq(this.currentIndex).show()};i._prepareSlide=function e(){var t=this;this.$items.removeClass("hidden").hide().eq(this.currentIndex).show();if(this.options.effect==="slide"&&this.options.slideOnTouchMove){this.element.on("touchstart.gallerySlider",(function(e){e.stopPropagation();var i=e.originalEvent.touches[0].pageX;r(e.currentTarget).on("touchmove.gallerySlider",(function(e){e.stopPropagation();var a=e.originalEvent.touches[0].pageX;if(i>a+10){t.slide(t.currentIndex?t.currentIndex-1:t.$items.length-1)}else if(i<a-10){t.slide(t.currentIndex<t.$items.length-1?t.currentIndex+1:0)}r(e.currentTarget).off("touchmove.gallerySlider")}))}))}};i._prepareMove=function e(){var i=this;if(this.options.effect==="move"){var a=this.$items.eq(0).outerWidth()*this.options.visibleSlides;this.element.find(this.options.holder).off("ps-scroll-x.gallerySlider").on("ps-scroll-x.gallerySlider",t.throttle((function(){if(i.selfScroll!==true){var e=Math.floor(i.element.find(i.options.holder).scrollLeft()/a);i.currentIndex=e;i.$navItems.removeClass(i.options.activeNavigationClass);i.$navItems.eq(e).addClass(i.options.activeNavigationClass)}}),10))}};i._execSlide=function e(t,i,a){var s=t.width();if(this.options.slideOnlyForward){t.hide()}else{t.stop(true).animate({left:a==="next"?-s:s},this.options.animationShow,(function(){r(this).hide().css("left",0)}))}i.stop(true).css("left",a==="next"?s:-s).show().animate({left:0},this.options.animationShow)};i._execBlinds=function e(i,a){var r=this;var s=i.width();var n=i.height();var o=s>=n?"round":"ceil";var l=Math[o](s/this.options.blindsBars);var c=i.data("image");i.css("z-index","1001").hide().find("a").hide();a.css("z-index","1000").show().find("a").show();for(var u=0;u<=this.options.blindsBars-1;u+=1){var d=l*u;var h=this.preparations.bar.clone();h.css({left:d+"px",width:l+"px",height:n+"px",background:"url("+c+")","background-position":"-"+d+"px 0"}).appendTo(i.parent());this.css3(h,{"transition-duration":this.options.animationShow+"ms","transition-delay":this.options.blindsBarDelay*u+"ms"})}t.delay((function(){return r.css3(r.element.find("."+r.preparations.barClass),{transform:"scaleX(0)"})}),50);t.delay((function(){return r.element.find("."+r.preparations.barClass).remove()}),this.preparations.barsDelay+50)};i._execFade=function e(t,i){var a=this;t.stop(true).fadeOut(this.options.animationShow,(function(){i.stop(true).fadeIn(a.options.animationShow)}))};i._execMove=function e(t,i,a,r){var s=this;var n=this.options.visibleSlides*r;var o=this.$items.eq(n);var l=o.outerWidth();var c=l*n+(r>0?this.options.offset:0);this.selfScroll=true;this.element.find(this.options.holder).stop().animate({scrollLeft:c},this.options.animationShow,(function(){s.selfScroll=false}))};return e}();e.exports=function(e,t){return new u(e,t)}}).call(this,i(5)(e))},838:function(e,t,i){"use strict";var a=i(988);var r=i(0);var s=i(769);var n=500;e.exports=s.extend({name:"Slider",el:false,lazyload:false,infiniteLoop:false,responsive:null,useControls:true,useRangeControl:true,maxRangeValue:200,swipeSensitivity:60,transitionDuration:500,rangeTransitionDuration:0,activeInCenter:false,slidesToShow:1,slidesToMove:1,currentOffset:0,currentIndex:0,firstIndex:0,events:{"touchstart ._slider":"onTouchStart","touchend ._slider":"onTouchEnd","touchmove ._slider":"onTouchMove","input ._range-input":"onRangeInput","click ._next":"onNextClick","click ._prev":"onPrevClick"},globals:{"resize window":"onWindowResize"},clientAfterRender:function e(){this.slider=this.el.querySelector("._slider");this.slides=this.el.querySelectorAll("._slider-item");this.addAnimationListener();if(this.lazyload){this.setImagePlaceholders()}this.initializeSlider()},addAnimationListener:function e(){this.slider.addEventListener("transitionend",this.handleTransitionEnd.bind(this))},remove:function e(){this.slider.removeEventListener("transitionend",this.handleTransitionEnd.bind(this));s.prototype.remove.call(this)},handleTransitionEnd:function e(t){if(t.target.classList.contains("_slider")){this.blockControls=false;if(this.infiniteLoop){this.handleInfiniteLoop()}}},initializeSlider:function e(){this.setResponsiveOptions();this.maxOffset=this.el.clientWidth-this.slider.clientWidth;this.lastWidth=window.innerWidth;this.currentIndex=this.firstIndex;this.moveToNextSlide(this.slides[this.currentIndex],0)},onTouchStart:function e(t){this.slider.classList.toggle("no-transition",false);this.startTouch=t.originalEvent.touches[0].clientX},onTouchEnd:function e(t){var i=t.originalEvent.changedTouches[0].clientX;var a=this.startTouch-i||0;if(Math.abs(a)>this.swipeSensitivity){var r=a<0?-1:1;this.slideSwitch(r)}},onWindowResize:r.throttle((function e(){var t=this.lastWidth-window.innerWidth;if(t!==0&&this.isSliderVisible()){if(this.useRangeControl){this.el.querySelector("._range-input").value=0}this.initializeSlider()}}),n),onRangeInput:function e(t){var i=t.target;this.currentOffset=this.maxOffset/this.maxRangeValue*i.value;this.animateMotion(this.rangeTransitionDuration,this.currentOffset)},onPrevClick:function e(t){if(this.blockControls){return}t.stopPropagation();this.slideSwitch(-1)},onNextClick:function e(t){if(this.blockControls){return}t.stopPropagation();this.slideSwitch(1)},slideSwitch:function e(t){this.currentIndex=this.getNextIndex(t);this.moveToNextSlide(this.slides[this.currentIndex])},getNextIndex:function e(t){var i=this.currentIndex+t*this.slidesToMove;if(i<=0){return 0}if(i>=this.slides.length-this.slidesToMove){return this.slides.length-this.slidesToMove}return i},moveToNextSlide:function e(t,i){if(i===void 0){i=this.transitionDuration}this.setActiveSlide(t.classList);var a=t.offsetLeft,r=t.offsetWidth;var s=a+r/2;var n=this.el.clientWidth/2;var o=this.activeInCenter?n-s:-a;if(o<this.maxOffset){this.currentOffset=this.maxOffset}else{this.currentOffset=o}this.toggleControls();this.animateMotion(i,this.currentOffset)},animateMotion:function e(t,i){this.slider.style.transitionDuration=t+"ms";this.slider.style.transform="translate3d("+i+"px, 0, 0)";if(t){this.blockControls=true;return}if(this.infiniteLoop){this.handleInfiniteLoop()}},setImagePlaceholders:function e(){var t=this;this.slides.forEach((function(e){var i=e.querySelector("._slider-img");var a=t.slider.clientHeight*e.dataset.ratio;e.style.width=a+"px";e.classList.add("placeholder");i.onload=function(){e.style.width="inherit"}}))},handleInfiniteLoop:function e(){if(this.currentIndex===this.slidesToShow-1){this.currentIndex=this.slides.length-this.slidesToShow-1;this.jumpTo(this.slides[this.currentIndex])}if(this.currentIndex>=this.slides.length-this.slidesToShow){this.currentIndex=this.slidesToShow;this.jumpTo(this.slides[this.currentIndex])}},jumpTo:function e(t){this.slider.classList.add("no-transition");this.moveToNextSlide(t,0);this.slider.classList.remove("no-transition")},setResponsiveOptions:function e(){var t=this;if(!this.responsive){return}var i=this.responsive[this.getBreakpoint()];if(i){Object.keys(i).forEach((function(e){t[e]=i[e]}))}},getBreakpoint:function e(){return a(Object.keys(this.responsive),window.innerWidth)},setActiveSlide:function e(t){if(this.el.querySelector(".active")){this.el.querySelector(".active").classList.remove("active")}t.add("active")},isSliderVisible:function e(){return this.$(this.slider).is(":visible")},toggleControls:function e(){if(!this.useControls){return}var t=this.el.querySelector("._prev");var i=this.el.querySelector("._next");t.classList.add("visible-control");i.classList.add("visible-control");if(this.currentOffset===0||this.currentIndex===0){t.classList.remove("visible-control")}if(this.currentOffset<=this.maxOffset||this.currentIndex===this.slides.length-1){i.classList.remove("visible-control")}}})},866:function(e,t,i){"use strict";var a=i(0);var r=i(17);var s=i(74);e.exports={downloadByUrl:function e(t){if(t.app.device.isMobile){if(a.isFunction(t.callback)){t.callback()}t.app.router.redirect(t.link)}else{this.initIFrame(t)}},initIFrame:function e(t){var i=this;var s="u"+Math.random();var n=r.$("<iframe />",{class:"invisible","data-uuid":s});r.$("body").append(n);n.attr({src:""+t.link+(t.link.indexOf("?")!==-1?"&":"?")+"uuid="+s});if(!a.isObject(this.iframeLoaderData)){this.iframeLoaderData={}}this.iframeLoaderData[s]={$iframe:n,callback:t.callback,toDelete:false,errors:false};n.on("load.priceTable",(function(e){var t=e.currentTarget.getAttribute("data-uuid");i.iframeLoaderData[t].toDelete=true;i.iframeLoaderData[t].errors=true}));this.iFrameDaemon()},iFrameDaemon:function e(){var t=this;var i=function e(){clearTimeout(t.iframeLoaderId);if(r.$.isEmptyObject(t.iframeLoaderData)){return false}a.each(t.iframeLoaderData,(function(e,i){if(e.toDelete){if(e.callback&&a.isFunction(e.callback)){e.callback(!e.errors)}setTimeout(function(e){e.remove()}.bind(t,t.iframeLoaderData[i].$iframe),6e4);delete t.iframeLoaderData[i];s.set(i,"",{path:"/",expires:new Date})}else if(s.get(i)===i){e.toDelete=true}}),t);t.iframeLoaderId=setTimeout(e,1e3);return true};i()}}},867:function(e,t,i){"use strict";e.exports={index:{effect:"blinds",element:"._series-box-item",blindsBarDelay:175,animationShow:500,autorun:false,navigation:false},about:{effect:"move",activeSlideClass:"about-page__gallery-item_active",prevSlideClass:"about-page__gallery-item_prev",nextSlideClass:"about-page__gallery-item_next",adjacentSlides:true,arrowNavigation:true,animationSlide:2e4,animationShow:100,autorun:false},favorite:{effect:"fade",animationSlide:1e4,animationShow:500},recentlyViewed:{effect:"move",animationShow:500,holder:"._scroll",element:"._slider-elements > *",navElement:"._slider-navigation > *",activeNavigationClass:"pager-slider__page_active",autorun:false,navigation:true,visibleSlides:6},filesBox:{effect:"move",animationShow:500,holder:"._scroll",element:"._slider-elements > *",navElement:"._slider-navigation > *",activeNavigationClass:"pager-slider__page_active",autorun:false,navigation:true},ourApps:{effect:"fade",animationSlide:1e4,animationShow:200,slideOnTouchMove:true},marketBlock:{effect:"move",animationShow:500,holder:"._scroll",element:"._slider-elements > *",navElement:"._slider-navigation > *",activeNavigationClass:"pager-slider__page_active",autorun:false,navigation:true,visibleSlides:1,offset:14},rightFolders:{effect:"slide",autorun:false,animationShow:200},marketFolders:{effect:"slide",autorun:false,animationShow:200,slideOnlyForward:true,slideOnTouchMove:true},userProductsHome:{effect:"fade",autorun:false,animationShow:300}}},869:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="tooltip__custom tooltip__custom_justify">';if(t.extendedMessage){i+="<p>"+this.tr("Use of this image in advertising or for promotional purposes is prohibited.")+"</p>"}i+=""+this.tr('<p>Any file downloaded from Depositphotos can be used for "editorial" purposes; the Standard License Agreement permits many uses for downloaded files, including for editorial use. Files downloaded under the Editorial Use Only license can be used only for non-commercial purposes.</p><p>For example, a file licensed for Editorial Use Only can be used to illustrate a news article on a blog or website, for purely descriptive purposes, in a non-commercial setting.</p><p class="d_last_tips_p">An Editorial Use Only file cannot be used in advertising or promotional material, or in any published work that involves the payment or receipt of a fee.</p>')+"</div>";return i}},870:function(e,t,i){},882:function(e,t,i){"use strict";var a=i(0);var r=i(2);var s="curated-collection";e.exports=r.extend({url:"CuratedFolder",defaults:{id:null,count:1e4},parse:function e(t){if(t.errors){return{}}return a.pick(t.data,a.keys(this.defaults))},getLink:function e(){return this.app.makeUrl("folder/"+s+"-"+this.get("id"))}})},901:function(e,t,i){"use strict";i(902);i(903);i(904);i(905);i(906);i(825);i(907);i(908);i(909);i(825);i(910);var a=i(17);var r=i(911);var s=i(912);var n=i(913);var o=i(914);var l=i(915);var c=i(916);var u=i(917);var d=i(918);var h=i(919);var p=i(920);var f=i(921);var v=i(922);var m=i(923);var b=i(924);var g=i(925);var _=i(926);var w=i(546);var y=i(552);var k=i(571);var x=i(576);var C={SignupPreviewBlackFriday:h,SignupPreviewCyberMonday:h,SignupPreviewChristmas:h,SignupOndemand:l,SignupChristmas:v,SignupBlackFriday:c,SignupCyberMonday:d,FileViewMembership:r,FileViewUdemy:s,FileViewWideMembership:_,FileViewBlackFriday:o,FileViewWideBlackFriday:o,FileViewWideMar20Offer:p,FileViewMar20Offer:p,FileViewWideEasterOffer:f,FileViewEasterOffer:f,FileViewChristmas:o,FileViewCyberMonday:o,FileViewWideCyberMonday:o,FileViewGoogleAdSense:n,HomeMembership:b,Home3Membership:g,Home3CardExpiration:m,Home3BlackFriday:o,Home3Mar20Offer:p,Home3EasterOffer:f,Home3Christmas:o,Home3CyberMonday:o,Home3Trial:u,FileViewTrial:u,SubscribeChristmas:o,SubscribeBlackFriday:o,SubscribeMar20Offer:p,SubscribeEasterOffer:f,SubscribeCyberMonday:o};var S={Home3:"holiday-poster_home",Subscribe:"holiday-poster_subscribe",FileView:"holiday-poster_file-view",FileViewWide:"holiday-poster_file-view-wide",SignupPreview:"holiday-poster_signup-preview"};var T={BlackFriday:"holiday-poster_black-friday",CyberMonday:"holiday-poster_cyber-monday",Christmas:"holiday-poster_christmas"};var M={CardExpired:"card-expiration-poster_expired"};var P={UdemyPhotography:"udemy-banner_photography",UdemyPostProduction:"udemy-banner_production",UdemyIphonePhotography:"udemy-banner_iphone"};var L={CardExpired:"button-red",CardExpirationInTimeNotification:"button-blue",CardExpirationEarlyNotification:"button-blue"};e.exports=w.extend({name:"Banner",el:false,isLink:false,templates:C,events:{"mouseover ._pseudolink":"onMouseOverLink","click ._link":"handleLinkClick","click ._close":"handleCloseClick"},initialize:function e(){this.listenTo(this.model,"sync",this.render)},template:function e(){var t=""+this.model.get("location")+this.model.get("template");for(var i=arguments.length,a=new Array(i),r=0;r<i;r++){a[r]=arguments[r]}return this.templates[t]?this.templates[t].apply(this,a):""},serialize:function e(){var t=this.model.serialize();var i=t.name,a=t.location,r=t.template,s=t.config;return{data:t,isLink:this.isLink,classes:{byName:M[i]||"",byLocation:S[a]||"",byTemplate:T[r]||"",byType:P[s.type]||""},buttonClasses:{byName:L[i]||""}}},clientAfterRender:function e(){var t=this;this.app.observer.broadcast("Track:UE:Banner:Show",{model:this.model});y(this.$el,a.$);var r=this.model.get("components"),s=r.timer;if(s){i.e(108).then(function(e){var a=i(837);t.setViews({"._timer":new a({app:t.app,distance:s.distance,format:s.format,shouldShowLabels:s.shouldShowLabels,finishCallback:function e(){return t.model.fetch()}})})}.bind(null,i)).catch(i.oe)}},onMouseOverLink:function e(t){k.transformToLink(t.currentTarget,this.model.get("url"))},handleLinkClick:function e(t){t.preventDefault();this.app.observer.broadcast("Track:UE:Banner:Click",{model:this.model});var i=this.model.get("config");if(i.liveChat){new x({app:this.app}).open();return}this.app.router.redirect(this.model.get("url"))},handleCloseClick:function e(){var t=this;this.model.destroy().then((function(){t.app.observer.broadcast("Track:UE:Banner:Close",{model:t.model});t.remove()}))}})},902:function(e,t,i){},903:function(e,t,i){},904:function(e,t,i){},905:function(e,t,i){},906:function(e,t,i){},907:function(e,t,i){},908:function(e,t,i){},909:function(e,t,i){},910:function(e,t,i){},911:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="plan-poster plan-poster_file-view _plan-poster"><div class="plan-poster__wrap _link _pseudolink"><span class="plan-poster__cell"><span class="plan-poster__title">'+t.data.config.title+this.seo.space+'</span><span class="plan-poster__button button button-l button-red">'+t.data.config.buttonTitle+"</span></span></div></div>";return i}},912:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="udemy-banner '+i(t.classes.byType)+'"><a href="'+t.data.url+'" class="udemy-banner__wrap _link"><span class="udemy-banner__cell udemy-banner__cell_icon"><i class="icon"></i></span><span class="udemy-banner__cell udemy-banner__cell_logo"><i class="icon icon-udemy-logo"></i></span><span class="udemy-banner__separator"></span><span class="udemy-banner__cell udemy-banner__cell_text">'+t.data.config.description+'</span><span class="udemy-banner__cell udemy-banner__cell_action"><button class="button button-l button-red button-pill button-bold">'+t.data.config.buttonTitle+"</button></span></a></div>";return a}},913:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="adsbygoogle-box"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"><\/script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2381495523102049" data-ad-slot="9366472872"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); <\/script></div>';return i}},914:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div> <a href="'+i(t.data.url)+'" class="holiday-poster '+i(t.classes.byLocation)+" "+i(t.classes.byTemplate)+' _link"> <span class="holiday-poster_img"></span> <div class="holiday-poster__text"> <h2 class="holiday-poster__title"> '+t.data.config.title+" </h2> ";if(t.data.config.description){a+=' <h3 class="holiday-poster__sub-title"> '+t.data.config.description+" </h3> "}a+=" </div> ";if(t.data.components.timer){a+=' <div class="holiday-poster__timer _timer"></div> '}a+=' <span class="holiday-poster__button button button-pill button-l button-red"> '+t.data.config.buttonTitle+" </span> </a></div>";return a}},915:function(e,t,i){"use strict";e.exports=function e(t){var i='<div><div class="offer-preview__content"><div class="offer-preview__content-wrap"><h2 class="offer-preview__content-title">'+t.data.config.title+'</h2><h3 class="offer-preview__content-subtitle">'+t.data.config.description+'</h3><ul class="offer-preview__content-list">';var a=t.data.config.texts;if(a){var r,s=-1,n=a.length-1;while(s<n){r=a[s+=1];i+='<li class="offer-preview__content-list-item">'+r+"</li>"}}i+='</ul></div></div><div class="offer-preview__total"><h4 class="offer-preview__total-title">'+this.tr("Total Price")+':</h4><span class="offer-preview__total-old-price">'+t.data.config.priceWithoutDiscount+'</span><span class="offer-preview__total-price">'+t.data.config.price+"</span></div></div>";return i}},916:function(e,t,i){"use strict";e.exports=function e(t){var i='<div><div class="offer-preview__content offer-preview__content_black-friday"><div class="offer-preview__content-wrap"><h2 class="offer-preview__content-title">'+t.data.config.title+'</h2><h3 class="offer-preview__content-subtitle">'+t.data.config.description+"</h3>";if(t.data.components.timer){i+='<div class="offer-preview__timer-box _timer"></div>'}i+='</div></div> <div class="offer-preview__total"> <h4 class="offer-preview__total-title">'+t.data.config.texts[0]+':</h4> <span class="offer-preview__total-old-price">'+t.data.config.priceWithoutDiscount+'</span> <span class="offer-preview__total-price">'+t.data.config.price+"</span> </div></div>";return i}},917:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="trial-banner';if(t.data.location==="FileView"){i+=" trial-banner_light"}i+=' _plan-poster"><a href="'+t.data.url+'" class="trial-banner__wrap _link"><span class="trial-banner__icon"><i class="icon"></i></span><span class="trial-banner__text">'+t.data.config.description+'</span><span class="trial-banner__action"><button class="button button-blue button-5xl button-pill button-bold">'+t.data.config.buttonTitle+"</button></span></a></div>";return i}},918:function(e,t,i){"use strict";e.exports=function e(t){var i='<div><div class="offer-preview__content offer-preview__content_cyber-monday"><div class="offer-preview__content-wrap"><h2 class="offer-preview__content-title">'+t.data.config.title+'</h2><h3 class="offer-preview__content-subtitle">'+t.data.config.description+"</h3>";if(t.data.components.timer){i+='<div class="offer-preview__timer-box _timer"></div>'}i+='</div></div> <div class="offer-preview__total"> <h4 class="offer-preview__total-title">'+t.data.config.texts[0]+':</h4> <span class="offer-preview__total-old-price">'+t.data.config.priceWithoutDiscount+'</span> <span class="offer-preview__total-price">'+t.data.config.price+"</span> </div></div>";return i}},919:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div> <div class="tall-holiday-poster '+i(t.classes.byLocation)+" "+i(t.classes.byTemplate)+" ";if(t.data.components.timer){a+="holiday-poster_with-timer"}else{a+="holiday-poster_without-timer"}a+='"> <h2 class="tall-holiday-poster__title"> '+t.data.config.title+" </h2> ";if(t.data.components.timer){a+=' <div class="tall-holiday-poster__timer _timer"></div> '}a+=" </div> ";if(t.data.config.texts&&t.data.config.price&&t.data.config.priceWithoutDiscount){a+='  <div class="offer-preview__total"> <h4 class="offer-preview__total-title">'+t.data.config.texts[0]+':</h4> <span class="offer-preview__total-old-price">'+t.data.config.priceWithoutDiscount+'</span> <span class="offer-preview__total-price">'+t.data.config.price+"</span> </div> "}a+="</div>";return a}},920:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="march-offer '+i(t.classes.byLocation)+'"> <h2 class="march-offer__title"> '+t.data.config.title+" </h2> ";if(t.data.components.timer){a+=' <div class="march-offer__timer _timer"></div> '}a+=' <button type="button" class="march-offer__button button button-pill button-l"> '+t.data.config.buttonTitle+' </button> <a href="'+i(t.data.url)+'" class="march-offer__link _link"></a></div>';return a}},921:function(e,t,i){"use strict";e.exports=function e(t){var i=typeof _encodeHTML!=="undefined"?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(e==null?"":""+e).replace(i,(function(e){return t[e]||e}))}}();var a='<div class="easter-offer '+i(t.classes.byLocation)+'"> <h2 class="easter-offer__title"> '+t.data.config.title+" </h2> ";if(t.data.components.timer){a+=' <div class="easter-offer__timer _timer"><div class="timer-placeholder"></div></div> '}a+=' <button type="button" class="easter-offer__button button button-pill button-l"> '+t.data.config.buttonTitle+' </button> <a href="'+i(t.data.url)+'" class="easter-offer__link _link"></a></div>';return a}},922:function(e,t,i){"use strict";e.exports=function e(t){var i='<div><div class="offer-preview__content offer-preview__content_christmas"><div class="offer-preview__content-wrap"><h2 class="offer-preview__content-title">'+t.data.config.title+'</h2><h3 class="offer-preview__content-subtitle">'+t.data.config.description+'</h3><ul class="offer-preview__content-list">';var a=t.data.config.texts;if(a){var r,s=-1,n=a.length-1;while(s<n){r=a[s+=1];i+='<li class="offer-preview__content-list-item">'+r+"</li>"}}i+='</ul></div></div><div class="offer-preview__total"><h4 class="offer-preview__total-title">'+this.tr("Total Price")+':</h4><span class="offer-preview__total-old-price">'+t.data.config.priceWithoutDiscount+'</span><span class="offer-preview__total-price">'+t.data.config.price+"</span></div></div>";return i}},923:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="card-expiration-poster '+t.classes.byName+'"><a href="'+t.data.url+'" class="card-expiration-poster__wrap _link"><div class="card-expiration-poster__content"><div class="card-expiration-poster__info"><span class="card-expiration-poster__title">'+t.data.config.title+'</span><span class="card-expiration-poster__description">'+t.data.config.description+'</span></div><button class="button '+t.buttonClasses.byName+' card-expiration-poster__button">'+t.data.config.buttonTitle+'</button></div></a><i class="card-expiration-poster__close button-close _close"></i></div>';return i}},924:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="plan-poster plan-poster_home"><a href="'+t.data.url+'" class="plan-poster__wrap link-white _link"><span class="plan-poster__cell"><span class="plan-poster__title">'+t.data.config.title+'</span><span class="plan-poster__button button button-l button-blue">'+t.data.config.buttonTitle+"</span></span></a></div>";return i}},925:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="plan-poster plan-poster_home-wide"><a href="'+t.data.url+'" class="plan-poster__wrap link-white _link"><span class="plan-poster__cell"><span class="plan-poster__title">'+t.data.config.title+'</span><span class="plan-poster__button button button-xl button-red">'+t.data.config.buttonTitle+"</span></span></a></div>";return i}},926:function(e,t,i){"use strict";e.exports=function e(t){var i='<div class="plan-poster plan-poster_file-view-wide"><div class="plan-poster__wrap link-white _link"><span class="plan-poster__cell"><span class="plan-poster__title">'+t.data.config.title+'</span><span class="plan-poster__button button button-4xl button-red button-pill">'+t.data.config.buttonTitle+"</span></span></div></div>";return i}},927:function(e,t,i){"use strict";var a=i(2);e.exports=a.extend({url:"Meta",getQueryParams:function e(){}})},988:function(e,t,i){"use strict";var a=function e(t,i){return t.reduce((function(e,t){if(t<=i){e=Math.max(e,t)}return e}),-1)};e.exports=a},999:function(e,t,i){"use strict";(function(t){i(1009);var a=i(0);var r=i(867).index;var s=i(556);var n=i(546);var o=i(774);var l=i(11);var c=i(836);e.exports=n.extend({name:"Series",el:false,slide:false,slideConfig:{},videoContent:false,isDownloadLocked:false,events:{click:"onSeriesBoxClick",contextmenu:"onSeriesBoxCustomClick",mouseup:"onSeriesBoxCustomClick","click ._series-link":"onLinkClick","contextmenu ._series-link":"onCustomLinkClick","mouseup ._series-link":"onCustomLinkClick"},prepareRender:function e(){if(this.videoContent&&this.model.get("elements").at(0)){this.setViews({"._series-video":new o({app:this.app,RAWVideoFiles:this.model.get("elements").at(0).get("resource").get("src"),width:832,height:468,controls:false,hasPoster:false,autoplay:!!t.browser,spinner:{top:"92%",left:"2%",color:"#c8c8c8"}})})}},clientAfterRender:function e(){if(this.slide){c(this.$el,Object.assign(a.clone(r),this.slideConfig))}this.tryToShowBackground()},serialize:function e(){return{lang:this.app.lang,series:this.model.toJSON(),isDownloadLocked:this.isDownloadLocked,isWebmAllowed:this.app.features.isFeatureOnValue("Is webm video thumb allowed")}},tryToShowBackground:function e(){var t=this;a.each(this.$("._has-bg"),(function(e){var i=t.$(e);i.attr("style",i.attr("data-bg")).removeAttr("data-bg").removeClass("series-table__cell_show-img _has-bg")}))},onLinkClick:function e(t){var i;if(t.ctrlKey||t.shiftKey||t.metaKey){this.trackNewTabClick(t.currentTarget.href);return}t.preventDefault();for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++){r[s-1]=arguments[s]}(i=this.onSeriesLinkClick).call.apply(i,[this,t].concat(r));this.trackSeriesClick(t.currentTarget.href);this.app.router.redirect(t.currentTarget.href)},onCustomLinkClick:function e(t){if(![s.rightMouse,s.middleMouse].includes(t.which)){return}this.trackNewTabClick(t.currentTarget.href)},parseUrl:function e(t){if(t===void 0){t=""}var i=(l.getRoute(t)||{}).name;var a=i==="FileView"?l.getExtendedQueryParams(t).id:null;return[i,a]},trackSeriesClick:function e(t){var i={url:t,target:"search"};var a=this.parseUrl(t),r=a[0],s=a[1];if(r==="FileView"){if(s){i.targetId=parseInt(s,10);i.target="fileView"}}this.app.observer.broadcast("Track:UE:Series:Click",i)},trackNewTabClick:function e(t){var i=["FileView","Search"];var a=this.parseUrl(t),r=a[0],s=a[1];if(!i.includes(r)){return}this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:this.app.tracking.cache.FlumeTrackerNew.isIndexPage()?"TopMenuPromo":this.name,target:s?{target:"fileView",targetId:parseInt(s,10)}:{target:"search"},params:{url:t}})},onSeriesBoxClick:function e(){},onSeriesBoxCustomClick:function e(){},onSeriesLinkClick:function e(){}})}).call(this,i(16))}}]);